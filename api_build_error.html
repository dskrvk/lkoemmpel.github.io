<pre><font color="#4E9A06"><b>lkoemmpel@laura-lenovo</b></font>:<font color="#3465A4"><b>~/Documents/wise-systems/wise-api</b></font>$ ./build.sh
<span style="background-color:#2E3436"><font color="#D3D7CF">npm</font></span> <span style="background-color:#C4A000"><font color="#2E3436">WARN</font></span> <font color="#75507B">prepare</font> removing existing node_modules/ before installation

&gt; core-js@2.6.9 postinstall /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/core-js
&gt; node scripts/postinstall || echo &quot;ignore&quot;

<font color="#34E2E2">Thank you for using core-js (</font><font color="#729FCF"> https://github.com/zloirock/core-js </font><font color="#34E2E2">) for polyfilling JavaScript standard library!</font>

<font color="#34E2E2">The project needs your help! Please consider supporting of core-js on Open Collective or Patreon: </font>
<font color="#34E2E2">&gt;</font><font color="#729FCF"> https://opencollective.com/core-js </font>
<font color="#34E2E2">&gt;</font><font color="#729FCF"> https://www.patreon.com/zloirock </font>

<font color="#34E2E2">Also, the author of core-js (</font><font color="#729FCF"> https://github.com/zloirock </font><font color="#34E2E2">) is looking for a good job -)</font>


&gt; gc-stats@1.4.0 install /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/gc-stats
&gt; node-pre-gyp install --fallback-to-build

<span style="background-color:#2E3436"><font color="#D3D7CF">node-pre-gyp</font></span> <span style="background-color:#C4A000"><font color="#2E3436">WARN</font></span> <font color="#75507B">Using request for node-pre-gyp https download</font> 
[gc-stats] Success: &quot;/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/gc-stats/build/gcstats/v1.4.0/Release/node-v72-linux-x64/gcstats.node&quot; is installed via remote

&gt; protobufjs@6.8.8 postinstall /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/protobufjs
&gt; node scripts/postinstall


&gt; bcrypt@3.0.8 install /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/bcrypt
&gt; node-pre-gyp install --fallback-to-build

<span style="background-color:#2E3436"><font color="#D3D7CF">node-pre-gyp</font></span> <span style="background-color:#C4A000"><font color="#2E3436">WARN</font></span> <font color="#75507B">Using request for node-pre-gyp https download</font> 
[bcrypt] Success: &quot;/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/bcrypt/lib/binding/bcrypt_lib.node&quot; is installed via remote

&gt; fsevents@1.2.9 install /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/fsevents
&gt; node install

added 1300 packages in 137.654s

&gt; wise-api-server@1.55.0-20200612 test /home/lkoemmpel/Documents/wise-systems/wise-api
&gt; TZ=UTC jenkins-mocha --exit --recursive --cobertura server/test/*

2020-06-30T18:30:16.915Z - <font color="#06989A">verbose</font>:  PORT=8002, HOST=localhost, PORT=27017, USER=wise, DB=wise_dev, DELAY_RATE=2, DELAY_STEP=5, MAX_DELAY=60, autoReconnect=true, poolSize=200, PASS=, DELAY_RATE=2, DELAY_STEP=5, MAX_DELAY=60, HOST=localhost, PORT=5672, USER=guest, VHOST=/, PASS=, AUTH_HOST=localhost, AUTH_PORT=8003, LEVEL=debug, COLOR=true, HANDLE_EXCEPTIONS=false, SALT_WORK_FACTOR=10, DEFAULT_PAGINATION_LIMIT=10, MAX_PAGINATION_LIMIT=1000, MAX_SCHEDULE_TASKS=500, DEFAULT_REPLY_EMAIL=noreply@wisesystems.io, LOGIN_TOKEN_EXPIRE=8765h, VERIFICATION_EXPIRE=15m, CUSTOMER_PORTAL_EXPIRATION=24h, AUDIENCE=[4mu55ljs7uuf9g685kacg4btum, 5alj1219fqatgcuheh60uqbrhv], ISSUER=https://cognito-idp.us-east-1.amazonaws.com/us-east-1_atzB1Ascg, POOL_ID=us-east-1_atzB1Ascg, MQ_TIMEOUT=10000, ASSIGNMENT_UPDATE_MQ_TIMEOUT=20000, START_DAY_TIMEOUT=300000, SCHEDULE_TIMEOUT=60000, DEFAULT_PAGE_START=0, DEFAULT_PAGE_LIMIT=10, ALLOW_SUPER_USER=true, SUPER_USER_TOKEN=timeandmoney, SUPER_DRIVER_TOKEN=W8tz9urn, ACTION_SCHEDULER_TOKEN=APIKeys/wiseAPI/actionScheduler/dev, FILE_PATH=/tmp/wise, ENABLED=false, FILE_NAME=events.json, GET=[^/test$, ^/order$, ^/smartscheduling/?$], POST=[path=^/driver/status$, action=login, path=^/driver/status$, action=resend, path=^/driver/status$, action=verify, path=^/user/status$, action=login, path=^/user/status$, action=sales_login, path=^/user/status$, action=verify, path=^/user/status$, action=reset_password, path=^/user/status$, action=update_password, path=^/user/status$, action=resend, ^/twiml/$], PUT=[], PATCH=[path=^/customers$, action=unsubscribe, ^/twiml$], DELETE=[], API_URL=http://localhost:8002, FE_PROTOCOL=http, FE_HOSTNAME=localhost:8001, FE_VERIFY_EMAIL_PATH=wise-verify, FE_RESET_PASS_PATH=wise-reset, CUSTOMER_HOSTNAME=localhost:8006, VERIFY_TOKEN_SIZE=64, VERIFY_PIN_SIZE=4, VERIFY_PORTAL_TOKEN_SIZE=8, OAUTH_CLIENT_ID=wiseTrustedAPI, OAUTH_CLIENT_SECRET=wA*WbTNWYD2#, GOOGLE_API_KEY=AIzaSyBy8tKzDWQkDGlLWm8_W6pitsu08QhFK5o, HERE_API_ID=TYNeISwzJwj6HOZUASD4, HERE_API_KEY=K-hrI7ZYXsusE3jIIn36Og, GOOGLE_API_HOST=mapcache.wisesys.info, GOOGLE_API_PORT=80, AMAP_API_HOST=restapi.amap.com, AMAP_API_KEY=015cd7a1897712a8aefa6d1b80f46677, AMAP_API_PORT=80, AWS_ACCESS_KEY_ID=AKIAIAR7WJ6AP2WBYB4A, AWS_SECRET_ACCESS_KEY=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, AWS_BUCKET=wise-events-development, AWS_CUSTOMER_FOLDER=wise-customers-reports, AWS_CLIENT_FOLDER=wise-clients-reports, AWS_DRIVER_FOLDER=wise-drivers-reports, AWS_INTEGRATION_DOWNLOADS_FOLDER=integration-downloads, AWS_REPORTS_FOLDER=wise-reports, AWS_STS_EXPIRATION=3600, AWS_UPLOADS_TOPIC=arn:aws:sns:us-east-1:663148821630:route-upload, AWS_UPLOADS_FOLDER=route-uploads, THIRD_PARTY_TOPIC=arn:aws:sns:us-east-1:663148821630:third-party-partner-integration, DRIVER_APP_ROLE=arn:aws:iam::663148821630:role/APIImageUploadAccess, ENABLED=false, NAMESPACE=WiseApi, SEND_INTERVAL_MS=1000, WISE_ADMIN=true, WISE_CLIENT=5c087850-2a99-11e5-9189-eb07c479dfd5, WISE_ADMIN_CLIENT=c8d01b88-b330-4b51-9384-e8e5c967ab18, DEFAULT_MOCK_USER=27331fd8-2b00-11e5-b345-feff819cdc9f, AUTH_PATH_SMART_SCHEDULING=/oauth/smart_scheduling, AUTH_PATH_WEB=/oauth/token_v2, AUTH_PATH_V1=/oauth/token_v1, AUTH_PATH_DRIVER_PIN=/oauth/driver, AUTH_PATH_SALES_PIN=/oauth/sales, AUTH_PATH_SALES=/oauth/sales_v2, DEPOT=depot, ROUTE_DATE_FORMAT=YYYY-MM-DD, NOTIFICATION_EMAIL=support@wisesystems.com, WISE_SOLUTION_NAME=Wise, CUSTOM=Custom, WISE=Wise, ROUTE_BUILDER=RouteBuilder, SCHEDULER=Scheduler, SEQUENTIAL_INSERTION=SequentialInsertion, START_DAY=StartDay, MULTI_DAY_SCHEDULER=MultiDayScheduler, MIXED=Mixed, P_VALUE_ACCEPTANCE_THRESHOLD=0.05, SIZE_SMALL=50, SIZE_MEDIUM=250, SIZE_LARGE=500, google=AIzaSyC9z-33WtVMi1Z2J5bFCulspwLmiO8br3U, 5c087850-2a99-11e5-9189-eb07c479dfd5=true, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=100, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=1000, windowMs=1000, max=1000, DATABASE_NAME=opsdb_dev, USERNAME=wise_root, PASS=Pl#ygr0und, DELAY_RATE=2, DELAY_STEP=5, MAX_DELAY=60, host=opsdb-dev.cf1r8hjgc2af.us-east-1.rds.amazonaws.com, port=5432, ssl=Amazon RDS, dialect=postgres, benchmark=true, max=5, min=0, idle=10000, max=1, ML_API_SERVER=http://ml-api.sandbox.wisesys.info, ML_API_CALL_TIMEOUT=3000, ARCHIVE_PERIOD_HOURS=4, SERVER_REGION=us-east-1, MAP_CACHE_REGION=us, item=Inventory_Item_{count}_, id=Inventory_ID_{count}_, quantity=Inventory_Quantity_{count}_, ACCOUNT_SID=ACa0dc8c105579f9433d396d8d75c4fc05, AUTH_TOKEN=dfba75ffd46f6bd36841ffe53d40cfd6, PIN_LOGIN_MESSAGE=Hello, your Wise Systems code is:, SELF_SCHEDULING_PORTAL_EXPIRATION=2H, SMART_SCHEDULING_HOSTNAME=localhost:8018, ACTION_SCHEDULER_CONSUMER_ENABLED=true, WEBHOOKS_EVENTS_ENABLED=true, STAGE=default, REGION=undefined
2020-06-30T18:57:27.699Z - <font color="#4E9A06">info</font>: API server starts on HTTP port 8002


(node:133341) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.
<font color="#CC0000">  1) Uncaught error outside test suite</font>
2020-06-30T18:57:41.327Z - <font color="#4E9A06">info</font>: AMQP send channel connected
2020-06-30T18:57:41.328Z - <font color="#4E9A06">info</font>: AMQP notice channel connected
2020-06-30T18:57:41.329Z - <font color="#4E9A06">info</font>: AMQP receive channel connected
2020-06-30T18:57:41.343Z - <font color="#CC0000">error</font>: MongoDB disconnected! Reconnecting in 9.242786571602673s...
2020-06-30T18:57:41.344Z - <font color="#CC0000">error</font>: Initial MongoDB connection error: MongoNetworkError: failed to connect to server [localhost:27017] on first connect [MongoNetworkError: connection timed out    at connectionFailureError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connect.js:406:14)    at Socket.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connect.js:294:16)    at Object.onceWrapper (events.js:421:28)    at Socket.emit (events.js:315:20)    at Socket.EventEmitter.emit (domain.js:482:12)    at Socket._onTimeout (net.js:481:8)    at listOnTimeout (internal/timers.js:549:17)    at processTimers (internal/timers.js:492:7) {  [Symbol(mongoErrorContextSymbol)]: {}}]
2020-06-30T18:57:41.346Z - <font color="#CC0000">error</font>: MongoDB connection error: MongoNetworkError: failed to connect to server [localhost:27017] on first connect [MongoNetworkError: connection timed out    at connectionFailureError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connect.js:406:14)    at Socket.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connect.js:294:16)    at Object.onceWrapper (events.js:421:28)    at Socket.emit (events.js:315:20)    at Socket.EventEmitter.emit (domain.js:482:12)    at Socket._onTimeout (net.js:481:8)    at listOnTimeout (internal/timers.js:549:17)    at processTimers (internal/timers.js:492:7) {  [Symbol(mongoErrorContextSymbol)]: {}}]
  Reservation Func Tests
stdout: MongoDB shell version v4.2.8
connecting to: mongodb://localhost:27017/wise_dev?compressors=disabled&amp;gssapiServiceName=mongodb
Implicit session: session { &quot;id&quot; : UUID(&quot;88f5d91b-b9d9-4eec-a554-4c23c8435cbe&quot;) }
MongoDB server version: 4.2.8

stderr: 
    POST Valid
2020-06-30T18:57:50.666Z - <font color="#4E9A06">info</font>: MongoDB connected
(node:133341) DeprecationWarning: req.validationErrors() may be removed in a future version. Use req.getValidationResult() instead.
2020-06-30T18:57:52.966Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:53.210Z [de46baa4-de8c-4b5a-8e95-21345e8f64bc] PUT /task 200 - 7715.422 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.656Z [02838274-77bb-4bd9-878a-d8bd0d933b16] POST /reservations/timeslots 200 - 1404.004 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.685Z [5ea0be33-d363-4cc2-927c-10aa702cb6c5] DELETE /task/10de59d7-c2a8-48e6-9895-b2f6838e57f5 200 - 23.343 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> 200 for valid 2 Windows for 1 Date</font><font color="#CC0000"> (9290ms)</font>
2020-06-30T18:57:54.695Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:57:54.735Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:54.744Z [73168b24-436b-4562-9374-b5aa86330213] PUT /task 200 - 47.507 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.780Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:54.789Z [8f4bbe30-6d73-4148-b128-06714fd760fd] PUT /task 200 - 37.884 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.820Z [79ca34ba-ac05-402a-beed-aa4cc7faa199] POST /reservations/timeslots 200 - 26.368 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.833Z [3208d86a-2961-4eaf-9f52-c4081898b546] DELETE /task/31fb3806-bcc5-4911-8fbc-5ff74d168146 200 - 10.139 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.836Z [ed7034b0-6824-442a-ba5a-2ebc6e963b76] DELETE /task/1218bc1c-25f8-4c58-b978-406e321ba672 200 - 10.561 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.837Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
    <font color="#4E9A06">  ✓</font><font color="#555753"> 200 for valid 2 Windows for 2 Dates</font><font color="#CC0000"> (148ms)</font>
2020-06-30T18:57:54.838Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
    POST Static Error
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code when request is empty</font>
2020-06-30T18:57:54.843Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:46365, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=2, connection=close
2020-06-30T18:57:54.845Z [883f6dfa-af35-41cb-8815-d235a021fff5] POST /reservations/timeslots 401 - 2.907 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 1)
(node:133341) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code when deliveryLocation is invalid</font>
2020-06-30T18:57:54.852Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:42485, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=255, connection=close
2020-06-30T18:57:54.853Z [ca44935f-e9d7-490e-96f0-6db1c5975430] POST /reservations/timeslots 401 - 0.620 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 2)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request with bad formatted serviceTime</font>
2020-06-30T18:57:54.857Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:38523, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=277, connection=close
2020-06-30T18:57:54.857Z [95edfdcb-6cec-4ef8-85d6-820956ce6530] POST /reservations/timeslots 401 - 0.651 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 3)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request with no serviceTime field</font>
2020-06-30T18:57:54.861Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:45777, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=261, connection=close
2020-06-30T18:57:54.861Z [e71206e1-9645-4349-919f-bf3f342b6df7] POST /reservations/timeslots 401 - 0.577 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 4)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request without slotsPerWindow field</font>
2020-06-30T18:57:54.865Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:45171, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=267, connection=close
2020-06-30T18:57:54.865Z [082d3e82-5d85-439f-9776-c6f4b09955fc] POST /reservations/timeslots 401 - 0.633 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 5)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request without windows field</font>
2020-06-30T18:57:54.869Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:42675, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=182, connection=close
2020-06-30T18:57:54.869Z [e27c014a-cdce-4c25-848c-590b6ce64456] POST /reservations/timeslots 401 - 0.578 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 6)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request without invalid windows format</font>
2020-06-30T18:57:54.873Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:33825, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=264, connection=close
2020-06-30T18:57:54.874Z [b7a88dbf-360c-4db5-809a-da37763dd70b] POST /reservations/timeslots 401 - 0.689 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with request with overlapping windows</font>
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 7)
2020-06-30T18:57:54.878Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:37991, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=334, connection=close
2020-06-30T18:57:54.879Z [bf5ed1d5-f5c0-4a74-aac3-b3a4d941f867] POST /reservations/timeslots 401 - 0.653 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 8)
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail and return 422 code with etaPadding field invalid</font>
2020-06-30T18:57:54.882Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for POST /reservations/timeslots host=127.0.0.1:35241, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Bearer, content-type=application/json, content-length=261, connection=close
2020-06-30T18:57:54.883Z [87a7936a-33f8-40a8-a96f-e340fdb5d6c3] POST /reservations/timeslots 401 - 0.550 ms [anonymous]
(node:133341) UnhandledPromiseRejectionWarning: AssertionError: expected 401 to be 422
    at Assertion.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:275:17)
    at Assertion.value (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/should/cjs/should.js:356:19)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/util/reservationTestUtil.js:1:20419
    at processTicksAndRejections (internal/process/task_queues.js:97:5)
(node:133341) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). To terminate the node process on unhandled promise rejection, use the CLI flag `--unhandled-rejections=strict` (see https://nodejs.org/api/cli.html#cli_unhandled_rejections_mode). (rejection id: 9)
    POST Dynamic Error
2020-06-30T18:57:54.916Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:54.925Z [184acba0-0919-4e85-be11-fad9d2ad4c09] PUT /task 200 - 37.788 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.940Z - <font color="#C4A000">warn</font>: [7f13b167-3369-4796-8c26-e7b3e8e49e05] Request failed: No route plan present for at least one date {  url: &apos;/reservations/timeslots&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;windows&quot;:[{&quot;start&quot;:&quot;2020-06-30T15:00:00.000Z&quot;,&quot;end&quot;:&quot;2020-06-30T15:59:59.000Z&quot;}],&quot;etaPadding&quot;:&quot;PT10M&quot;,&quot;slotsPerWindow&quot;:1,&quot;deliveryLocation&quot;:{&quot;name&quot;:&quot;TestLocation&quot;,&quot;addressLine1&quot;:&quot;55 Fruit St&quot;,&quot;city&quot;:&quot;Boston&quot;,&quot;state&quot;:&quot;MA&quot;,&quot;zipcode&quot;:&quot;02114&quot;},&quot;serviceTime&quot;:&quot;PT10M&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No route plan present for at least one date, stack=Error: No route plan present for at least one date
    at Object.validateRoutePlan (/home/lkoemmpel/Documents/wise-systems/wise-api/server/mixins/reservation/validation.js:59:260)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/reservationLogic.js:76:435
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=2
2020-06-30T18:57:54.942Z [7f13b167-3369-4796-8c26-e7b3e8e49e05] POST /reservations/timeslots 404 - 13.927 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:54.952Z [e70cadaf-7969-435b-8d2c-72a537c24494] DELETE /task/e8bd58e7-fd28-4d6f-9ee7-2035aca30661 200 - 7.031 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> 404 when RoutePlan doesn&apos;t exist</font><font color="#C4A000"> (69ms)</font>
2020-06-30T18:57:54.954Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:57:55.010Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:55.020Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:57:55.028Z [7bb38d04-5be4-4ac9-ac48-ae87bbcc9d99] PUT /task 200 - 69.278 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.036Z [bdc6024a-a899-45e7-bd94-eb2ab57c60cb] PUT /task 200 - 74.617 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.052Z - <font color="#C4A000">warn</font>: [a3b03f6e-9831-4283-886d-146e88b13727] Request failed: Route plan(s) don&apos;t contain all tasks {  url: &apos;/reservations/timeslots&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;windows&quot;:[{&quot;start&quot;:&quot;2020-06-30T15:00:00.000Z&quot;,&quot;end&quot;:&quot;2020-06-30T15:59:59.000Z&quot;}],&quot;etaPadding&quot;:&quot;PT10M&quot;,&quot;slotsPerWindow&quot;:1,&quot;deliveryLocation&quot;:{&quot;name&quot;:&quot;TestLocation&quot;,&quot;addressLine1&quot;:&quot;55 Fruit St&quot;,&quot;city&quot;:&quot;Boston&quot;,&quot;state&quot;:&quot;MA&quot;,&quot;zipcode&quot;:&quot;02114&quot;},&quot;serviceTime&quot;:&quot;PT10M&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=Route plan(s) don&apos;t contain all tasks, stack=Error: Route plan(s) don&apos;t contain all tasks
    at Object.validateRoutePlan (/home/lkoemmpel/Documents/wise-systems/wise-api/server/mixins/reservation/validation.js:59:489)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/reservationLogic.js:76:435
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:57:55.052Z [a3b03f6e-9831-4283-886d-146e88b13727] POST /reservations/timeslots 422 - 11.325 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.068Z [974bc878-135d-4792-9830-8e0012b253b3] DELETE /task/221535b8-5b34-457e-94e5-1ff2fcf79ed2 200 - 10.397 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.070Z [972aeca4-d8b2-426d-a3b5-dd3f37012b9f] DELETE /task/97a024d0-dfa2-4db4-8e27-469b4cdb1420 200 - 10.517 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.071Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:57:55.072Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
    <font color="#4E9A06">  ✓</font><font color="#555753"> 422 when RoutePlan doesn&apos;t contain all tasks</font><font color="#CC0000"> (117ms)</font>

  Address Handler with authorization
    GET
2020-06-30T18:57:55.081Z - <font color="#C4A000">warn</font>: [6f174aee-05ea-4eee-859a-4fe10f766f00] Request failed:  {  url: &apos;/address&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:57:55.082Z [6f174aee-05ea-4eee-859a-4fe10f766f00] GET /address 422 - 5.355 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no id provided</font>
    POST
2020-06-30T18:57:55.104Z [e5fba469-61a3-4740-b596-ab3b6db3dfcb] POST /address 200 - 12.921 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.117Z [c266b4fc-07b8-492a-a6ae-74dc4912cfd4] GET /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 10.533 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new address to system</font>
2020-06-30T18:57:55.138Z [c32c0876-706c-4831-9700-2606a2ed660d] POST /address 200 - 10.144 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new address with geocoding</font>
2020-06-30T18:57:55.147Z - <font color="#C4A000">warn</font>: [1fd215bb-56d2-451e-a4b6-d0727f10a69f] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;name&quot;:&quot;WISE BOSTON&quot;,&quot;addressLine1&quot;:&quot;101 Main Street&quot;,&quot;addressLine2&quot;:&quot;Suite 616&quot;,&quot;city&quot;:&quot;Cambridge&quot;,&quot;state&quot;:&quot;MA&quot;,&quot;zipcode&quot;:&quot;02138&quot;,&quot;country&quot;:&quot;USA&quot;,&quot;client&quot;:&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.148Z [1fd215bb-56d2-451e-a4b6-d0727f10a69f] POST /address 422 - 5.651 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add address with coordinates out of range</font>
2020-06-30T18:57:55.156Z - <font color="#C4A000">warn</font>: [108c363f-9ca0-46c2-a5ee-56878d2b6aa8] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;name&quot;:&quot;WISE BOSTON&quot;,&quot;addressLine1&quot;:&quot;101 Main Street&quot;,&quot;addressLine2&quot;:&quot;Suite 616&quot;,&quot;city&quot;:&quot;Cambridge&quot;,&quot;state&quot;:&quot;MA&quot;,&quot;zipcode&quot;:&quot;02138&quot;,&quot;country&quot;:&quot;USA&quot;,&quot;client&quot;:&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.157Z [108c363f-9ca0-46c2-a5ee-56878d2b6aa8] POST /address 422 - 4.169 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add address with non-number coordinates</font>
2020-06-30T18:57:55.164Z - <font color="#C4A000">warn</font>: [00202949-f39b-4afc-8fad-072890917208] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;name&quot;:&quot;WISE BOSTON&quot;,&quot;addressLine1&quot;:&quot;101 Main Street&quot;,&quot;addressLine2&quot;:&quot;Suite 616&quot;,&quot;city&quot;:&quot;Cambridge&quot;,&quot;state&quot;:&quot;MA&quot;,&quot;zipcode&quot;:&quot;02138&quot;,&quot;country&quot;:&quot;USA&quot;,&quot;client&quot;:&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.165Z [00202949-f39b-4afc-8fad-072890917208] POST /address 422 - 4.388 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add address with incomplete coordinates</font>
    PUT
2020-06-30T18:57:55.184Z - <font color="#4E9A06">info</font>: Updating 1 assignments referencing address 1e07a3f7-d2f0-4aee-b635-65d586b2081f
2020-06-30T18:57:55.187Z [a9d674da-3c40-48fd-92a1-2db80bba400f] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 15.426 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.195Z [4b8b6772-7772-4336-8cb9-20268d99849d] GET /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 5.406 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update existing address with geocoding</font>
2020-06-30T18:57:55.207Z - <font color="#4E9A06">info</font>: Updating 1 assignments referencing address 1e07a3f7-d2f0-4aee-b635-65d586b2081f
2020-06-30T18:57:55.209Z [dd58c525-897f-4c16-b1d1-e469c8df165c] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 7.794 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.217Z [6e926c66-9bed-44d8-b0ba-231efdc5458e] GET /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 5.743 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update address location coordinates</font>
2020-06-30T18:57:55.231Z - <font color="#4E9A06">info</font>: Updating 1 assignments referencing address 1e07a3f7-d2f0-4aee-b635-65d586b2081f
2020-06-30T18:57:55.232Z - <font color="#C4A000">warn</font>: Failed to update assignment someId status in 5c087850-2a99-11e5-9189-eb07c479dfd5 with {  id: &apos;someId&apos;,  driver: &apos;driverId&apos;,  location: { lat: 43.999, lng: -72.999 },  props: {}} status=4, message=Assignment not found
2020-06-30T18:57:55.233Z [5457eaf6-cb44-436c-a384-d41ccff8b372] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 9.853 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.255Z [d1da01f7-eacf-41d5-875f-07ea6a085fd3] GET /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 15.461 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update address location coordinates if assignment is complete</font>
2020-06-30T18:57:55.265Z - <font color="#C4A000">warn</font>: [90388398-12e2-4995-b6b0-998b3a3c1ed0] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address/1e07a3f7-d2f0-4aee-b635-65d586b2081f&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:1000,&quot;lng&quot;:-1000}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.265Z [90388398-12e2-4995-b6b0-998b3a3c1ed0] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 422 - 5.400 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if coordinates are out of range</font>
2020-06-30T18:57:55.273Z - <font color="#C4A000">warn</font>: [4cdedfd5-4317-4668-abef-b0f52e190ec3] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address/1e07a3f7-d2f0-4aee-b635-65d586b2081f&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:&quot;10.0&quot;,&quot;lng&quot;:&quot;-10.0&quot;}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.274Z [4cdedfd5-4317-4668-abef-b0f52e190ec3] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 422 - 5.371 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if coordinates are not numbers</font>
2020-06-30T18:57:55.285Z - <font color="#C4A000">warn</font>: [deef6dac-9c4e-4a04-8986-3a481e9739fb] Request failed: Validation failed: location: must have properties lat, lng that are numbers and have values between +-90 and +-180 {  url: &apos;/address/1e07a3f7-d2f0-4aee-b635-65d586b2081f&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;location&quot;:{&quot;lng&quot;:-10}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:57:55.285Z [deef6dac-9c4e-4a04-8986-3a481e9739fb] PUT /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 422 - 8.198 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if coordinates are incomplete</font>
2020-06-30T18:57:55.293Z - <font color="#C4A000">warn</font>: [7878370c-d0c3-4d1e-b699-591f025b5666] Request failed: Failed to find address {  url: &apos;/address/27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;city&quot;:&quot;Dullsville&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Failed to find address
2020-06-30T18:57:55.293Z [7878370c-d0c3-4d1e-b699-591f025b5666] PUT /address/27331fd8-2b00-11e5-b345-feff819cdc9f 404 - 4.412 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if address doesn&apos;t exist</font>
2020-06-30T18:57:55.302Z - <font color="#C4A000">warn</font>: [b17ab879-1629-4cec-9aa4-e374acef58e8] Request failed: Failed to find address {  url: &apos;/address/27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;lat&quot;:42.999,&quot;lng&quot;:-71.999}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Failed to find address
2020-06-30T18:57:55.303Z [b17ab879-1629-4cec-9aa4-e374acef58e8] PUT /address/27331fd8-2b00-11e5-b345-feff819cdc9f 404 - 7.157 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if address doesn&apos;t exist - coordinates</font>
    PATCH
2020-06-30T18:57:55.313Z [d964d2d0-8554-499d-8083-f8f6f1ef8d2b] PATCH /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 5.432 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.338Z [ec59e075-041f-4bb8-b165-30336252711f] GET /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 22.748 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add parking location to existing address</font>
    DELETE
2020-06-30T18:57:55.355Z [502d5db2-f4e6-4585-8abf-9bb24655344b] DELETE /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 13.759 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.370Z [1ed7b86f-9991-4d57-b4df-09bc4c60db07] DELETE /address/1e07a3f7-d2f0-4aee-b635-65d586b2081f 200 - 12.337 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the address from the database</font>
2020-06-30T18:57:55.388Z [55c6c58d-869a-45dd-ba55-5e837068d8a6] DELETE /address/15e34b99-401c-4471-9055-5691d9d933b8 200 - 14.901 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the address from the database</font>
2020-06-30T18:57:55.399Z - <font color="#C4A000">warn</font>: [e6fcac7a-2a41-45d1-b9cc-76a2730087ab] Request failed: Can&apos;t delete - address is in use {  url: &apos;/address/ecbc20c0-3de7-11e5-8b33-853f5f93eb82&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Can&apos;t delete - address is in use
2020-06-30T18:57:55.399Z [e6fcac7a-2a41-45d1-b9cc-76a2730087ab] DELETE /address/ecbc20c0-3de7-11e5-8b33-853f5f93eb82 422 - 9.107 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not remove address if in use by client</font>
2020-06-30T18:57:55.411Z - <font color="#C4A000">warn</font>: [c727017c-eb31-4177-9ee0-1849f6742ad6] Request failed: Can&apos;t delete - address is in use {  url: &apos;/address/07621e79-b318-4c14-a97e-909b36eb0258&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Can&apos;t delete - address is in use
2020-06-30T18:57:55.411Z [c727017c-eb31-4177-9ee0-1849f6742ad6] DELETE /address/07621e79-b318-4c14-a97e-909b36eb0258 422 - 9.447 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not remove address if in use by another client</font>

  Address Handler as anonymous
    DELETE
2020-06-30T18:57:55.416Z - <font color="#C4A000">warn</font>: [3a8ca0fa-148c-43a2-81d0-5bf0ac75af52] Request failed:  {  url: &apos;/address/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:57:55.416Z [3a8ca0fa-148c-43a2-81d0-5bf0ac75af52] DELETE /address/testId 403 - 1.003 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Address Handler as driver
    DELETE
2020-06-30T18:57:55.421Z - <font color="#C4A000">warn</font>: [0f8f2bc0-fcdf-453f-b7a1-3a5c39fd06d1] Request failed:  {  url: &apos;/address/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:57:55.422Z [0f8f2bc0-fcdf-453f-b7a1-3a5c39fd06d1] DELETE /address/testId 403 - 1.307 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Addresses Handler as admin
    GET
2020-06-30T18:57:55.441Z [558f39e1-9188-4191-bb34-7480950a8d38] GET /addresses 200 - 16.499 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all addresses</font>
2020-06-30T18:57:55.466Z [116a70a6-2411-4936-96a7-46f684b3a8f6] GET /addresses?extent=customer,client 200 - 20.471 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all addresses with comma-separated extents</font>
2020-06-30T18:57:55.495Z [f9bc04fa-1c0e-4bc3-907e-393cd2a02e25] GET /addresses?&amp;extent=customer&amp;extent=client 200 - 24.658 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all addresses with multiple extents</font>
2020-06-30T18:57:55.507Z [f955789d-9b20-46cc-a4a6-61e51ef55abe] GET /addresses?limit=100 200 - 8.627 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve up to 100 addresses</font>
    POST
2020-06-30T18:57:55.514Z - <font color="#C4A000">warn</font>: [39249657-0ac3-4540-9ac5-36f41b82307e] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.514Z [39249657-0ac3-4540-9ac5-36f41b82307e] POST /addresses 405 - 4.168 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:57:55.527Z - <font color="#C4A000">warn</font>: [ab75b234-810b-4e04-8461-9790e26faeb0] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.528Z [ab75b234-810b-4e04-8461-9790e26faeb0] PUT /addresses 405 - 9.811 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PATCH
2020-06-30T18:57:55.536Z - <font color="#C4A000">warn</font>: [2dae5d81-45e7-47ba-bb7e-5774f6eb41fc] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.536Z [2dae5d81-45e7-47ba-bb7e-5774f6eb41fc] PATCH /addresses 405 - 4.316 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    DELETE
2020-06-30T18:57:55.544Z - <font color="#C4A000">warn</font>: [b385bbe5-d9e8-4026-8844-583313a317bb] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.544Z [b385bbe5-d9e8-4026-8844-583313a317bb] DELETE /addresses 405 - 4.448 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>

  Addresses Handler as driver
    POST
2020-06-30T18:57:55.550Z - <font color="#C4A000">warn</font>: [b0aff7ee-429e-44e9-98f8-bdd523edaf10] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:57:55.551Z [b0aff7ee-429e-44e9-98f8-bdd523edaf10] GET /addresses 403 - 1.662 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Addresses Handler as anonymous
    POST
2020-06-30T18:57:55.556Z - <font color="#C4A000">warn</font>: [99390af1-cce7-4746-860d-627893de0305] Request failed:  {  url: &apos;/addresses&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:57:55.556Z [99390af1-cce7-4746-860d-627893de0305] GET /addresses 403 - 1.155 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Admin Handler with authorization
    GET
2020-06-30T18:57:55.567Z - <font color="#C4A000">warn</font>: [d6ac7542-b38f-4937-b166-7daf0ece256a] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.567Z [d6ac7542-b38f-4937-b166-7daf0ece256a] GET /admin 405 - 5.298 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:57:55.580Z - <font color="#C4A000">warn</font>: [deb8e15a-2e0a-400f-9d4d-bff259756cf7] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.580Z [deb8e15a-2e0a-400f-9d4d-bff259756cf7] PUT /admin 405 - 9.705 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PATCH
2020-06-30T18:57:55.600Z - <font color="#C4A000">warn</font>: [bef5e3e6-8951-4b8f-ad52-42321f3f3f64] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.601Z [bef5e3e6-8951-4b8f-ad52-42321f3f3f64] PATCH /admin 405 - 6.334 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    DELETE
2020-06-30T18:57:55.607Z - <font color="#C4A000">warn</font>: [2d955c34-1d74-4d6f-a5df-f6915b175d6d] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:57:55.608Z [2d955c34-1d74-4d6f-a5df-f6915b175d6d] DELETE /admin 405 - 4.136 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    POST
2020-06-30T18:57:55.757Z [3b8309b2-36cd-4295-b8fd-eedc8d15ddc0] POST /driver 200 - 143.736 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:57:55.766Z - <font color="#C4A000">warn</font>: [ace594ce-e6c2-46ae-a0dc-f6e7aae1377e] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:57:55.767Z [ace594ce-e6c2-46ae-a0dc-f6e7aae1377e] POST /admin 422 - 6.950 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if action param is not provided</font>
2020-06-30T18:57:55.784Z - <font color="#C4A000">warn</font>: [c7be1d7c-9bef-4b20-a7f6-fe7e1346c557] Request failed: No File Uploaded {  url: &apos;/admin?action=upload_schedule_file&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=No File Uploaded
2020-06-30T18:57:55.784Z [c7be1d7c-9bef-4b20-a7f6-fe7e1346c557] POST /admin?action=upload_schedule_file 422 - 9.823 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with error if no file provided</font>
2020-06-30T18:57:55.812Z - <font color="#4E9A06">info</font>: Created directory /tmp/wise
2020-06-30T18:57:55.823Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.upload.msg
2020-06-30T18:57:55.831Z [108ea9ee-e332-41da-83b4-6230958466b1] POST /admin?action=upload_schedule_file&amp;staticIds=100,101,102 200 - 14.100 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should pass correct arguments to child process</font><font color="#C4A000"> (46ms)</font>
2020-06-30T18:57:55.870Z - <font color="#4E9A06">info</font>: Upload succeeded with undefined / undefined tasks scheduled
2020-06-30T18:57:55.871Z [dc42f306-56fe-42b2-92ae-a8de7f413436] POST /admin?action=upload_schedule_file 200 - 22.476 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should send task.bulk.created message on success</font><font color="#C4A000"> (44ms)</font>
2020-06-30T18:57:55.879Z - <font color="#4E9A06">info</font>: uploadResults Success - File Uploaded + Processed + Tasks Created + History Saved {&quot;upload&quot;:&quot;Passed&quot;,&quot;directory&quot;:&quot;/tmp/wise&quot;,&quot;file&quot;:&quot;file_dc42f306-56fe-42b2-92ae-a8de7f413436_WISE_Schedule.xls&quot;,&quot;originalname&quot;:&quot;WISE_Schedule.xls&quot;,&quot;owner&quot;:&quot;27331fd8-2b00-11e5-b345-feff819cdc9f&quot;,&quot;createdAt&quot;:&quot;2020-06-30T18:57:55.871Z&quot;,&quot;id&quot;:&quot;7fc067ae-7d7e-4736-94c0-afcd6ddcba1e&quot;}
2020-06-30T18:57:55.879Z - <font color="#4E9A06">info</font>: Upload Passed for Client : 5c087850-2a99-11e5-9189-eb07c479dfd5
(node:133341) Warning: Setting the NODE_TLS_REJECT_UNAUTHORIZED environment variable to &apos;0&apos; makes TLS connections and HTTPS requests insecure by disabling certificate verification.
2020-06-30T18:57:55.933Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.upload.msg
2020-06-30T18:57:55.934Z - <font color="#CC0000">error</font>: [634354e3-a2ee-4cb6-a119-b1f972e38fec] Request failed: Database error {  url: &apos;/admin?action=upload_schedule_file&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=Database error, stack=Error: Database error
    at Context.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/adminFuncTest.js:5:255)
    at callFn (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runnable.js:387:21)
    at Test.Runnable.run (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runnable.js:379:7)
    at Runner.runTest (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:535:10)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:653:12
    at next (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:447:14)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:457:7
    at next (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:362:14)
    at Immediate.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/jenkins-mocha/node_modules/mocha/lib/runner.js:425:5)
    at processImmediate (internal/timers.js:456:21)
    at process.topLevelDomainCallback (domain.js:137:15)
2020-06-30T18:57:55.934Z [634354e3-a2ee-4cb6-a119-b1f972e38fec] POST /admin?action=upload_schedule_file 500 - 8.605 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with error if unexpected failure occurs</font>
2020-06-30T18:57:55.954Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.upload.msg
2020-06-30T18:57:55.955Z [864af419-ddea-4dbe-9269-7cd644ae02cc] POST /admin?action=upload_schedule_file&amp;timezone=America/New_York 200 - 12.537 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should pass correct arguments to child process with params.timezone</font>
2020-06-30T18:57:55.972Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.upload.msg
2020-06-30T18:57:55.973Z [a0a31d42-7827-4358-9eb4-3683660e27dc] POST /admin?action=upload_schedule_file 200 - 4.771 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should pass correct arguments to child process with body.timezone</font>
2020-06-30T18:57:55.989Z [3dc4284b-acfd-415d-b6d5-88214bd62f4f] POST /admin?action=export_order_integration_file 200 - 7.720 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should pass correct arguments to order integration child process for a single date</font>
2020-06-30T18:57:56.004Z [0a4705ac-69f4-42c6-8d3e-e664a06e10b2] POST /admin?action=export_order_integration_file 200 - 6.370 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should accept multiple dates for export_order_integration_file</font>
2020-06-30T18:57:56.018Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.upload.msg
2020-06-30T18:57:56.025Z [5f252f6c-c769-4683-9caf-4cb47704aecd] POST /admin?action=upload_driver_file 200 - 10.688 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should pass correct arguments to driver schedules child process</font>
2020-06-30T18:57:56.044Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:57:56.050Z - <font color="#4E9A06">info</font>: Deleted 0 tasks
2020-06-30T18:57:56.050Z - <font color="#4E9A06">info</font>: Reset tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:57:56.051Z [9f5fc10f-3b68-41ee-9e3c-4f7ecdb574ad] POST /admin?action=reset_schedule 200 - 22.445 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reset own schedules</font>
2020-06-30T18:57:56.062Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:57:56.064Z - <font color="#4E9A06">info</font>: Deleted 0 tasks
2020-06-30T18:57:56.064Z - <font color="#4E9A06">info</font>: Reset tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:57:56.065Z [d063bd67-ae1a-46e5-80c9-a4b8a998b32d] POST /admin?action=reset_schedule 200 - 8.236 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reset own schedules and ignore drivers without vehicles</font>
2020-06-30T18:57:56.075Z - <font color="#4E9A06">info</font>: Archiving started for 5c087850-2a99-11e5-9189-eb07c479dfd5 on Tue Jun 30 2020 18:57:56 GMT+0000
2020-06-30T18:57:56.075Z [c4aab9d9-4426-45fc-b2a1-28e0f3e8ed0b] POST /admin?action=archive_schedule 200 - 6.188 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should archive own schedules</font>
2020-06-30T18:57:56.083Z - <font color="#4E9A06">info</font>: Skipping archival for client 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:57:56.084Z - <font color="#4E9A06">info</font>: Archiving complete for 5c087850-2a99-11e5-9189-eb07c479dfd5 on Tue Jun 30 2020 18:57:56 GMT+0000
2020-06-30T18:57:56.088Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:57:56.089Z - <font color="#4E9A06">info</font>: Deleted 0 tasks
2020-06-30T18:57:56.089Z - <font color="#4E9A06">info</font>: Reset all: tasks + assignments have been removed for 5c087850-2a99-11e5-9189-eb07c479dfd5
    <font color="#CC0000">  2) should reset all</font>
      Third party trigger
2020-06-30T18:58:11.111Z - <font color="#4E9A06">info</font>: Lambda triggered: clientID: 5c087850-2a99-11e5-9189-eb07c479dfd5 environment: default type: upload
2020-06-30T18:58:11.111Z [1a5f58a7-9128-4cad-b961-52c1fae16014] POST /admin?action=upload_third_party_file 200 - 12.909 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with success &amp; post sns message with type of upload</font>
2020-06-30T18:58:11.115Z - <font color="#4E9A06">info</font>: Lambda triggered: clientID: 5c087850-2a99-11e5-9189-eb07c479dfd5 environment: default type: upload
2020-06-30T18:58:11.115Z [4ca925db-40cc-4949-ae70-7ff1bb05f8af] POST /admin?action=upload_third_party_file 200 - 2.133 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with success &amp; post sns message with type of upload and include staticIds</font>
      <font color="#CC0000">  3) should respond with success &amp; post sns message with type of export</font>
2020-06-30T18:58:26.136Z - <font color="#4E9A06">info</font>: Lambda triggered: clientID: 5c087850-2a99-11e5-9189-eb07c479dfd5 environment: default type: upload
2020-06-30T18:58:26.136Z [5dcd7c8d-64f0-41f9-83bc-1af1c7d9ed16] POST /admin?action=upload_third_party_file 200 - 11.427 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with success &amp; post sns message with type of upload without staticIds if not a string</font>
      <font color="#CC0000">  4) should respond with error when sns fails</font>
2020-06-30T18:58:26.156Z - <font color="#C4A000">warn</font>: [9cf3ec50-bd49-4781-b26f-6b3d7cbe9e63] Request failed: Expecting an array of dates {  url: &apos;/admin?action=upload_third_party_file&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=Expecting an array of dates
2020-06-30T18:58:26.157Z [9cf3ec50-bd49-4781-b26f-6b3d7cbe9e63] POST /admin?action=upload_third_party_file 422 - 4.567 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with error if no dates are provided</font>
2020-06-30T18:58:26.164Z - <font color="#C4A000">warn</font>: [d2a3e5d5-7962-4b95-99da-5c29faf32d60] Request failed: Expecting an array of dates {  url: &apos;/admin?action=export_third_party_route&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;dates&quot;:&quot;2019-07-19, 2019-07-20, 2019-07-21&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=Expecting an array of dates
2020-06-30T18:58:26.164Z [d2a3e5d5-7962-4b95-99da-5c29faf32d60] POST /admin?action=export_third_party_route 422 - 3.172 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should respond with error if dates are not an array</font>

  Admin Handler as user
    POST
2020-06-30T18:58:26.169Z - <font color="#C4A000">warn</font>: [d55d831c-73a0-4beb-b16a-0062a85c8163] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:26.170Z [d55d831c-73a0-4beb-b16a-0062a85c8163] POST /admin 403 - 1.087 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Admin Handler as anonymous
    POST
2020-06-30T18:58:26.173Z - <font color="#C4A000">warn</font>: [ef8586b8-7dbf-4fb8-a2a6-d27eb239d480] Request failed:  {  url: &apos;/admin&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:26.173Z [ef8586b8-7dbf-4fb8-a2a6-d27eb239d480] POST /admin 403 - 0.705 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Admin Handler as Wise Admin
2020-06-30T18:58:26.176Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /admin?action=archive_schedule! host=127.0.0.1:46463, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:26.177Z - <font color="#4E9A06">info</font>: Archiving started for ALL on Tue Jun 30 2020 18:58:26 GMT+0000
2020-06-30T18:58:26.178Z [9740374c-b4d0-4e38-a679-73798ed324a0] POST /admin?action=archive_schedule 200 - 1.824 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
  <font color="#4E9A06">  ✓</font><font color="#555753"> should archive all schedules</font>
2020-06-30T18:58:26.180Z - <font color="#4E9A06">info</font>: Skipping archival for client c8d01b88-b330-4b51-9384-e8e5c967ab18
2020-06-30T18:58:26.180Z - <font color="#4E9A06">info</font>: Skipping archival for client 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:26.180Z - <font color="#4E9A06">info</font>: Archiving complete for ALL on Tue Jun 30 2020 18:58:26 GMT+0000

  Analytics Handler with authorization
    GET
2020-06-30T18:58:26.185Z - <font color="#C4A000">warn</font>: [0163413b-ad28-428e-b9f1-d858343e2e28] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:26.185Z [0163413b-ad28-428e-b9f1-d858343e2e28] GET /analytics 405 - 2.962 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
2020-06-30T18:58:26.192Z [43c8455f-c885-44f0-b4b4-6bd9970478da] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=all 200 - 3.611 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = all ]</font>
2020-06-30T18:58:26.197Z - <font color="#C4A000">warn</font>: [88da7a14-0367-4478-bd60-987140155c67] Request failed:  {  url: &apos;/analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=all&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:26.198Z [88da7a14-0367-4478-bd60-987140155c67] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=all 404 - 3.109 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no customer agg report</font>
2020-06-30T18:58:26.204Z [9f581d31-dae8-4a35-a3e5-143dfb2f5711] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=recent 200 - 3.471 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = recent ]</font>
2020-06-30T18:58:26.210Z [e4de4be0-ef1c-4f74-8df0-38fbfe343c4e] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=week 200 - 3.171 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = week ]</font>
2020-06-30T18:58:26.219Z [4f79776e-2494-4af9-a1b3-95b24cd71190] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=month 200 - 5.783 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = month ]</font>
2020-06-30T18:58:26.224Z [e65e043b-cc54-48f5-85cf-ba2a95577322] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=multi 200 - 2.958 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = multi ]</font>
2020-06-30T18:58:26.232Z [8655fb2a-a7cf-45bd-9414-64e3d767d342] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=range&amp;start=2016-06-10&amp;stop=2016-10-21 200 - 4.358 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return customer json [ type = range ]</font>
2020-06-30T18:58:26.242Z - <font color="#C4A000">warn</font>: [7389ec5a-0bfd-4fa1-bc78-2a555e20d6b1] Request failed:  {  url: &apos;/analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=range&amp;start=2016-06-10&amp;stop=2016-10-21&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:26.242Z [7389ec5a-0bfd-4fa1-bc78-2a555e20d6b1] GET /analytics/customer/02fcacb0-4a74-4b76-9a1b-009c3677d53b/report?type=range&amp;start=2016-06-10&amp;stop=2016-10-21 404 - 8.032 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no customer range report</font>
2020-06-30T18:58:26.252Z [db992558-8306-4ac1-883f-b63496aca721] GET /analytics/drivers 200 - 5.880 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return client fleet agg json</font>
2020-06-30T18:58:26.260Z - <font color="#C4A000">warn</font>: [7db5328c-e186-4d8d-8676-cd8ce888a9c5] Request failed:  {  url: &apos;/analytics/drivers&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:26.260Z [7db5328c-e186-4d8d-8676-cd8ce888a9c5] GET /analytics/drivers 404 - 5.203 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no client fleet agg report</font>
2020-06-30T18:58:26.270Z [b7d17ce0-68f1-45aa-b029-5eb0406d3ef4] GET /analytics/drivers?action=download 200 - 6.723 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return download url for fleet report xlsx</font>
2020-06-30T18:58:26.281Z - <font color="#C4A000">warn</font>: [468908b4-36c5-40ae-95ca-2ece7d575064] Request failed:  {  url: &apos;/analytics/drivers?action=download&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:26.281Z [468908b4-36c5-40ae-95ca-2ece7d575064] GET /analytics/drivers?action=download 422 - 9.321 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no fleet report</font>
2020-06-30T18:58:26.290Z [88bd6d57-660e-44d3-b40f-7484fdc78d0e] GET /analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e 200 - 5.368 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return individual driver json</font>
2020-06-30T18:58:26.295Z - <font color="#C4A000">warn</font>: [f9f558cd-4111-41bb-a774-7bfb074f12bc] Request failed:  {  url: &apos;/analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:26.295Z [f9f558cd-4111-41bb-a774-7bfb074f12bc] GET /analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e 404 - 3.079 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if wrong driver</font>
2020-06-30T18:58:26.304Z [445e6e43-ad8c-4284-9768-8beec94bab39] GET /analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e?action=download 200 - 3.811 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return individual driver available downloads</font>
2020-06-30T18:58:26.312Z - <font color="#C4A000">warn</font>: [901b81bf-22c6-44e0-8c94-286fccebd0fa] Request failed:  {  url: &apos;/analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e?action=download&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:26.313Z [901b81bf-22c6-44e0-8c94-286fccebd0fa] GET /analytics/driver/01393d20-5d64-11e6-8257-1910b1fdd40e?action=download 422 - 6.681 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no driver available downloads</font>
    POST
2020-06-30T18:58:26.322Z - <font color="#C4A000">warn</font>: [d017d07d-b07b-4c00-af78-2eb2c35a81b8] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:26.322Z [d017d07d-b07b-4c00-af78-2eb2c35a81b8] POST /analytics 405 - 5.768 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:58:26.327Z - <font color="#C4A000">warn</font>: [4e3eae86-06b6-4b20-942d-ba17ca2cc8e8] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:26.327Z [4e3eae86-06b6-4b20-942d-ba17ca2cc8e8] PUT /analytics 405 - 2.647 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PATCH
2020-06-30T18:58:26.333Z - <font color="#C4A000">warn</font>: [1aed53f3-cbbc-4d47-a000-97d3ddd9dd34] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:26.333Z [1aed53f3-cbbc-4d47-a000-97d3ddd9dd34] PATCH /analytics 405 - 2.537 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    DELETE
2020-06-30T18:58:26.337Z - <font color="#C4A000">warn</font>: [b273517c-5754-4725-95d3-498943138e58] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:26.338Z [b273517c-5754-4725-95d3-498943138e58] DELETE /analytics 405 - 2.361 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>

  Analytics Handler as driver
    GET
2020-06-30T18:58:26.342Z - <font color="#C4A000">warn</font>: [237b159d-b891-48bb-9e72-a3957a8733c9] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:26.343Z [237b159d-b891-48bb-9e72-a3957a8733c9] GET /analytics 403 - 0.740 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Analytics Handler as anonymous
    GET
2020-06-30T18:58:26.345Z - <font color="#C4A000">warn</font>: [f83acba2-9c3e-4b58-8d57-8d2a81d30e12] Request failed:  {  url: &apos;/analytics&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:26.345Z [f83acba2-9c3e-4b58-8d57-8d2a81d30e12] GET /analytics 403 - 0.584 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Assignment Handler
2020-06-30T18:58:26.353Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:58:26.354Z - <font color="#4E9A06">info</font>: Deleted 0 tasks
2020-06-30T18:58:26.354Z - <font color="#4E9A06">info</font>: Reset all: tasks + assignments have been removed for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:26.356Z - <font color="#4E9A06">info</font>: Reset drivers + tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:26.356Z [ddafdb16-c1b9-4a5c-ac40-575626ca329a] POST /admin?action=reset_all 200 - 8.128 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.469Z [20de0981-4d9e-4bb2-bab5-da3a73ea11bf] POST /driver 200 - 104.995 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.488Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:27.492Z [e0675e89-36ab-4dbf-bef8-f21a0ae25634] PUT /task 200 - 21.978 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.493Z - <font color="#4E9A06">info</font>: TaskJson 9c3a5884-24f4-4ba4-a241-5d73a7f55541 saved
2020-06-30T18:58:27.505Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:27.510Z [c742f045-f0e8-499d-afb7-93fc923e4dc6] PUT /task 200 - 16.075 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.510Z - <font color="#4E9A06">info</font>: TaskJson e65e2626-c4aa-4149-bf53-7c2fcc589a10 saved
2020-06-30T18:58:27.526Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:27.532Z [577e2eef-9fa2-49d4-8d61-a456115d36f4] PUT /task 200 - 19.340 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.532Z - <font color="#4E9A06">info</font>: TaskJson 134a9097-a1b7-4c5c-9cc0-d29663991c61 saved
2020-06-30T18:58:27.548Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:27.552Z [06ef05b0-ad54-41c0-b63f-b84278b56d26] PUT /task 200 - 18.292 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.552Z - <font color="#4E9A06">info</font>: TaskJson dae1421b-a85a-4f98-8afc-7955449659eb saved
    GET invalid requests
2020-06-30T18:58:27.557Z - <font color="#C4A000">warn</font>: [68a93282-2d9d-4520-9b8e-91c7b2683dfa] Request failed:  {  url: &apos;/assignment&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:27.557Z [68a93282-2d9d-4520-9b8e-91c7b2683dfa] GET /assignment 422 - 2.540 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no id provided</font>
2020-06-30T18:58:27.562Z - <font color="#C4A000">warn</font>: [03c97d0b-7ea9-46e4-8b23-99f6c8f5e693] Request failed:  {  url: &apos;/assignment/2b1719c0-2286-4a2f-8524-11016cac764d&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:27.562Z [03c97d0b-7ea9-46e4-8b23-99f6c8f5e693] GET /assignment/2b1719c0-2286-4a2f-8524-11016cac764d 404 - 3.133 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return status 404 if not found</font>
    POST as admin
2020-06-30T18:58:27.598Z - <font color="#4E9A06">info</font>: Added assignment 13a4d1b3-b6ff-4484-8075-4cccec85b307
2020-06-30T18:58:27.599Z [7c6669f1-265c-4bb3-809a-46e34417700c] POST /assignment 200 - 32.686 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.606Z - <font color="#3465A4">debug</font>: Send Mobile Tracking Link Expect your wise systems pickup by Jean Luc Picard today. For details visit: http://localhost:8006/?token=dUwu4_e-7sc
2020-06-30T18:58:27.607Z - <font color="#4E9A06">info</font>: Sent email for portal http://localhost:8006/?token=dUwu4_e-7sc { to: [ &apos;dmitry@wisesystems.com&apos;, &apos;dmitry@wisesystems.io&apos; ] } replyTo=, sender=support@wisesystems.com, subject=Wise Systems pickup notification, bodyLine1=Your wise systems pickup is en route., bodyLine2=For additional details and an up-to-date pickup window, visit:, ending=Have a great day!
2020-06-30T18:58:27.608Z - <font color="#4E9A06">info</font>: Notification sent for portal 5efb8b53632e5b08df16f18e
2020-06-30T18:58:27.616Z [78e3d35e-3e36-49a8-b99b-e29bacb07b79] GET /task/9c3a5884-24f4-4ba4-a241-5d73a7f55541 200 - 5.307 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should assign a task ad hoc to a driver without route</font><font color="#CC0000"> (154ms)</font>
2020-06-30T18:58:27.743Z [1ba0935b-ace3-4b6a-8813-e829483801b5] POST /assignment 200 - 17.508 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:27.758Z [bccf0b55-eb96-4356-a05f-a6f12d899935] GET /task/9c3a5884-24f4-4ba4-a241-5d73a7f55541 200 - 7.952 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not modify task status and return success if assigning the same task again</font><font color="#C4A000"> (39ms)</font>
2020-06-30T18:58:27.767Z - <font color="#C4A000">warn</font>: [62b01ec3-809f-4422-9dee-1bf3c77ec3d5] Request failed:  {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;,&quot;driver&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:27.768Z [62b01ec3-809f-4422-9dee-1bf3c77ec3d5] POST /assignment 404 - 5.848 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if driver is not found</font>
2020-06-30T18:58:27.774Z - <font color="#C4A000">warn</font>: [5c94a57d-f42f-405f-bc90-8eafa73d8e37] Request failed: task and driver are required {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=task and driver are required
2020-06-30T18:58:27.774Z [5c94a57d-f42f-405f-bc90-8eafa73d8e37] POST /assignment 422 - 3.687 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if driver is not specified</font>
2020-06-30T18:58:27.782Z - <font color="#C4A000">warn</font>: [0d1116df-5fe6-4eda-a92a-94af488e036d] Request failed: task and driver are required {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=task and driver are required
2020-06-30T18:58:27.782Z [0d1116df-5fe6-4eda-a92a-94af488e036d] POST /assignment 422 - 3.466 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if task is not specified</font>
2020-06-30T18:58:27.788Z - <font color="#C4A000">warn</font>: [f36454f3-083d-42e1-a325-79e7f695fd77] Request failed: deliveryTime must be a Unix timestamp if provided {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;,&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;,&quot;deliveryTime&quot;:&quot;now&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=deliveryTime must be a Unix timestamp if provided
2020-06-30T18:58:27.788Z [f36454f3-083d-42e1-a325-79e7f695fd77] POST /assignment 422 - 3.409 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if deliveryTime is invalid</font>
2020-06-30T18:58:27.794Z - <font color="#C4A000">warn</font>: [ce792f08-3009-4790-bd0a-0ac4b1cfa3a2] Request failed: pickupTime must be a Unix timestamp if provided {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;,&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;,&quot;pickupTime&quot;:1e+27}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=pickupTime must be a Unix timestamp if provided
2020-06-30T18:58:27.794Z [ce792f08-3009-4790-bd0a-0ac4b1cfa3a2] POST /assignment 422 - 3.370 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if pickupTime is invalid</font>
2020-06-30T18:58:27.805Z - <font color="#C4A000">warn</font>: [b7adaf07-e1e2-481b-89c1-d23dbb7a5aac] Request failed: undefined {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;e65e2626-c4aa-4149-bf53-7c2fcc589a10&quot;,&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:27.805Z [b7adaf07-e1e2-481b-89c1-d23dbb7a5aac] POST /assignment 422 - 8.781 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign if capacity check fails</font>
2020-06-30T18:58:27.828Z - <font color="#C4A000">warn</font>: Failed to evaluate Client + Customer Settings and BuildPortal status=2, message=Client Notifications are not enabled or valid
2020-06-30T18:58:27.828Z - <font color="#4E9A06">info</font>: Added assignment afb81a4c-3d02-4b0e-9f1c-16f1b2310154
2020-06-30T18:58:27.829Z [afaf10a6-bd1e-468b-82c0-184bcbdf1269] POST /assignment 200 - 20.060 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should assign an inventory pickup task ad hoc to a driver without route skipping capacity check</font><font color="#CC0000"> (127ms)</font>
2020-06-30T18:58:27.998Z - <font color="#C4A000">warn</font>: Failed to evaluate Client + Customer Settings and BuildPortal status=2, message=Client Notifications are not enabled or valid
2020-06-30T18:58:27.999Z - <font color="#4E9A06">info</font>: Added assignment 19aff3c4-7cb3-4c6f-8e2d-0a1ca450c5bf
2020-06-30T18:58:28.000Z [cb3eafd0-b26a-4aca-8c5c-57c94fc153f7] POST /assignment 200 - 55.868 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should assign an inventory delivery task ad hoc to a driver without route</font><font color="#CC0000"> (167ms)</font>
2020-06-30T18:58:28.125Z - <font color="#C4A000">warn</font>: [ec75c744-3bb2-49dc-88e3-e79495585757] Request failed: Driver has no vehicle {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;task&quot;:&quot;9c3a5884-24f4-4ba4-a241-5d73a7f55541&quot;,&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Driver has no vehicle
2020-06-30T18:58:28.126Z [ec75c744-3bb2-49dc-88e3-e79495585757] POST /assignment 422 - 13.004 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not assign task to driver without vehicle</font>
2020-06-30T18:58:28.162Z - <font color="#C4A000">warn</font>: Failed to evaluate Client + Customer Settings and BuildPortal status=2, message=Client Notifications are not enabled or valid
2020-06-30T18:58:28.163Z - <font color="#4E9A06">info</font>: Added assignment 4e944d84-7e31-4706-9ff2-4536aa257552
2020-06-30T18:58:28.163Z [cdf8c209-84a4-4b82-b1d4-8dcaa349971e] POST /assignment 200 - 26.852 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:28.172Z [dfd46c3a-667d-4d5f-a44a-4f26cb947849] GET /assignment/4e944d84-7e31-4706-9ff2-4536aa257552 200 - 7.253 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should default inventory object field &apos;item&apos; to en empty string if missing</font><font color="#CC0000"> (142ms)</font>
    GET as driver
2020-06-30T18:58:28.295Z [d6b88a66-9d3f-48be-8186-b026987cdbc9] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 12.044 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get assignment from the system</font>
2020-06-30T18:58:28.306Z [63b81b83-30a5-4869-9a59-1767b185635e] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 2.158 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get assignment from the system if CEP can&apos;t find it</font>
2020-06-30T18:58:28.312Z - <font color="#CC0000">error</font>: [15ab0fae-a083-4096-aae4-88326bcf263e] Request failed:  {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=12
2020-06-30T18:58:28.312Z [15ab0fae-a083-4096-aae4-88326bcf263e] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 500 - 1.707 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if CEP fails</font>
2020-06-30T18:58:28.316Z - <font color="#C4A000">warn</font>: Assignment has no driver: 13a4d1b3-b6ff-4484-8075-4cccec85b307
2020-06-30T18:58:28.317Z [18698e9c-2959-4631-b543-a762672d5c37] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 1.335 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get assignment from the system if driver is null</font>
2020-06-30T18:58:28.323Z [fbde79a4-f485-4ef4-ab5a-90b156b8f3a0] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 2.956 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should ignore incorrect assignment status from CEP</font>
    PATCH as driver
2020-06-30T18:58:28.332Z - <font color="#C4A000">warn</font>: [f171124a-1c00-4102-ade1-b7d6ff31cbd0] Request failed: Assignment must be marked as arrived before it can be completed {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;status&quot;:2}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Assignment must be marked as arrived before it can be completed
2020-06-30T18:58:28.332Z [f171124a-1c00-4102-ade1-b7d6ff31cbd0] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 422 - 6.312 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to mark assignment status as 2 without status of 1 first</font>
2020-06-30T18:58:28.342Z - <font color="#4E9A06">info</font>: Notification sent for portal undefined
2020-06-30T18:58:28.346Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.status.updated
2020-06-30T18:58:28.346Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:28.347Z [c2d0e6b3-343d-4f9e-a74e-133b27a4ef1c] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 10.828 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:28.353Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.started
    <font color="#4E9A06">  ✓</font><font color="#555753"> should mark assignment status as 1 and send notification when location updates setting is disabled</font><font color="#CC0000"> (516ms)</font>
2020-06-30T18:58:28.890Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:28.891Z [1ba2f5c9-60f7-4dcd-bd41-e213a92d0f38] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 29.108 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:28.896Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.started
    <font color="#4E9A06">  ✓</font><font color="#555753"> should mark assignment status as 1 and not send notification if it is already sent</font><font color="#CC0000"> (540ms)</font>
2020-06-30T18:58:29.439Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:29.439Z [c78e1b1f-2ab7-49c3-a61b-8de6b39baa68] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 36.055 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:29.442Z - <font color="#CC0000">error</font>: Assignment update from CEP response failed with {&quot;_id&quot;:&quot;13a4d1b3-b6ff-4484-8075-4cccec85b307&quot;,&quot;client&quot;:{&quot;$in&quot;:[&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;]}} status=12
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return success even if CEP status update fails</font><font color="#CC0000"> (143ms)</font>
2020-06-30T18:58:29.581Z [eef22b22-a4eb-49a5-ad88-8bf60365c165] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 27.682 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should mark assignment status as 1 with a lowercase-z timestamp</font><font color="#CC0000"> (541ms)</font>
2020-06-30T18:58:30.127Z [8f304b94-0eae-4f27-bcbd-83da763d455e] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 22.858 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should mark assignment status as 2</font><font color="#CC0000"> (536ms)</font>
2020-06-30T18:58:30.660Z [a1496909-915b-4d71-be92-b40e92cc07b5] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/timewindow 200 - 18.535 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:30.670Z [b5f4e285-622d-48aa-a880-8fc100227148] GET /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 5.726 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update the time window and fix timestamps if needed</font>
2020-06-30T18:58:30.676Z - <font color="#C4A000">warn</font>: [fb39a431-07fa-4395-b90f-9ee41021514f] Request failed: Keys are required:  {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/timewindow&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;start&quot;:&quot;Mar 11 2016 02:00 AM&quot;,&quot;end&quot;:&quot;Mar 11 2016 10:30 PM&quot;}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=Keys are required: 
2020-06-30T18:58:30.677Z [fb39a431-07fa-4395-b90f-9ee41021514f] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/timewindow 422 - 1.554 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error for invalid time window update</font>
2020-06-30T18:58:30.688Z [d6e3b9ee-60f5-4d57-b09a-b8d3f267da1a] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/autodepart 200 - 6.090 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should log auto depart</font>
2020-06-30T18:58:30.695Z - <font color="#C4A000">warn</font>: [4f6c8fc7-30b7-4fc7-9c67-89aafd2c4d06] Request failed:  {  url: &apos;/assignment/bb3a3eaa-5a43-4d0f-a388-df6375cb3ea4/status&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;status&quot;:1}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:30.696Z [4f6c8fc7-30b7-4fc7-9c67-89aafd2c4d06] PATCH /assignment/bb3a3eaa-5a43-4d0f-a388-df6375cb3ea4/status 404 - 3.291 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if assignment id is not valid</font>
2020-06-30T18:58:30.710Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.status.updated
2020-06-30T18:58:30.710Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:30.711Z [8505a5fb-5ccf-4bea-8318-2efb70158c36] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 12.216 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not return client error if assignment not in CEP and the assignment is completed/cancelled</font>
2020-06-30T18:58:30.713Z - <font color="#3465A4">debug</font>: [b0681a90-bb03-11ea-baae-83f23072a5d8] send to RPC MQ
2020-06-30T18:58:30.729Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.status.updated
2020-06-30T18:58:30.729Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:30.730Z [9b83e116-1ef4-4903-b48c-347140fad568] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 14.085 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not return client error if assignment not in CEP and the assignment is started</font>
2020-06-30T18:58:30.731Z - <font color="#3465A4">debug</font>: [b06ad9b0-bb03-11ea-baae-83f23072a5d8] send to RPC MQ
2020-06-30T18:58:30.744Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:30.744Z [5b9a23af-e87d-4538-bfe9-86934d505c62] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 10.499 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not return client error if vehicle not in CEP and the assignment is not completed/cancelled</font>
2020-06-30T18:58:30.746Z - <font color="#3465A4">debug</font>: [b06d23a0-bb03-11ea-baae-83f23072a5d8] send to RPC MQ
2020-06-30T18:58:30.759Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.status.updated
2020-06-30T18:58:30.759Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:30.759Z [738d18e8-8cbe-4fc5-a7b2-5acf8246c4ec] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 11.417 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not return client error if vehicle not in CEP and the assignment is completed/cancelled</font>
2020-06-30T18:58:30.761Z - <font color="#3465A4">debug</font>: [b06f6d90-bb03-11ea-baae-83f23072a5d8] send to RPC MQ
2020-06-30T18:58:30.764Z - <font color="#C4A000">warn</font>: [93308859-3e8e-4408-b4bc-feb8b9b035eb] Request failed: Unsupported status value {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;status&quot;:10}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Unsupported status value
2020-06-30T18:58:30.764Z [93308859-3e8e-4408-b4bc-feb8b9b035eb] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 422 - 0.967 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject invalid status values</font>
2020-06-30T18:58:30.771Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:30.772Z [b468295e-ddfa-4a4f-9f27-607149a3e4cb] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 4.878 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:30.774Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.completed
    <font color="#4E9A06">  ✓</font><font color="#555753"> should correctly update assignment properties upon CEP response</font>
2020-06-30T18:58:30.889Z [fd8233f5-8d69-4861-8363-bdc6002daacc] PATCH /assignment/afb81a4c-3d02-4b0e-9f1c-16f1b2310154/inventory 200 - 111.261 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:30.894Z [baf0652d-a0e8-42a1-a247-ba76017c9216] GET /assignment/afb81a4c-3d02-4b0e-9f1c-16f1b2310154 200 - 3.051 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update the widget inventory with success and reason for the pickup assignment</font><font color="#CC0000"> (220ms)</font>
2020-06-30T18:58:31.036Z [bce9165f-6c18-451c-8025-2eb55acc7bea] PATCH /assignment/19aff3c4-7cb3-4c6f-8e2d-0a1ca450c5bf/inventory 200 - 28.724 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:31.046Z [49598735-0a8e-4e1f-8a09-775c4310b213] GET /assignment/19aff3c4-7cb3-4c6f-8e2d-0a1ca450c5bf 200 - 5.649 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update the bottles inventory with failure and reason for the delivery assignment</font><font color="#CC0000"> (148ms)</font>
2020-06-30T18:58:31.180Z [9aa2e4c7-33f1-4720-a787-e3b9f8078319] PATCH /assignment/afb81a4c-3d02-4b0e-9f1c-16f1b2310154/inventory 200 - 21.299 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:31.192Z [91aed461-c110-4752-b672-2f8ba97a7dc7] GET /assignment/afb81a4c-3d02-4b0e-9f1c-16f1b2310154 200 - 6.090 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update the widget inventory with client-side timestamps</font><font color="#CC0000"> (140ms)</font>
2020-06-30T18:58:31.315Z - <font color="#C4A000">warn</font>: [75b1d8d3-28de-4f7f-8019-2e5172187ef5] Request failed:  {  url: &apos;/assignment/19aff3c4-7cb3-4c6f-8e2d-0a1ca450c5bf/inventory&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;inventory&quot;:[{&quot;item&quot;:&quot;cars&quot;,&quot;quantity&quot;:14,&quot;success&quot;:true,&quot;reason&quot;:&quot;Client offloaded 14 cars&quot;,&quot;updatedAt&quot;:&quot;2020-06-30T18:58:31.303Z&quot;}]}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:31.316Z [75b1d8d3-28de-4f7f-8019-2e5172187ef5] PATCH /assignment/19aff3c4-7cb3-4c6f-8e2d-0a1ca450c5bf/inventory 404 - 15.471 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error on attempting to update invalid inventory item in delivery assignment</font>
    PUT as driver
2020-06-30T18:58:31.331Z - <font color="#C4A000">warn</font>: [d19e6a09-0ee6-45c4-b002-0ac1edc0bd08] Request failed:  {  url: &apos;/assignment/f79000e0-0fd2-11ea-b72c-9b7b3210b145&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;props&quot;:{&quot;size&quot;:1}}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:31.331Z [d19e6a09-0ee6-45c4-b002-0ac1edc0bd08] PUT /assignment/f79000e0-0fd2-11ea-b72c-9b7b3210b145 404 - 4.563 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if assignment doesn&apos;t exist</font>
2020-06-30T18:58:31.342Z [f31c501d-6d67-48d1-ab6b-33117ce4aed1] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 6.377 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update the contact</font>
2020-06-30T18:58:31.352Z [1dbdbdb4-1276-4913-ab1c-4e99625449e1] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 6.614 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update time windows in CEP</font>
2020-06-30T18:58:31.359Z - <font color="#C4A000">warn</font>: [6e756398-5a20-44ea-9062-c6e84d86ac1f] Request failed: Validation failed: props: each window start and end must be in ISO8601 format {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;props&quot;:{&quot;window&quot;:[{&quot;start&quot;:&quot;2016/10/28 16:30&quot;,&quot;end&quot;:&quot;2016/10/28 16:45&quot;}]}}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:31.359Z [6e756398-5a20-44ea-9062-c6e84d86ac1f] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 422 - 3.380 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject malformed time window updates</font>
2020-06-30T18:58:31.370Z [304f346c-e86f-4392-8510-abe1673e8e2e] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 7.696 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not reject empty time window updates - should use original</font>
2020-06-30T18:58:31.381Z [370d496d-0a1f-4fc1-b72e-0aadbfd4b1ec] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 7.977 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update completed assignment props</font>
2020-06-30T18:58:31.390Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.updated
2020-06-30T18:58:31.391Z - <font color="#CC0000">error</font>: [f0a5bcac-d05a-44fd-bc82-7dcb4bdcb64c] Request failed:  {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;props&quot;:{&quot;window&quot;:[{&quot;start&quot;:&quot;2016-10-28T16:30:00.000Z&quot;,&quot;end&quot;:&quot;2016-10-28T16:45:00.000Z&quot;}]}}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=12
2020-06-30T18:58:31.391Z [f0a5bcac-d05a-44fd-bc82-7dcb4bdcb64c] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 500 - 5.785 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if CEP update fails</font>
2020-06-30T18:58:31.396Z - <font color="#C4A000">warn</font>: [8c585c4b-8ad5-4e2f-a6d2-91151b30697d] Request failed: Fields are not allowed or nothing to update {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;location&quot;:&quot;someid&quot;}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Fields are not allowed or nothing to update
2020-06-30T18:58:31.396Z [8c585c4b-8ad5-4e2f-a6d2-91151b30697d] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 422 - 2.641 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not update the location ID</font>
2020-06-30T18:58:31.401Z - <font color="#C4A000">warn</font>: [76a8ef80-cce3-407d-ac74-dddc36524f14] Request failed: Please use dedicated methods to update inventory or time windows {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;props&quot;:{&quot;inventory&quot;:[]}}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Please use dedicated methods to update inventory or time windows
2020-06-30T18:58:31.401Z [76a8ef80-cce3-407d-ac74-dddc36524f14] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 422 - 2.537 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not update props.inventory</font>
2020-06-30T18:58:31.406Z - <font color="#C4A000">warn</font>: [c7daec0b-bacf-48dc-aad8-25a589205362] Request failed: Please use dedicated methods to update inventory or time windows {  url: &apos;/assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;props&quot;:{&quot;newWindow&quot;:[]}}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Please use dedicated methods to update inventory or time windows
2020-06-30T18:58:31.406Z [c7daec0b-bacf-48dc-aad8-25a589205362] PUT /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 422 - 2.500 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not update props.newWindow</font>
    POST as driver
2020-06-30T18:58:31.413Z - <font color="#4E9A06">info</font>: 
2020-06-30T18:58:31.413Z [bd426e0d-3511-4591-adec-1b74fedf5a67] POST /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/notice 200 - 4.321 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should send ETA notice</font>
    DELETE as admin
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not remove assignment that&apos;s currently assigned</font>
2020-06-30T18:58:31.429Z [7011ac26-fbbc-4c08-80d6-8cdbdadd6c94] PATCH /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307/status 200 - 10.603 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:31.446Z - <font color="#4E9A06">info</font>: Removing task(s) 9c3a5884-24f4-4ba4-a241-5d73a7f55541 from route plan undefined
2020-06-30T18:58:31.477Z [d876e3e8-a016-4567-a543-5584f24bc87a] DELETE /assignment/13a4d1b3-b6ff-4484-8075-4cccec85b307 200 - 44.520 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:31.487Z [639bb296-845a-4f58-bf9a-1b3c8626ac22] GET /task/9c3a5884-24f4-4ba4-a241-5d73a7f55541 200 - 7.059 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove assignment and remove task from route plan</font><font color="#CC0000"> (173ms)</font>
    <font color="#CC0000">  5) should delete assignment and task if assignment is of type depot</font>
    should test Customer Portal assignment event based notifications
2020-06-30T18:58:46.636Z [f4f0debd-a604-478c-8d8a-8f3f152506c1] PUT /client/5c087850-2a99-11e5-9189-eb07c479dfd5 200 - 32.665 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:46.672Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:46.677Z [8bd51184-4fd6-4b6c-88b4-03138c57286d] PUT /task 200 - 36.547 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:46.695Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.add
2020-06-30T18:58:46.696Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.created
2020-06-30T18:58:46.699Z - <font color="#CC0000">error</font>: [cac0012c-b88c-40ee-bc4e-998dc2b9a634] Request failed: Unexpected call: find({ _id: { $in: [&quot;99b70c24-67f7-4f91-a225-9bdb5d720d57&quot;] } })    Expectation met: find([...]) once {  url: &apos;/assignment&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;driver&quot;:&quot;bc288d85-1cf5-47ce-8c8e-efc831254b4f&quot;,&quot;task&quot;:&quot;3ed4d035-92d0-4423-811e-33ef5a73e1dd&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=Unexpected call: find({ _id: { $in: [&quot;99b70c24-67f7-4f91-a225-9bdb5d720d57&quot;] } })
    Expectation met: find([...]) once, stack=ExpectationError: Unexpected call: find({ _id: { $in: [&quot;99b70c24-67f7-4f91-a225-9bdb5d720d57&quot;] } })
    Expectation met: find([...]) once
    at Object.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock-expectation.js:309:25)
    at Object.invokeMethod (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock.js:196:25)
    at Function.find (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock.js:72:35)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/mixins/assignTaskToAssignments.js:33:218
    at processTicksAndRejections (internal/process/task_queues.js:97:5), name=ExpectationError
2020-06-30T18:58:46.699Z [cac0012c-b88c-40ee-bc4e-998dc2b9a634] POST /assignment 500 - 19.001 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#CC0000">  6) should send notification if notifyBasedOnTime is true and assignment eta is less than notificationTime when location update request is sent</font>
    <font color="#CC0000">  7) should send notification if notifyOnStartAssignment is true and assignment is marked &apos;in progress&apos; (status 1)</font>
    <font color="#CC0000">  8) should send notification if notifyOnCompleteAssignment is true and assignment is marked &apos;completed&apos; (status 2)</font>
2020-06-30T18:58:46.726Z [e26bb502-4010-4be4-b4c6-904e28c3f737] PUT /client/5c087850-2a99-11e5-9189-eb07c479dfd5 200 - 10.119 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:46.735Z - <font color="#4E9A06">info</font>: Deleted 4 assignments
2020-06-30T18:58:46.735Z - <font color="#CC0000">error</font>: [378e7499-45a6-4ca4-b914-7c50f6f1465e] Request failed: Unexpected call: deleteMany({ client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot; })    Expectation met: deleteMany(match(_id: [object Object], props.type: depot)[, ...]) once {  url: &apos;/admin?action=reset_all&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=Unexpected call: deleteMany({ client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot; })
    Expectation met: deleteMany(match(_id: [object Object], props.type: depot)[, ...]) once, stack=ExpectationError: Unexpected call: deleteMany({ client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot; })
    Expectation met: deleteMany(match(_id: [object Object], props.type: depot)[, ...]) once
    at Object.fail (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock-expectation.js:309:25)
    at Object.invokeMethod (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock.js:196:25)
    at Function.deleteMany (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sinon/lib/sinon/mock.js:72:35)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/mixins/resetClient.js:1:5051
    at processTicksAndRejections (internal/process/task_queues.js:97:5), name=ExpectationError
2020-06-30T18:58:46.735Z [378e7499-45a6-4ca4-b914-7c50f6f1465e] POST /admin?action=reset_all 500 - 5.524 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]

  Assignments Handler
2020-06-30T18:58:47.774Z - <font color="#C4A000">warn</font>: [9ac7b590-28ea-49dc-95d4-23e6be09deb5] Request failed: Existing driver found {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581000&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;vehicle&quot;:{&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=5, message=Existing driver found
2020-06-30T18:58:47.775Z [9ac7b590-28ea-49dc-95d4-23e6be09deb5] POST /driver 409 - 23.837 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
  <font color="#CC0000">  9) &quot;before all&quot; hook in &quot;Assignments Handler&quot;</font>
  <font color="#CC0000">  10) &quot;after all&quot; hook in &quot;Assignments Handler&quot;</font>

  Client Event Rules Handler
    GET
2020-06-30T18:58:47.793Z [73faa088-4c65-4150-86cf-aea48b8b6daf] GET /clienteventrules?event_type=SCHEDULER 200 - 2.348 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves client event rules by event_type</font>
2020-06-30T18:58:47.798Z [c820ffeb-801a-4322-ba62-762884c505ae] GET /clienteventrules?rule_id=someRuleId 200 - 0.761 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves client event rules by rule_id</font>
    POST
2020-06-30T18:58:47.803Z [667aaa5b-c2d0-42dd-868a-d28658f2d17e] POST /clienteventrule 200 - 2.420 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> creates a client event rule</font>
2020-06-30T18:58:47.807Z - <font color="#C4A000">warn</font>: API Key user must specify Wise-Client-Id header
2020-06-30T18:58:47.807Z [0bf14fa8-b7d7-4e73-944f-00e08dd83961] POST /clienteventrule 403 - 0.752 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> does not create a client event rule if missing client_id</font>
    DELETE
2020-06-30T18:58:47.810Z [3fa33c01-ec16-4a74-8c0b-9d363c94bdbd] DELETE /clienteventrule?id=722a4b6e-b089-406c-9cbb-2031d94074f7 200 - 0.829 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> deletes client event rule given their ID</font>
2020-06-30T18:58:47.813Z - <font color="#C4A000">warn</font>: [34619fd7-e8d2-4061-8504-b0ee02a71bd0] Request failed:  {  url: &apos;/clienteventrule&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:47.813Z [34619fd7-e8d2-4061-8504-b0ee02a71bd0] DELETE /clienteventrule 422 - 0.680 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> handle deletion error without client event rule ID</font>
    PATCH
2020-06-30T18:58:47.817Z [b6bfcc54-e070-4e35-86de-e2532f464b14] PATCH /clienteventrule 200 - 1.149 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> updates client event rule given their ID</font>

  Client Handler
    GET
2020-06-30T18:58:47.821Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client! host=127.0.0.1:34423, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.827Z [b82bf434-8cea-4845-a2f8-2a9946781ac3] GET /client 200 - 6.056 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return user&apos;s client if no id provided</font>
2020-06-30T18:58:47.832Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client/b703b710-3a1f-11e6-83d8-d3334a6e3894! host=127.0.0.1:38801, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.834Z - <font color="#C4A000">warn</font>: [8c35c07e-4333-4c59-8f81-dc40486ec97c] Request failed:  {  url: &apos;/client/b703b710-3a1f-11e6-83d8-d3334a6e3894&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=2
2020-06-30T18:58:47.835Z [8c35c07e-4333-4c59-8f81-dc40486ec97c] GET /client/b703b710-3a1f-11e6-83d8-d3334a6e3894 404 - 3.266 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return not found for non-existing client</font>
2020-06-30T18:58:47.838Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client?code=abc! host=127.0.0.1:40707, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.842Z [4bcf6e2b-cb30-45fd-b5d0-01d6dfa6612a] GET /client?code=abc 200 - 4.790 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return existing client by team code</font>
2020-06-30T18:58:47.846Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client/5c087850-2a99-11e5-9189-eb07c479dfd5! host=127.0.0.1:37429, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.850Z [d7888047-c17e-4ad4-abdb-3cf7c817778f] GET /client/5c087850-2a99-11e5-9189-eb07c479dfd5 200 - 3.772 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return existing client</font>
2020-06-30T18:58:47.853Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client/5c087850-2a99-11e5-9189-eb07c479dfd5?extent=application! host=127.0.0.1:37675, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.857Z [f4d01ac6-dacf-45d5-9cc1-a481483f2abf] GET /client/5c087850-2a99-11e5-9189-eb07c479dfd5?extent=application 200 - 4.106 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should include application keys if requested</font>
    POST
2020-06-30T18:58:47.865Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /client! host=127.0.0.1:46481, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=257, connection=close
2020-06-30T18:58:47.880Z [964bfe96-dd74-486a-aefc-b9aa5a96dadf] POST /client 200 - 15.430 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new client to system with address</font>
2020-06-30T18:58:47.885Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /client! host=127.0.0.1:33069, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=250, connection=close
2020-06-30T18:58:47.889Z - <font color="#CC0000">error</font>: [02c0af61-5c50-43e7-838a-ab21212e32e9] Request failed:  {  url: &apos;/client&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;name&quot;:&quot;Uwajimaya&quot;,&quot;domain&quot;:&quot;www.batchyard.com&quot;,&quot;owner&quot;:&quot;testUser&quot;}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=12
2020-06-30T18:58:47.889Z [02c0af61-5c50-43e7-838a-ab21212e32e9] POST /client 500 - 5.106 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if CEP client creation fails</font>
    PATCH
2020-06-30T18:58:47.892Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PATCH /client! host=127.0.0.1:43207, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:47.893Z - <font color="#C4A000">warn</font>: [6cc680fc-940e-49bc-9c0f-48eefee4abbe] Request failed:  {  url: &apos;/client&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:47.893Z [6cc680fc-940e-49bc-9c0f-48eefee4abbe] PATCH /client 405 - 1.058 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:58:47.896Z - <font color="#C4A000">warn</font>: [d9a262c7-74b7-496a-b100-16bf83e8e5e0] Request failed:  {  url: &apos;/client/384699ff-a1a2-11e9-80d9-398f3f4c5edc&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;} status=8
2020-06-30T18:58:47.896Z [d9a262c7-74b7-496a-b100-16bf83e8e5e0] PUT /client/384699ff-a1a2-11e9-80d9-398f3f4c5edc 403 - 0.986 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error when attempting to update another client</font>
2020-06-30T18:58:47.903Z [b7703b25-1387-4719-9dc9-81f141473363] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 5.056 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update existing client name</font>
2020-06-30T18:58:47.914Z [9960cc2c-5089-42a7-8a90-29dadaba274c] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 8.047 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update client preferences</font>
2020-06-30T18:58:47.923Z [3c4a5851-ea89-4bd2-b0e7-4c4635a4cbd0] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 6.187 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update client notifications</font>
2020-06-30T18:58:47.932Z [c43617a0-d677-445d-895e-f206833521d3] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 6.156 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update client address</font>
2020-06-30T18:58:47.937Z - <font color="#C4A000">warn</font>: [a0681f6d-9110-4c28-9a8a-f02a2154c2f2] Request failed: Invalid address {  url: &apos;/client/ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;address&quot;:&quot;dummy&quot;}&apos;,  user: &apos;testUser&apos;,  client: &apos;ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;} status=2, message=Invalid address
2020-06-30T18:58:47.937Z [a0681f6d-9110-4c28-9a8a-f02a2154c2f2] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 404 - 3.135 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to update client address if unknown</font>
2020-06-30T18:58:47.940Z - <font color="#C4A000">warn</font>: [e2c9baf0-424c-47d9-b324-c4ea228a32fb] Request failed: address must be a string {  url: &apos;/client/ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;address&quot;:{&quot;addressLine1&quot;:&quot;dummy&quot;}}&apos;,  user: &apos;testUser&apos;,  client: &apos;ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;} status=3, message=address must be a string
2020-06-30T18:58:47.941Z [e2c9baf0-424c-47d9-b324-c4ea228a32fb] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 422 - 1.139 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to update client address if not an ID</font>
2020-06-30T18:58:47.951Z - <font color="#C4A000">warn</font>: [b03899a5-f41e-4375-89d8-5072bb255341] Request failed: Validation failed: preferences.pickupDeliveryModel: invalid pickup/delivery model, allowed values are: taxicab and carpooling., preferences: Validation failed: pickupDeliveryModel: invalid pickup/delivery model, allowed values are: taxicab and carpooling. {  url: &apos;/client/ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;preferences&quot;:{&quot;pickupDeliveryModel&quot;:&quot;unheardOfModel&quot;}}&apos;,  user: &apos;testUser&apos;,  client: &apos;ab7897a5-477c-4839-be84-e1ddd7172bf5&apos;}
2020-06-30T18:58:47.951Z [b03899a5-f41e-4375-89d8-5072bb255341] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 422 - 7.204 ms [ab7897a5-477c-4839-be84-e1ddd7172bf5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to update client preferences, if pickup/delivery model is not valid</font>
    PUT as Wise Admin
2020-06-30T18:58:47.954Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5! host=127.0.0.1:43785, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=30, connection=close
2020-06-30T18:58:47.959Z [508aa51d-8f59-4bc8-8b45-8e70c4353335] PUT /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 5.472 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update existing client domain</font>
    GET as Admin
2020-06-30T18:58:47.962Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /client/ab7897a5-477c-4839-be84-e1ddd7172bf5! host=127.0.0.1:34897, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.965Z [7bf95734-6482-4290-9b0a-643978419e0e] GET /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 3.469 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve the updated client info</font>
    DELETE
2020-06-30T18:58:47.969Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for DELETE /client/ab7897a5-477c-4839-be84-e1ddd7172bf5! host=127.0.0.1:46581, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:47.971Z [867bb114-c644-4a18-bb66-addeadb3f792] DELETE /client/ab7897a5-477c-4839-be84-e1ddd7172bf5 200 - 2.618 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the client from the database</font>

  Client Handler as user
    GET
2020-06-30T18:58:47.977Z [e59e3875-c63b-42fc-8aef-56298ed1f861] GET /client/5c087850-2a99-11e5-9189-eb07c479dfd5 200 - 3.295 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return own client</font>
2020-06-30T18:58:47.980Z - <font color="#C4A000">warn</font>: [c634f3f8-b7dd-4635-b333-d03f2b5fa607] Request failed:  {  url: &apos;/client/c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:58:47.980Z [c634f3f8-b7dd-4635-b333-d03f2b5fa607] GET /client/c8d01b88-b330-4b51-9384-e8e5c967ab18 403 - 0.808 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if different client</font>
    POST
2020-06-30T18:58:47.983Z - <font color="#C4A000">warn</font>: [56b00f0c-3900-45dd-9a26-f38527e53222] Request failed:  {  url: &apos;/client&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:58:47.983Z [56b00f0c-3900-45dd-9a26-f38527e53222] POST /client 403 - 0.996 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return unauthorized</font>
    PUT
2020-06-30T18:58:47.987Z - <font color="#C4A000">warn</font>: [7969670f-cb26-46d2-b116-12e71fc477c0] Request failed:  {  url: &apos;/client/5c087850-2a99-11e5-9189-eb07c479dfd5&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:58:47.988Z [7969670f-cb26-46d2-b116-12e71fc477c0] PUT /client/5c087850-2a99-11e5-9189-eb07c479dfd5 403 - 2.338 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return unauthorized</font>
    DELETE
2020-06-30T18:58:47.991Z - <font color="#C4A000">warn</font>: [8e07148c-c38f-413d-91e2-f84d2a766fbc] Request failed:  {  url: &apos;/client/5c087850-2a99-11e5-9189-eb07c479dfd5&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:58:47.992Z [8e07148c-c38f-413d-91e2-f84d2a766fbc] DELETE /client/5c087850-2a99-11e5-9189-eb07c479dfd5 403 - 0.820 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return unauthorized</font>

  Client Notifications Templates Handler
    GET
2020-06-30T18:58:47.995Z [cb8c4db2-0a58-4cbb-8c57-287bcc71a346] GET /clientnotificationtemplates?task_id=sampleTaskId 200 - 0.873 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves the templates by task ID</font>
2020-06-30T18:58:47.998Z [9b421be5-5cc5-4aec-be54-de46dc8e8ba0] GET /clientnotificationtemplates?delivery_method=email 200 - 0.581 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves the templates by delivery method</font>
      Get task messaging
        using a user specified template
2020-06-30T18:58:48.019Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.025Z [dbc5f9ad-8193-491d-aa5e-4af0ac51f582] PUT /task 200 - 23.819 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.025Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.047Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.051Z [726831ef-9196-480c-bb21-4802a4899257] PUT /task 200 - 23.369 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.051Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.059Z [86b29d2a-c2f6-4c2f-a755-781cce26fda0] GET /clientnotificationtemplates/c06887b3-5930-40a4-9ca9-5752f55684b0/messaging?routeDate=2040-07-04 200 - 6.121 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for specific tasks as based on a template and routeDate</font>
2020-06-30T18:58:48.066Z [094a4f5a-8086-4256-8e31-631cb9136636] DELETE /tasks 200 - 5.050 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.086Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.090Z [65058240-e9ad-474f-a35a-177caedd6ba3] PUT /task 200 - 22.040 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.091Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.114Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.120Z [1a23e420-be08-4fca-ae8c-1b823bf371b8] PUT /task 200 - 27.035 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.120Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.127Z [3fea97a1-7553-4ac1-9b31-ba97e4a2a437] GET /clientnotificationtemplates/c06887b3-5930-40a4-9ca9-5752f55684b0/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 200 - 4.820 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for specific tasks as based on a template and scheduled action ids</font>
2020-06-30T18:58:48.134Z [c71926b6-af7b-438b-9b20-9627fd0a99a0] DELETE /tasks 200 - 4.172 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        using the most specific available template
2020-06-30T18:58:48.147Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.151Z [61914599-21be-4c17-aeae-9179e3bcced6] PUT /task 200 - 15.026 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.151Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.166Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.170Z [fcb4d530-b602-4750-bb10-6bc498a5bb80] PUT /task 200 - 17.011 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.170Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.178Z [914fe732-b4a0-44c5-8d1b-08175be415c8] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 200 - 4.538 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for a specific task as based on routeDate, and scheduled action delivery method</font>
2020-06-30T18:58:48.190Z [98aa92ef-b875-4dd8-9bd8-65d2b0cb5d3d] DELETE /tasks 200 - 8.474 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.203Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.206Z [a734a2f8-a072-453d-85f7-08d715edd7bd] PUT /task 200 - 13.151 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.206Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.218Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.221Z [716196a4-5022-4417-9ebb-0c4f9857fdef] PUT /task 200 - 13.628 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.221Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.228Z [be60a90c-1b9c-413a-85e7-f5ed6b762501] GET /clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 200 - 4.352 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for a task based on routeDate, the task label, and scheduled action delivery method</font>
2020-06-30T18:58:48.234Z [a26b566a-d7ab-47f1-a9e4-0773da0f511d] DELETE /tasks 200 - 4.515 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.250Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.255Z [3dbb44bd-6ea9-4e86-a29a-185a30466edd] PUT /task 200 - 18.128 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.255Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.267Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.271Z [222731fc-9412-47af-9c82-4ea3954fd484] PUT /task 200 - 13.950 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.271Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.277Z [d2c1a919-56f4-4309-987b-32047c7f3ab2] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 200 - 4.049 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for a specific task based on routeDate and task id</font>
2020-06-30T18:58:48.284Z [75052a77-ab62-459d-9410-372263c5a6a5] DELETE /tasks 200 - 4.888 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.297Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.300Z [7f9133ae-84db-47fd-932a-c557b578cd4f] PUT /task 200 - 13.752 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.300Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.312Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.318Z [5435e53d-e4c2-409c-beb6-99c0f80bde26] PUT /task 200 - 15.567 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.318Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.324Z [446e3989-2669-41de-a1ea-fbf3a309a4e3] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 200 - 4.523 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> retrieves messaging for multiple tasks and actions some existing and non existing</font>
2020-06-30T18:58:48.331Z [f32de63a-16c2-4e78-a764-f16b63b3061d] DELETE /tasks 200 - 4.085 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        no templates match tasks - should fail with 422 (invalid data)
2020-06-30T18:58:48.347Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.350Z [015c0251-af44-4bd2-9ead-f3e28e8bc673] PUT /task 200 - 17.099 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.350Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.363Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.366Z [7ba09003-0181-4681-82cb-bf257f777add] PUT /task 200 - 14.648 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.367Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.373Z - <font color="#C4A000">warn</font>: No matching email template found
2020-06-30T18:58:48.373Z - <font color="#C4A000">warn</font>: [151194a1-f317-44eb-a279-1196bbfd2e10] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?routeDate=2040-07-04&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.374Z [151194a1-f317-44eb-a279-1196bbfd2e10] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 422 - 5.074 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when no template id is specified and routeDate specified</font>
2020-06-30T18:58:48.380Z [5fa29c83-08ff-4f4a-9410-33f7df587ef6] DELETE /tasks 200 - 4.043 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.396Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.400Z [5e4ef5cc-e9fe-487d-baa0-d83b02134797] PUT /task 200 - 17.725 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.400Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.412Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.415Z [370f777c-38ed-43f9-80b9-65d84e088be1] PUT /task 200 - 13.727 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.415Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.423Z - <font color="#C4A000">warn</font>: No matching email template found
2020-06-30T18:58:48.423Z - <font color="#C4A000">warn</font>: [40e8200a-96b2-4860-855d-c5497726d65a] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.423Z [40e8200a-96b2-4860-855d-c5497726d65a] GET /clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 422 - 5.845 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when no template id is specified and scheduledAction ids specified</font>
2020-06-30T18:58:48.432Z [82c4feeb-28ff-41d9-8159-8d1262b8e746] DELETE /tasks 200 - 5.765 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        no templates found - should fail with 422 (invalid data)
          when template id is specified
2020-06-30T18:58:48.445Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.449Z [7fae37f4-3bbf-4c32-aa31-e88fc0fe48a8] PUT /task 200 - 14.646 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.449Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.463Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.466Z [b6604626-be77-4e42-a775-7898949a6a33] PUT /task 200 - 15.533 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.466Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.472Z - <font color="#C4A000">warn</font>: No matching voice template found
2020-06-30T18:58:48.473Z - <font color="#C4A000">warn</font>: [5825b693-5793-4d5f-a236-ead0045e1db4] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/fa5a4ac5-108b-4523-8470-43a49033564f/messaging?routeDate=2040-07-04&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.473Z [5825b693-5793-4d5f-a236-ead0045e1db4] GET /clientnotificationtemplates/fa5a4ac5-108b-4523-8470-43a49033564f/messaging?routeDate=2040-07-04 422 - 4.357 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
          <font color="#4E9A06">  ✓</font><font color="#555753"> and routeDate specified</font>
2020-06-30T18:58:48.479Z [21445564-7ead-4058-a9ad-2f72fb318cce] DELETE /tasks 200 - 4.409 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.493Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.497Z [a152be72-3c45-4791-b068-0219ebd8f419] PUT /task 200 - 14.900 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.497Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.511Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.514Z [1564c3c1-06a2-4654-975b-ed3ffb5f7cdc] PUT /task 200 - 15.515 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.514Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.521Z - <font color="#C4A000">warn</font>: No matching voice template found
2020-06-30T18:58:48.521Z - <font color="#C4A000">warn</font>: [90f245c9-3b57-42be-b7b7-db8970b40491] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/fa5a4ac5-108b-4523-8470-43a49033564f/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.521Z [90f245c9-3b57-42be-b7b7-db8970b40491] GET /clientnotificationtemplates/fa5a4ac5-108b-4523-8470-43a49033564f/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 422 - 4.603 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
          <font color="#4E9A06">  ✓</font><font color="#555753"> and scheduledAction ids specified</font>
2020-06-30T18:58:48.527Z [cf03f25a-b8c5-45ab-9003-d8f65c7b77d5] DELETE /tasks 200 - 4.073 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
          when no template id is specified
2020-06-30T18:58:48.543Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.547Z [be01e2f0-a92a-4541-ac1d-b9b00c755179] PUT /task 200 - 17.091 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.547Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.559Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.563Z [c18d4ba9-617c-481e-8445-d6e61f731a3c] PUT /task 200 - 13.862 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.563Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.570Z - <font color="#C4A000">warn</font>: No matching voice template found
2020-06-30T18:58:48.570Z - <font color="#C4A000">warn</font>: [99a40e32-7f31-4d89-bc41-cf440f3e0656] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?routeDate=2040-07-04&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.570Z [99a40e32-7f31-4d89-bc41-cf440f3e0656] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 422 - 4.230 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
          <font color="#4E9A06">  ✓</font><font color="#555753"> and routeDate specified</font>
2020-06-30T18:58:48.576Z [d508e156-8358-4787-852a-bb4327a6dc10] DELETE /tasks 200 - 4.138 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.589Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.593Z [5d0a1c46-0ceb-42d1-ab00-d7bd5d300775] PUT /task 200 - 13.410 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.593Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.606Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.610Z [a2c4b772-8ea8-4433-ba13-aea7dead6061] PUT /task 200 - 14.809 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.610Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.616Z - <font color="#C4A000">warn</font>: No matching voice template found
2020-06-30T18:58:48.616Z - <font color="#C4A000">warn</font>: [38b57c45-f967-4358-ba79-e16e1a8a3905] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.616Z [38b57c45-f967-4358-ba79-e16e1a8a3905] GET /clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 422 - 4.350 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
          <font color="#4E9A06">  ✓</font><font color="#555753"> and scheduledAction ids specified</font>
2020-06-30T18:58:48.622Z [c807ba4f-c195-479a-a41c-33cc6ca63ae3] DELETE /tasks 200 - 3.976 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        no tasks found - should fail with 422 (invalid data)
2020-06-30T18:58:48.637Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.643Z [991820c2-5bd8-4738-aa45-87ac93d49412] PUT /task 200 - 17.814 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.643Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.656Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.660Z [9be40e40-0399-4bd2-b46f-c34021cf9a27] PUT /task 200 - 15.487 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.660Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.663Z - <font color="#C4A000">warn</font>: [c6e6c337-29eb-458a-a1d9-d657756d5888] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?routeDate=2040-07-04&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.664Z [c6e6c337-29eb-458a-a1d9-d657756d5888] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 422 - 1.069 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when routeDate is specified</font>
2020-06-30T18:58:48.669Z [a40bd810-8e4b-409e-862d-f390fdabf545] DELETE /tasks 200 - 4.038 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.685Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.689Z [f9d3c9c9-7633-414d-bad2-2d6ba38d796a] PUT /task 200 - 16.495 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.689Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.702Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.708Z [b68a9c22-37b9-4a47-8d5d-e342c4614085] PUT /task 200 - 16.041 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.708Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.711Z - <font color="#C4A000">warn</font>: [fcedb599-f94d-4bed-bb82-a728be0bbdb9] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.711Z [fcedb599-f94d-4bed-bb82-a728be0bbdb9] GET /clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 422 - 0.907 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when scheduledAction ids are specified</font>
2020-06-30T18:58:48.716Z [bdda457b-dc78-4c55-a6ef-0501acccadc0] DELETE /tasks 200 - 3.789 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        no scheduled actions found - should fail with 422 (invalid data)
2020-06-30T18:58:48.728Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.731Z [2abd2238-3d95-4c84-9463-7a479d25439d] PUT /task 200 - 12.727 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.731Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.746Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.750Z [cecb2417-0441-4589-81ad-4be57487ed01] PUT /task 200 - 17.533 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.750Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.755Z - <font color="#C4A000">warn</font>: [261fe9eb-a657-455d-b830-f4ee8a1f53bd] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?routeDate=2040-07-04&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.756Z [261fe9eb-a657-455d-b830-f4ee8a1f53bd] GET /clientnotificationtemplates/messaging?routeDate=2040-07-04 422 - 2.749 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when routeDate is specified</font>
2020-06-30T18:58:48.764Z [2d55d93e-ac21-4b84-b942-0a734dc364de] DELETE /tasks 200 - 5.083 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.776Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.779Z [0873bc33-63c1-48e7-b398-2a98294c5bec] PUT /task 200 - 13.017 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.779Z - <font color="#4E9A06">info</font>: TaskJson 7db3e88d-78f3-40fb-987c-164f2a145dc4 saved
2020-06-30T18:58:48.791Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:48.794Z [2aee9e3e-400c-4398-82a5-07b2230ed0b6] PUT /task 200 - 13.083 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:48.794Z - <font color="#4E9A06">info</font>: TaskJson 986887b3-5930-40a4-9ca9-5752f55684b0 saved
2020-06-30T18:58:48.798Z - <font color="#C4A000">warn</font>: [3d012745-a280-48d7-9af8-2444a0191a06] Request failed: No valid scheduled action or valid template found {  url: &apos;/clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=No valid scheduled action or valid template found, stack=Error: No valid scheduled action or valid template found
    at Object.getMessaging (/home/lkoemmpel/Documents/wise-systems/wise-api/server/logic/actionScheduler/clientNotificationTemplateLogic.js:6:439)
    at /home/lkoemmpel/Documents/wise-systems/wise-api/server/handlers/actionScheduler/ClientNotificationTemplatesHandler.js:4:203
    at runMicrotasks (&lt;anonymous&gt;)
    at processTicksAndRejections (internal/process/task_queues.js:97:5), error=undefined, status=3
2020-06-30T18:58:48.798Z [3d012745-a280-48d7-9af8-2444a0191a06] GET /clientnotificationtemplates/messaging?scheduledActionIds=f5b9f8d8-75cd-4e8b-a933-632122c747b8 422 - 1.984 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> when scheduledAction ids are specified</font>
2020-06-30T18:58:48.804Z [3f6bf35d-f02a-47f3-b378-fa11540a4398] DELETE /tasks 200 - 4.146 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    POST
2020-06-30T18:58:48.807Z [bf82d927-1bf3-40f6-a496-179fd416d8d4] POST /clientnotificationtemplates 200 - 1.253 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> creates a client notification template with task_id that exists</font>
2020-06-30T18:58:48.811Z [29437305-81c5-41a9-b34e-57917e9feab5] POST /clientnotificationtemplates 200 - 0.825 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> creates a client notification template without  task_id</font>
2020-06-30T18:58:48.816Z - <font color="#C4A000">warn</font>: [4d49decd-aeaa-4683-b291-945320627700] Request failed: delivery_method is a required field {  url: &apos;/clientnotificationtemplates&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;client_id&quot;:&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;,&quot;task_id&quot;:&quot;sampleTaskId&quot;,&quot;task_label&quot;:&quot;sampleLabel&quot;,&quot;text&quot;:&quot;This is a sample template used in functional tests&quot;,&quot;delivery_method&quot;:null,&quot;notify_client&quot;:false}&apos;,  user: &apos;api-key-user&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6, message=delivery_method is a required field
2020-06-30T18:58:48.816Z [4d49decd-aeaa-4683-b291-945320627700] POST /clientnotificationtemplates 422 - 0.722 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> does not create a template if the delivery method is missing</font>
    DELETE
2020-06-30T18:58:48.819Z [819d37bc-731c-42b6-97f7-d1241a7e8ec2] DELETE /clientnotificationtemplates/149b3edf-e9fb-4fbc-bcd5-d85a1911ae77 200 - 0.719 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> deletes templates given their ID</font>
    PATCH
2020-06-30T18:58:48.822Z [5d8d397c-344d-420a-9b56-ba9d17a303cf] PATCH /clientnotificationtemplates/149b3edf-e9fb-4fbc-bcd5-d85a1911ae77 200 - 0.950 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> updates templates given their ID</font>

  Client Template Handler as wise-admin
    GET
2020-06-30T18:58:48.825Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /template?client=5c087850-2a99-11e5-9189-eb07c479dfd5! host=127.0.0.1:44099, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.826Z [3c2fe6cf-9a0f-471d-ae5e-329352997b7e] GET /template?client=5c087850-2a99-11e5-9189-eb07c479dfd5 200 - 1.171 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get client template mapping</font>
2020-06-30T18:58:48.828Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /template! host=127.0.0.1:41591, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.828Z - <font color="#C4A000">warn</font>: [014588d8-46a5-4675-a974-57d4bc2c920c] Request failed:  {  url: &apos;/template&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=6
2020-06-30T18:58:48.828Z [014588d8-46a5-4675-a974-57d4bc2c920c] GET /template 422 - 0.833 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error when no client id is provided</font>
    PUT
2020-06-30T18:58:48.831Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PUT /template! host=127.0.0.1:34279, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=152, connection=close
2020-06-30T18:58:48.832Z [3762a8a7-8b3a-40d6-b05b-4066af664a14] PUT /template 200 - 1.787 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should create client template mapping</font>
2020-06-30T18:58:48.835Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PUT /template! host=127.0.0.1:44649, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=104, connection=close
2020-06-30T18:58:48.835Z - <font color="#C4A000">warn</font>: [32a99bd5-6939-49d0-9410-2d3a6b9da736] Request failed:  {  url: &apos;/template&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;customer&quot;:&quot;red&quot;,&quot;driver&quot;:&quot;green&quot;,&quot;orderIntegration&quot;:&quot;blue&quot;,&quot;task&quot;:&quot;yellow&quot;,&quot;integrationName&quot;:&quot;purple&quot;}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=6
2020-06-30T18:58:48.836Z [32a99bd5-6939-49d0-9410-2d3a6b9da736] PUT /template 422 - 1.039 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if client id is missing</font>
2020-06-30T18:58:48.839Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /template! host=127.0.0.1:35347, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.839Z - <font color="#C4A000">warn</font>: [42dc10a7-5a0b-492e-81c5-46f3b61ecdc8] Request failed:  {  url: &apos;/template&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=6
2020-06-30T18:58:48.839Z [42dc10a7-5a0b-492e-81c5-46f3b61ecdc8] GET /template 422 - 0.845 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error when no client id is provided</font>
    PATCH
2020-06-30T18:58:48.842Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PATCH /template! host=127.0.0.1:43401, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:48.842Z - <font color="#C4A000">warn</font>: [445f49af-ed3b-46cd-ac14-d6bbca03f700] Request failed:  {  url: &apos;/template&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.843Z [445f49af-ed3b-46cd-ac14-d6bbca03f700] PATCH /template 405 - 1.215 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>
    POST
2020-06-30T18:58:48.845Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /template! host=127.0.0.1:43489, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:48.845Z - <font color="#C4A000">warn</font>: [66bac59f-9b6c-4a81-80eb-af76b96902ac] Request failed:  {  url: &apos;/template&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.845Z [66bac59f-9b6c-4a81-80eb-af76b96902ac] POST /template 405 - 0.948 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>
    DELETE
2020-06-30T18:58:48.848Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for DELETE /template! host=127.0.0.1:40439, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.848Z - <font color="#C4A000">warn</font>: [7671a500-fa67-4fd6-be4a-dedfabacba03] Request failed:  {  url: &apos;/template&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.848Z [7671a500-fa67-4fd6-be4a-dedfabacba03] DELETE /template 405 - 0.750 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>

  Client Template Handler as client admin
    GET
2020-06-30T18:58:48.851Z [afd77de2-62de-4856-b0ad-08852173db4c] GET /template?client=hello 200 - 0.764 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should use client id in query params and not logged-in user&apos;s client id</font>
2020-06-30T18:58:48.853Z - <font color="#C4A000">warn</font>: [0f0115d0-7670-4aa9-b324-cac69c0bbfe7] Request failed:  {  url: &apos;/template?client=hello&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:48.854Z [0f0115d0-7670-4aa9-b324-cac69c0bbfe7] GET /template?client=hello 422 - 0.784 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if logged-in user is not an admin for the client id in query params</font>
    PUT
2020-06-30T18:58:48.857Z [39c15c3a-9e9f-4a0b-8477-23e21773fe53] PUT /template 200 - 1.175 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should create client template mapping</font>

  Client Template Handler as anonymous
    GET
2020-06-30T18:58:48.859Z - <font color="#C4A000">warn</font>: [d8af7b40-eeb2-4bde-a26b-24c41ae7c30b] Request failed:  {  url: &apos;/template&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:48.860Z [d8af7b40-eeb2-4bde-a26b-24c41ae7c30b] GET /template 403 - 0.621 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not allowed</font>

  Clients Handler with authorization
    GET
2020-06-30T18:58:48.862Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /clients! host=127.0.0.1:35259, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.870Z [84840cd0-ef19-45ac-bbd4-39c53247d8cd] GET /clients 200 - 8.209 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all clients</font>
2020-06-30T18:58:48.873Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for GET /clients?limit=100! host=127.0.0.1:38879, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.877Z [cfc45810-f24d-4114-acd8-9c539304fdb7] GET /clients?limit=100 200 - 4.198 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve up to 100 clients</font>
    POST
2020-06-30T18:58:48.879Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /clients! host=127.0.0.1:35597, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:48.880Z - <font color="#C4A000">warn</font>: [8d518421-2e7b-4bed-bb63-cb194d64ce8d] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.880Z [8d518421-2e7b-4bed-bb63-cb194d64ce8d] POST /clients 405 - 0.996 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:58:48.883Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PUT /clients! host=127.0.0.1:36161, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:48.883Z - <font color="#C4A000">warn</font>: [6edeefa8-6755-47f5-bb8d-4fda064e5e71] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.884Z [6edeefa8-6755-47f5-bb8d-4fda064e5e71] PUT /clients 405 - 1.039 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PATCH
2020-06-30T18:58:48.886Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for PATCH /clients! host=127.0.0.1:43895, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:48.886Z - <font color="#C4A000">warn</font>: [712157ac-e2fa-4be2-9af0-70460f9c7b35] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.887Z [712157ac-e2fa-4be2-9af0-70460f9c7b35] PATCH /clients 405 - 0.957 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    DELETE
2020-06-30T18:58:48.889Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for DELETE /clients! host=127.0.0.1:34385, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.889Z - <font color="#C4A000">warn</font>: [ea0a2327-20c1-4c4e-b14f-ce2ff8ebc8e0] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;c8d01b88-b330-4b51-9384-e8e5c967ab18&apos;} status=7
2020-06-30T18:58:48.890Z [ea0a2327-20c1-4c4e-b14f-ce2ff8ebc8e0] DELETE /clients 405 - 0.779 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>

  Clients Handler as administrator
2020-06-30T18:58:48.892Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for POST /client! host=127.0.0.1:45815, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, content-length=257, connection=close
2020-06-30T18:58:48.899Z [0b876a46-5dae-4db4-89fc-e52e1a175fd4] POST /client 200 - 6.862 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]
    GET
2020-06-30T18:58:48.906Z [ab1302a7-b211-4ae3-808d-5fd31ad0bed2] GET /clients?extent=application 200 - 4.441 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all accessible clients and include application keys</font>
2020-06-30T18:58:48.908Z - <font color="#C4A000">warn</font>: [SECURITY] Super-admin client usage detected for DELETE /client/78287b40-069a-4fe0-9e99-d8c2312451f3! host=127.0.0.1:37603, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyIDo=, content-type=application/json, connection=close
2020-06-30T18:58:48.910Z [d764ed7e-08cc-45a7-a096-129107a79402] DELETE /client/78287b40-069a-4fe0-9e99-d8c2312451f3 200 - 1.886 ms [c8d01b88-b330-4b51-9384-e8e5c967ab18]

  Clients Handler as user
    GET
2020-06-30T18:58:48.912Z - <font color="#C4A000">warn</font>: [a5eca935-c1da-4239-b601-da96ac73843b] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:48.913Z [a5eca935-c1da-4239-b601-da96ac73843b] GET /clients 403 - 0.739 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error</font>

  Clients Handler as anonymous
    GET
2020-06-30T18:58:48.915Z - <font color="#C4A000">warn</font>: [89f6c5c4-78d4-413f-ba3d-9d1c41605c8f] Request failed:  {  url: &apos;/clients&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:48.915Z [89f6c5c4-78d4-413f-ba3d-9d1c41605c8f] GET /clients 403 - 0.539 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error</font>

  Customer Handler as admin
    GET
2020-06-30T18:58:48.919Z - <font color="#C4A000">warn</font>: [aac88216-ac11-4345-9d20-2fdc4be8f998] Request failed:  {  url: &apos;/customer&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:48.919Z [aac88216-ac11-4345-9d20-2fdc4be8f998] GET /customer 422 - 2.657 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no id provided</font>
2020-06-30T18:58:48.924Z - <font color="#C4A000">warn</font>: [b55bb32e-5300-42ec-8448-0cbcab34f929] Request failed:  {  url: &apos;/customer/b703b710-3a1f-11e6-83d8-d3334a6e3894&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:48.924Z [b55bb32e-5300-42ec-8448-0cbcab34f929] GET /customer/b703b710-3a1f-11e6-83d8-d3334a6e3894 404 - 3.028 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if customer doesn&apos;t exist</font>
    PUT
2020-06-30T18:58:48.935Z [25979e68-5e3e-4dea-b66a-742ae86ece4d] PUT /customer 200 - 7.710 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new customer to system with a new address</font>
2020-06-30T18:58:48.944Z [3db4c7f9-7f18-41c4-9332-7fa30847ceae] GET /customer/b5b6c0b1-aae3-4421-951a-6c0ace1116d6 200 - 6.624 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get the new customer</font>
2020-06-30T18:58:48.955Z [5ec5d55f-41de-4c1e-9693-3ed7eb235acc] POST /customer 200 - 8.694 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add a new customer if matching existing by address id</font>
2020-06-30T18:58:48.961Z - <font color="#C4A000">warn</font>: [e95b6038-fea4-41f1-ba02-12e975b6e5b9] Request failed: Failed to find address {  url: &apos;/customer&apos;,  method: &apos;PUT&apos;,  body: &apos;{&quot;name&quot;:&quot;Whole Foods&quot;,&quot;address&quot;:&quot;1b16b4ca-9054-438c-90b3-0aa8600ba363&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Failed to find address
2020-06-30T18:58:48.961Z [e95b6038-fea4-41f1-ba02-12e975b6e5b9] PUT /customer 404 - 3.753 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add a customer with a non-existent address id</font>
2020-06-30T18:58:48.983Z [28c990ab-e59c-4394-81ba-bf1b8031b89f] PUT /customer 200 - 18.569 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new customer with both pickup and delivery details</font>
2020-06-30T18:58:48.994Z [0bc2d7db-6d74-46ed-a3e9-112753a050fb] PUT /customer 200 - 8.793 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not add a new customer matching existing EUID</font>
2020-06-30T18:58:49.007Z [b9ab8c0b-ea5c-4d6b-be9a-db51189a6e1f] PUT /customer 200 - 10.220 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new customer with only pickup but no delivery details</font>
2020-06-30T18:58:49.021Z [549b505e-e7bd-4a76-b522-854ab9d4e6c5] PUT /customer 200 - 10.776 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new customer with only delivery but no pickup details</font>
    PATCH
2020-06-30T18:58:49.028Z [8c37ea94-d73a-46ed-96af-e18052e8349f] PATCH /customer/b5b6c0b1-aae3-4421-951a-6c0ace1116d6 200 - 4.046 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:49.032Z [98cc8608-ad18-432f-95b2-8f9c070cd6c1] GET /customer/b5b6c0b1-aae3-4421-951a-6c0ace1116d6 200 - 3.185 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update existing customer name</font>
    DELETE
2020-06-30T18:58:49.038Z [636f4131-a61d-4feb-9554-f510190b0d11] DELETE /customer/b5b6c0b1-aae3-4421-951a-6c0ace1116d6 200 - 3.486 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the customer from the database</font>
2020-06-30T18:58:49.043Z [7d1ce9b5-c6f4-426a-94a3-9f52eba5362d] DELETE /customer/e3331a92-f3a9-4a5d-b669-bec70d3170dd 200 - 3.373 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the customer with euid 1001 from the database</font>
2020-06-30T18:58:49.048Z [2696ad57-1413-47d8-8764-cea4fac02b35] DELETE /customer/673fcddb-19b3-4f80-bcb2-28de1e40701b 200 - 3.250 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the customer with euid 2001 from the database</font>
2020-06-30T18:58:49.053Z [1fc5b270-476f-46cc-948e-d9ded9757d4f] DELETE /customer/691304dc-cb16-4812-8f58-5c556337f331 200 - 3.309 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the customer with euid 3001 from the database</font>

  Customer Handler as anonymous
    DELETE
2020-06-30T18:58:49.055Z - <font color="#C4A000">warn</font>: [ad637fe2-b73f-432f-8210-155faab78156] Request failed:  {  url: &apos;/customer/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:49.056Z [ad637fe2-b73f-432f-8210-155faab78156] DELETE /customer/testId 403 - 0.625 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Customer Handler as driver
    DELETE
2020-06-30T18:58:49.059Z - <font color="#C4A000">warn</font>: [84192ff2-3e84-4462-9a85-53561d401ab7] Request failed:  {  url: &apos;/customer/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:49.059Z [84192ff2-3e84-4462-9a85-53561d401ab7] DELETE /customer/testId 403 - 0.727 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Customer Portal Handler
2020-06-30T18:58:49.067Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:58:49.070Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:49.070Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:49.070Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:49.070Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:49.070Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:49.070Z - <font color="#4E9A06">info</font>: Deleted 5 tasks
2020-06-30T18:58:49.070Z - <font color="#4E9A06">info</font>: Reset all: tasks + assignments have been removed for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:49.073Z - <font color="#4E9A06">info</font>: Removed 0 location updates for bc288d85-1cf5-47ce-8c8e-efc831254b4f
2020-06-30T18:58:49.074Z - <font color="#4E9A06">info</font>: Reset drivers + tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:49.074Z [23f1994a-40d3-467e-92e4-e906d8e09124] POST /admin?action=reset_all 200 - 12.993 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    POST
2020-06-30T18:58:50.122Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:50.126Z [8730b1e4-4d45-42a6-91c2-609cbd37cee9] PUT /task 200 - 43.058 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:50.126Z - <font color="#4E9A06">info</font>: TaskJson 9bf88142-afda-4fa7-8a87-5700cdf2157d saved
2020-06-30T18:58:50.208Z [9714365b-d02d-4baa-afb5-6d57bb806de2] POST /driver 200 - 79.485 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:50.217Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.created
2020-06-30T18:58:50.225Z - <font color="#4E9A06">info</font>: Added assignment 22b76563-a13d-4a86-b548-b229ec2fba76
2020-06-30T18:58:50.225Z [d0857e9b-c4ad-4e2b-b003-5a2f9feec9a9] POST /assignment 200 - 16.174 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:50.714Z - <font color="#CC0000">error</font>: Assignment update from CEP response failed with {&quot;_id&quot;:&quot;13a4d1b3-b6ff-4484-8075-4cccec85b307&quot;,&quot;client&quot;:{&quot;$in&quot;:[&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;]}} status=12, cause=[b0681a90-bb03-11ea-baae-83f23072a5d8] CEP response timed out for message wise.command.assignment.update_status
    <font color="#4E9A06">  ✓</font><font color="#555753"> should create a portal when a new assignment is added</font><font color="#CC0000"> (651ms)</font>
    GET
2020-06-30T18:58:50.734Z - <font color="#CC0000">error</font>: Assignment update from CEP response failed with {&quot;_id&quot;:&quot;13a4d1b3-b6ff-4484-8075-4cccec85b307&quot;,&quot;client&quot;:{&quot;$in&quot;:[&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;]}} status=12, cause=[b06ad9b0-bb03-11ea-baae-83f23072a5d8] CEP response timed out for message wise.command.assignment.update_status
2020-06-30T18:58:50.748Z - <font color="#CC0000">error</font>: Assignment update from CEP response failed with {&quot;_id&quot;:&quot;13a4d1b3-b6ff-4484-8075-4cccec85b307&quot;,&quot;client&quot;:{&quot;$in&quot;:[&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;]}} status=12, cause=[b06d23a0-bb03-11ea-baae-83f23072a5d8] CEP response timed out for message wise.command.assignment.update_status
2020-06-30T18:58:50.759Z [1785b9fb-79f6-4cdc-a176-e3620d5e0161] GET /order?token=bYCUda4dyOM 200 - 23.254 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should request delivery info with valid token</font>
2020-06-30T18:58:50.763Z - <font color="#CC0000">error</font>: Assignment update from CEP response failed with {&quot;_id&quot;:&quot;13a4d1b3-b6ff-4484-8075-4cccec85b307&quot;,&quot;client&quot;:{&quot;$in&quot;:[&quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;]}} status=12, cause=[b06f6d90-bb03-11ea-baae-83f23072a5d8] CEP response timed out for message wise.command.assignment.update_status
2020-06-30T18:58:50.767Z - <font color="#C4A000">warn</font>: [2d3203f0-d8c9-4ab9-97e2-03f6aa5bd61e] Request failed:  {  url: &apos;/order?token=pseudo-ToKeN&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=2
2020-06-30T18:58:50.768Z [2d3203f0-d8c9-4ab9-97e2-03f6aa5bd61e] GET /order?token=pseudo-ToKeN 404 - 2.768 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should receive 404 error with invalid token</font>
2020-06-30T18:58:50.770Z - <font color="#C4A000">warn</font>: [335a52c1-6c74-46f5-aabe-02b7062408db] Request failed:  {  url: &apos;/order?token=&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=6
2020-06-30T18:58:50.770Z [335a52c1-6c74-46f5-aabe-02b7062408db] GET /order?token= 422 - 0.514 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should receive 422 error with no token</font>
2020-06-30T18:58:50.777Z - <font color="#4E9A06">info</font>: Deleted 1 assignments
2020-06-30T18:58:50.778Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.deleted
2020-06-30T18:58:50.779Z - <font color="#4E9A06">info</font>: Deleted 1 tasks
2020-06-30T18:58:50.779Z - <font color="#4E9A06">info</font>: Reset all: tasks + assignments have been removed for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:50.782Z - <font color="#4E9A06">info</font>: Removed 0 location updates for 83fd47e8-ec36-4cdd-af52-af17fb5d6508
2020-06-30T18:58:50.783Z - <font color="#4E9A06">info</font>: Reset drivers + tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:50.784Z [cf285dc0-9736-442d-aeef-c44509093702] POST /admin?action=reset_all 200 - 11.302 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]

  Customers Handler as admin
    GET
2020-06-30T18:58:51.815Z [970da9f8-ecdd-40a7-b598-d2c2e0e744bf] GET /customers 200 - 22.587 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve all customers</font>
2020-06-30T18:58:51.828Z [016618c1-9909-4da9-b257-bbb11f9f0f4f] GET /customers?limit=100 200 - 7.998 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should retrieve up to 100 customers</font>
    POST
2020-06-30T18:58:51.833Z - <font color="#C4A000">warn</font>: [c2294353-4546-49d1-a241-025ded4c5764] Request failed:  {  url: &apos;/customers&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:51.834Z [c2294353-4546-49d1-a241-025ded4c5764] POST /customers 405 - 3.475 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PUT
2020-06-30T18:58:51.839Z - <font color="#C4A000">warn</font>: [f674df99-12e5-4ccb-be0a-e8fe60206467] Request failed:  {  url: &apos;/customers&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:51.839Z [f674df99-12e5-4ccb-be0a-e8fe60206467] PUT /customers 405 - 3.222 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    PATCH
2020-06-30T18:58:51.844Z - <font color="#C4A000">warn</font>: [9ba50ab1-45ef-4b8b-853e-0d2e159bc9ac] Request failed:  {  url: &apos;/customers&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:51.844Z [9ba50ab1-45ef-4b8b-853e-0d2e159bc9ac] PATCH /customers 405 - 3.045 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>
    DELETE
2020-06-30T18:58:51.848Z - <font color="#C4A000">warn</font>: [997db611-6f51-4089-a15f-62ae3bee9604] Request failed:  {  url: &apos;/customers&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:51.849Z [997db611-6f51-4089-a15f-62ae3bee9604] DELETE /customers 405 - 2.520 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if method not available</font>

  Customers Handler Search as admin
    PUT customers to allow for search
2020-06-30T18:58:51.862Z [b8e86ecb-68a5-48f6-b954-9cf4e7c50975] PUT /customer 200 - 10.383 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address WISE SYSTEMS and contact undefined</font>
2020-06-30T18:58:51.878Z [853c3b62-88df-4e18-82f6-45ccad727e90] PUT /customer 200 - 13.301 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address AEROPLANE and contact undefined</font>
2020-06-30T18:58:51.895Z [0ddee7b6-f6e8-4395-a42b-98e9305a6bb6] PUT /customer 200 - 13.174 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address AEROSPACE and contact undefined</font>
2020-06-30T18:58:51.911Z [4312d60f-8266-4b0a-aa32-138e9f2204a3] PUT /customer 200 - 12.716 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address Test 1 and contact {&quot;name&quot;:&quot;First Last&quot;,&quot;phone&quot;:&quot;+12345551234&quot;}</font>
2020-06-30T18:58:51.934Z [3a922c2e-03ae-4480-ba6b-3d2c6d92bfb8] PUT /customer 200 - 19.318 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address Test 2 and contact {&quot;name&quot;:&quot;First Last&quot;,&quot;email&quot;:&quot;test@example.com&quot;}</font>
2020-06-30T18:58:51.946Z [f55d73d6-f920-4cc3-b651-9bf2a668da79] PUT /customer 200 - 9.486 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a customer with address Test 3 and contact {&quot;name&quot;:&quot;First Last2&quot;,&quot;phone&quot;:&quot;+12345551111&quot;,&quot;email&quot;:&quot;anothertest@example.com&quot;}</font>
    GET - as admin
2020-06-30T18:58:51.955Z - <font color="#C4A000">warn</font>: [a468cb30-8e38-43b2-8eb5-58cb7f4236c7] Request failed: Filter cannot be used with other query parameters {  url: &apos;/customers?filter=test&amp;name=test&amp;limit=1000&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Filter cannot be used with other query parameters
2020-06-30T18:58:51.956Z [a468cb30-8e38-43b2-8eb5-58cb7f4236c7] GET /customers?filter=test&amp;name=test&amp;limit=1000 422 - 6.171 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:51.956Z - <font color="#C4A000">warn</font>: [e3f1d6c3-f07a-4260-a780-b18b12f59158] Request failed: Filter cannot be used with other query parameters {  url: &apos;/customers?filter=test&amp;email=test&amp;limit=1000&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Filter cannot be used with other query parameters
2020-06-30T18:58:51.956Z [e3f1d6c3-f07a-4260-a780-b18b12f59158] GET /customers?filter=test&amp;email=test&amp;limit=1000 422 - 5.542 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:51.957Z - <font color="#C4A000">warn</font>: [f97ada9b-a546-4fb2-b8e2-e6e22d9452f7] Request failed: Filter cannot be used with other query parameters {  url: &apos;/customers?filter=test&amp;phone=test&amp;limit=1000&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Filter cannot be used with other query parameters
2020-06-30T18:58:51.957Z [f97ada9b-a546-4fb2-b8e2-e6e22d9452f7] GET /customers?filter=test&amp;phone=test&amp;limit=1000 422 - 5.171 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:51.959Z - <font color="#C4A000">warn</font>: [a9b27a2d-09a5-4fff-a098-70756c440082] Request failed: Filter cannot be used with other query parameters {  url: &apos;/customers?filter=test&amp;name=test&amp;email=test&amp;phone=test&amp;limit=1000&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Filter cannot be used with other query parameters
2020-06-30T18:58:51.959Z [a9b27a2d-09a5-4fff-a098-70756c440082] GET /customers?filter=test&amp;name=test&amp;email=test&amp;phone=test&amp;limit=1000 422 - 5.633 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should not allow inputs with both filter and PII params</font>
2020-06-30T18:58:51.970Z [7954977d-cf3e-4b56-aa71-66d1ca9d9d05] GET /customers?filter=space&amp;limit=1000 200 - 9.305 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search for a customer named AEROSPACE</font>
2020-06-30T18:58:51.977Z [6695c04b-8ffe-4fcc-bcbd-2c340ea3dee0] GET /customers?filter=aero&amp;limit=1000 200 - 4.384 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return two customers for search term ar</font>
2020-06-30T18:58:51.981Z [0d38e177-d6f3-4b33-8fbc-02d21f5046df] GET /customers?filter=earth&amp;limit=4000&amp;socket=1 200 - 2.484 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search for a customer named AEROSPACE - and send socket response</font>
2020-06-30T18:58:51.983Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.socket.app.data
2020-06-30T18:58:51.986Z - <font color="#C4A000">warn</font>: [4ab09c71-b5eb-403f-a125-d106fca76c0a] Request failed: Minimum of 3 characters required {  url: &apos;/customers?filter=ea&amp;limit=4000&amp;socket=1&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Minimum of 3 characters required
2020-06-30T18:58:51.987Z [4ab09c71-b5eb-403f-a125-d106fca76c0a] GET /customers?filter=ea&amp;limit=4000&amp;socket=1 422 - 2.348 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search error on search with less than 3 characters</font>
2020-06-30T18:58:51.993Z [9fd461aa-99d2-4c4d-a76e-3dced82f1146] GET /customers?phone=%2B12345551234&amp;limit=1000 200 - 4.009 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by phone</font>
2020-06-30T18:58:51.999Z [3de63432-de17-4edb-801d-3c039e188662] GET /customers?phone=%2B12345551234&amp;name=First%20Last&amp;limit=1000 200 - 3.975 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by phone+name</font>
2020-06-30T18:58:52.007Z [454dea90-d525-45d8-8602-c36f08b010df] GET /customers?email=test@example.com&amp;limit=1000 200 - 4.043 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by email</font>
2020-06-30T18:58:52.013Z [60b5c290-a528-4a4c-9411-2cfa44d1b31b] GET /customers?email=test@example.com&amp;name=First%20Last&amp;limit=1000 200 - 3.897 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by email+name</font>
2020-06-30T18:58:52.019Z [5b3f6c5d-1618-4604-9543-890bd0bd7dbe] GET /customers?email=anothertest@example.com&amp;phone=%2B12345551111&amp;limit=1000 200 - 3.781 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by phone+email</font>
2020-06-30T18:58:52.025Z [e8b2b4e1-0de8-4d42-a48e-15ae8250b57d] GET /customers?email=anothertest@example.com&amp;phone=%2B12345551111&amp;limit=1000 200 - 3.706 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII by phone+email+name</font>
2020-06-30T18:58:52.031Z [8f7f652b-9b05-49f3-afc4-f10815b318cd] GET /customers?name=First%20Last&amp;limit=1000 200 - 4.159 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII for 2 results by name</font>
2020-06-30T18:58:52.036Z [5fa9f305-2747-4b49-96a9-4f7db8c75432] GET /customers?phone=%2B1234555123&amp;limit=1000 200 - 2.945 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII with no phone match</font>
2020-06-30T18:58:52.041Z [5cb2db5e-5428-4a3d-8079-0c00ef980dce] GET /customers?email=est@example.com&amp;limit=1000 200 - 2.919 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII with no email match</font>
2020-06-30T18:58:52.046Z [e9fffe6d-a626-4b23-890b-3666f731475c] GET /customers?email=anothertest@example.com&amp;phone=%2B12345551111&amp;name=First%20Las&amp;limit=1000 200 - 2.956 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should search PII with no name match with multiple fields</font>
    DELETE
2020-06-30T18:58:52.094Z [e1c62aac-9b9c-49b2-911e-8553fdafe122] DELETE /customer/7d325d7f-65f1-493d-8d3e-f62cc545a99e 200 - 15.534 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.095Z [f266c3ab-6a87-499c-8539-f12ce3afbc72] DELETE /customer/fce5c3fb-7622-45dd-b188-8dfd1d02df1e 200 - 15.055 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.096Z [134b5ef1-a6b3-4197-8e43-4338e4c1d0a7] DELETE /customer/972e7fac-2f6f-447a-8f1b-04fbb312d0c6 200 - 14.777 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.096Z [22a59e74-6c1c-4424-8921-7eab346adbaf] DELETE /customer/9cfa9663-193d-47df-bfa4-98cf4681a04e 200 - 14.458 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.098Z [72d6daeb-b0f5-4ae2-9c46-9c06a786ba1a] DELETE /customer/628ea769-86fb-45d3-849b-26875ad44d62 200 - 14.583 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.101Z [889fdbf4-4c6b-4d2e-947e-0481ffe87cf1] DELETE /customer/1535c73f-7347-4d48-a1ee-c31f994ac0f4 200 - 15.453 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should delete all added customers from the database</font><font color="#C4A000"> (54ms)</font>

  Customers Handler as driver
    GET
2020-06-30T18:58:52.107Z - <font color="#C4A000">warn</font>: [d4d07cec-1efb-4d01-9747-ad4e00189a36] Request failed:  {  url: &apos;/customers&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.107Z [d4d07cec-1efb-4d01-9747-ad4e00189a36] GET /customers 403 - 0.937 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Customers Handler as anonymous
    GET
2020-06-30T18:58:52.110Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for GET /customers host=127.0.0.1:41335, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close
2020-06-30T18:58:52.110Z [70f5c360-7737-44ef-9f91-027cb950bb0a] GET /customers 401 - 0.401 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    PATCH
2020-06-30T18:58:52.113Z - <font color="#4E9A06">info</font>: undefined user(s) unsubscribed contact.email=foo@bar.com
2020-06-30T18:58:52.113Z [4843dc00-9fad-42f2-afb9-da66e43483cf] PATCH /customers?action=unsubscribe&amp;email=foo@bar.com 200 - 1.367 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should unsubscribe by email</font>
2020-06-30T18:58:52.116Z - <font color="#4E9A06">info</font>: undefined user(s) unsubscribed contact.phone=5551234567
2020-06-30T18:58:52.116Z [1583baec-9bca-4ef4-a6a2-211b7159bca0] PATCH /customers?action=unsubscribe&amp;phone=5551234567 200 - 0.876 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should unsubscribe by phone</font>
2020-06-30T18:58:52.119Z - <font color="#4E9A06">info</font>: undefined user(s) unsubscribed contact.email=foo@bar.com, contact.phone=5551234567
2020-06-30T18:58:52.120Z [72555963-24c9-40ef-bbf2-4d61f27b8268] PATCH /customers?action=unsubscribe&amp;phone=5551234567&amp;email=foo@bar.com 200 - 0.942 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should unsubscribe by email and phone</font>
2020-06-30T18:58:52.122Z - <font color="#C4A000">warn</font>: [494ea0af-1467-49bc-bb52-64ab762def61] Request failed:  {  url: &apos;/customers?action=unsubscribe&amp;email=&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=6
2020-06-30T18:58:52.123Z [494ea0af-1467-49bc-bb52-64ab762def61] PATCH /customers?action=unsubscribe&amp;email= 422 - 1.137 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to unsubscribe if empty email</font>
2020-06-30T18:58:52.125Z - <font color="#C4A000">warn</font>: [9177abb2-9067-48a0-8246-891cacc59110] Request failed:  {  url: &apos;/customers?action=unsubscribe&amp;phone=&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=6
2020-06-30T18:58:52.125Z [9177abb2-9067-48a0-8246-891cacc59110] PATCH /customers?action=unsubscribe&amp;phone= 422 - 0.489 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to unsubscribe if empty phone</font>
2020-06-30T18:58:52.127Z - <font color="#C4A000">warn</font>: [0aa833dd-56a1-4d2b-8d64-d4cef3c23f17] Request failed:  {  url: &apos;/customers?action=unsubscribe&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=6
2020-06-30T18:58:52.127Z [0aa833dd-56a1-4d2b-8d64-d4cef3c23f17] PATCH /customers?action=unsubscribe 422 - 0.470 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if not enough info to unsubscribe</font>
2020-06-30T18:58:52.129Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for PATCH /customers host=127.0.0.1:43755, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:52.129Z [89304121-878e-4cb7-a0b0-6cbbb2ee1f29] PATCH /customers 401 - 0.365 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    POST
2020-06-30T18:58:52.131Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for POST /customers host=127.0.0.1:35357, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:58:52.131Z [84b2f4a4-0253-4561-a615-3c5fbc0a05f1] POST /customers 401 - 0.387 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Depot Handler with authorization
    POST
2020-06-30T18:58:52.142Z [55febfff-b4f8-47d7-a6bd-ea4f2e286b29] POST /depot 200 - 8.749 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new depot</font>
2020-06-30T18:58:52.157Z - <font color="#C4A000">warn</font>: [6e2c0612-d6f8-498b-bbd1-139679b76fed] Request failed: E11000 duplicate key error collection: wise_dev.depots index: client_1_address_1 dup key: { client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;, address: &quot;ecbc20c0-3de7-11e5-8b33-853f5f93eb82&quot; } {  url: &apos;/depot&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;address&quot;:&quot;ecbc20c0-3de7-11e5-8b33-853f5f93eb82&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=E11000 duplicate key error collection: wise_dev.depots index: client_1_address_1 dup key: { client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;, address: &quot;ecbc20c0-3de7-11e5-8b33-853f5f93eb82&quot; }, stack=MongoError: E11000 duplicate key error collection: wise_dev.depots index: client_1_address_1 dup key: { client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;, address: &quot;ecbc20c0-3de7-11e5-8b33-853f5f93eb82&quot; }
    at Connection.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/pool.js:450:61)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at processMessage (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connection.js:384:10)
    at Socket.&lt;anonymous&gt; (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/mongodb/lib/core/connection/connection.js:553:15)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at addChunk (_stream_readable.js:295:12)
    at readableAddChunk (_stream_readable.js:271:9)
    at Socket.Readable.push (_stream_readable.js:212:10)
    at TCP.onStreamRead (internal/stream_base_commons.js:186:23), ok=0, errmsg=E11000 duplicate key error collection: wise_dev.depots index: client_1_address_1 dup key: { client: &quot;5c087850-2a99-11e5-9189-eb07c479dfd5&quot;, address: &quot;ecbc20c0-3de7-11e5-8b33-853f5f93eb82&quot; }, code=11000, codeName=DuplicateKey, client=1, address=1, client=5c087850-2a99-11e5-9189-eb07c479dfd5, address=ecbc20c0-3de7-11e5-8b33-853f5f93eb82, name=MongoError
2020-06-30T18:58:52.159Z [6e2c0612-d6f8-498b-bbd1-139679b76fed] POST /depot 409 - 14.438 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject adding a non-HQ depot located at HQ address</font>
2020-06-30T18:58:52.164Z - <font color="#C4A000">warn</font>: [f96a8437-e315-40c2-92e1-a030326241b7] Request failed: Can&apos;t create HQ depots {  url: &apos;/depot&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;address&quot;:&quot;ecbc21d1-3de7-11e5-8b33-853f5f93eb82&quot;,&quot;hq&quot;:true}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Can&apos;t create HQ depots
2020-06-30T18:58:52.164Z [f96a8437-e315-40c2-92e1-a030326241b7] POST /depot 422 - 3.134 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject adding an HQ depot</font>
2020-06-30T18:58:52.169Z - <font color="#C4A000">warn</font>: [5db0c772-d25c-46b7-b626-cb929ccf2840] Request failed: Address not found {  url: &apos;/depot&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;address&quot;:&quot;00000000-0000-0000-0000-000000000000&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Address not found
2020-06-30T18:58:52.169Z [5db0c772-d25c-46b7-b626-cb929ccf2840] POST /depot 404 - 3.256 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if an unknown address id provided</font>
    GET
2020-06-30T18:58:52.174Z - <font color="#C4A000">warn</font>: [528bd5b4-6e5e-427c-9672-11ad8ae81708] Request failed:  {  url: &apos;/depot&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:52.174Z [528bd5b4-6e5e-427c-9672-11ad8ae81708] GET /depot 422 - 2.447 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no id provided</font>
2020-06-30T18:58:52.179Z [67ebeec5-2a43-43a6-9d14-3b9711132af2] GET /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 200 - 3.508 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get the new depot</font>
    PATCH
2020-06-30T18:58:52.187Z [63aaabe2-c4a7-4221-84ef-a307025a0b2e] PATCH /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 200 - 4.741 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:52.192Z [0244ce37-690d-4861-80db-0ddbbfc25db3] GET /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 200 - 3.293 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should modify depot address and eid</font>
2020-06-30T18:58:52.197Z - <font color="#C4A000">warn</font>: [c2c74374-34ed-4bd9-a801-77c206936f84] Request failed:  {  url: &apos;/depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:52.197Z [c2c74374-34ed-4bd9-a801-77c206936f84] PATCH /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 422 - 3.067 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if no address provided</font>
2020-06-30T18:58:52.202Z - <font color="#C4A000">warn</font>: [cc6fd59d-670a-4b2b-ba2c-8029f6d740b9] Request failed:  {  url: &apos;/depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;hq&quot;:true}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:52.202Z [cc6fd59d-670a-4b2b-ba2c-8029f6d740b9] PATCH /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 422 - 2.807 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject HQ property update</font>
    DELETE
2020-06-30T18:58:52.207Z [93c3c9a6-5dfd-4ff2-afd4-310b85a60ff6] DELETE /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 200 - 3.553 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove the depot</font>
2020-06-30T18:58:52.212Z - <font color="#C4A000">warn</font>: [30822be3-4775-498b-acea-7434c0ac0987] Request failed: Depot doesn&apos;t exist or is an HQ {  url: &apos;/depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Depot doesn&apos;t exist or is an HQ
2020-06-30T18:58:52.213Z - <font color="#C4A000">warn</font>: Response has already been sent for /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8. Not sending
2020-06-30T18:58:52.213Z [30822be3-4775-498b-acea-7434c0ac0987] DELETE /depot/e9d2c28b-bf48-4ec9-a8ce-f98f00bc08e8 422 - 3.261 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to remove a non-existent depot</font>
2020-06-30T18:58:52.218Z - <font color="#C4A000">warn</font>: [9121e003-1555-4c6a-93ab-9a61dc93d280] Request failed: Depot doesn&apos;t exist or is an HQ {  url: &apos;/depot/07621a12-d318-4a14-a97e-909b36eb0258&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Depot doesn&apos;t exist or is an HQ
2020-06-30T18:58:52.218Z - <font color="#C4A000">warn</font>: Response has already been sent for /depot/07621a12-d318-4a14-a97e-909b36eb0258. Not sending
2020-06-30T18:58:52.218Z [9121e003-1555-4c6a-93ab-9a61dc93d280] DELETE /depot/07621a12-d318-4a14-a97e-909b36eb0258 422 - 3.326 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should reject deleting the HQ depot</font>

  Depot Routes with authorization
    POST
2020-06-30T18:58:52.229Z [6de378c4-7bc6-4b15-b84b-ebbc9380df4a] POST /depot/17621a12-d318-4a14-a97e-909b36eb0258/route 200 - 6.146 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new depot route association</font>
2020-06-30T18:58:52.238Z [1645581e-4d9b-4213-b1f4-e19477e826b4] POST /depot/17621a12-d318-4a14-a97e-909b36eb0258/route 200 - 5.423 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return existing association if posted again</font>
2020-06-30T18:58:52.243Z - <font color="#C4A000">warn</font>: [a38e6981-2e67-48c8-b86d-df3271c3bce2] Request failed:  {  url: &apos;/depot/17621a12-d318-4a14-a97e-909b36eb0258/route&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:52.243Z [a38e6981-2e67-48c8-b86d-df3271c3bce2] POST /depot/17621a12-d318-4a14-a97e-909b36eb0258/route 422 - 3.083 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if no route EID provided</font>
2020-06-30T18:58:52.248Z - <font color="#C4A000">warn</font>: [3137d4c1-b290-43a7-a73c-00d683893fa5] Request failed: Depot not found {  url: &apos;/depot/17621a12-d318-4a14-a97e-909b36eb0258/route&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;routeId&quot;:&quot;DEF123&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Depot not found
2020-06-30T18:58:52.248Z [3137d4c1-b290-43a7-a73c-00d683893fa5] POST /depot/17621a12-d318-4a14-a97e-909b36eb0258/route 404 - 3.134 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail if an unknown depot id provided</font>
    GET
2020-06-30T18:58:52.254Z [91ed5579-b50e-409d-8604-0f4f1ce80302] GET /depot/17621a12-d318-4a14-a97e-909b36eb0258/routes 200 - 3.544 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should get assigned depot routes</font>
    DELETE
2020-06-30T18:58:52.260Z [8d782f99-d5e9-4b58-902b-c985ba7dc180] DELETE /depot/17621a12-d318-4a14-a97e-909b36eb0258/route/ABC123 200 - 3.564 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should remove depot route associations</font>
2020-06-30T18:58:52.266Z [0118e322-8774-4b10-8f24-deaa8e9d3497] DELETE /depot/17621a12-d318-4a14-a97e-909b36eb0258/route/ABC123 200 - 3.257 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return success if doesn&apos;t exist</font>

  Depot Handler as anonymous
    GET
2020-06-30T18:58:52.270Z - <font color="#C4A000">warn</font>: [60657ef0-a09c-481e-9f13-9ed31e92cda8] Request failed:  {  url: &apos;/depot/testId&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:52.270Z [60657ef0-a09c-481e-9f13-9ed31e92cda8] GET /depot/testId 403 - 0.904 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    DELETE
2020-06-30T18:58:52.276Z - <font color="#C4A000">warn</font>: [76a5dd60-c258-4b12-961b-eb0d02c8051b] Request failed:  {  url: &apos;/depot/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:52.276Z [76a5dd60-c258-4b12-961b-eb0d02c8051b] DELETE /depot/testId 403 - 0.657 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Depot Handler as driver
    GET
2020-06-30T18:58:52.279Z - <font color="#C4A000">warn</font>: [fc0a102c-41cc-4e27-a002-d495a26645b4] Request failed:  {  url: &apos;/depot/testId&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.279Z [fc0a102c-41cc-4e27-a002-d495a26645b4] GET /depot/testId 403 - 0.690 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    GET routes
2020-06-30T18:58:52.282Z - <font color="#C4A000">warn</font>: [5e52ca04-280a-444a-a247-ad36192fb7d6] Request failed:  {  url: &apos;/depot/testId/routes&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.282Z [5e52ca04-280a-444a-a247-ad36192fb7d6] GET /depot/testId/routes 403 - 0.697 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    POST routes
2020-06-30T18:58:52.284Z - <font color="#C4A000">warn</font>: [4a9fa26e-9772-4ad3-9e05-7164571e1f26] Request failed:  {  url: &apos;/depot/testId/routes&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.285Z [4a9fa26e-9772-4ad3-9e05-7164571e1f26] POST /depot/testId/routes 403 - 0.894 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>
    DELETE
2020-06-30T18:58:52.287Z - <font color="#C4A000">warn</font>: [6cf63dbe-36e3-44cd-8f83-735a6c64bfcc] Request failed:  {  url: &apos;/depot/testId&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.287Z [6cf63dbe-36e3-44cd-8f83-735a6c64bfcc] DELETE /depot/testId 403 - 0.678 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return Forbidden</font>

  Depots Handler with authorization
    GET
2020-06-30T18:58:52.292Z [a289d497-83a6-4b67-8b77-e7406503aedc] GET /depots 200 - 3.394 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should list all depots</font>
    PATCH
2020-06-30T18:58:52.297Z - <font color="#C4A000">warn</font>: [08118a7a-d027-4eb4-b648-6cb21df98974] Request failed:  {  url: &apos;/depots&apos;,  method: &apos;PATCH&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:52.298Z [08118a7a-d027-4eb4-b648-6cb21df98974] PATCH /depots 405 - 2.919 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>
    PUT
2020-06-30T18:58:52.302Z - <font color="#C4A000">warn</font>: [bb522921-cfb4-41eb-a41a-f46ad3e99b70] Request failed:  {  url: &apos;/depots&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:52.303Z [bb522921-cfb4-41eb-a41a-f46ad3e99b70] PUT /depots 405 - 2.976 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>
    DELETE
2020-06-30T18:58:52.306Z - <font color="#C4A000">warn</font>: [41d2eb16-9ce1-4ac0-9ab6-2666c4d5cbaa] Request failed:  {  url: &apos;/depots&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=7
2020-06-30T18:58:52.307Z [41d2eb16-9ce1-4ac0-9ab6-2666c4d5cbaa] DELETE /depots 405 - 2.289 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not supported</font>

  Depots Handler as anonymous
    GET
2020-06-30T18:58:52.309Z - <font color="#C4A000">warn</font>: [3b5d9366-09e8-4a25-b098-aaef8503f3fc] Request failed:  {  url: &apos;/depots&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:58:52.309Z [3b5d9366-09e8-4a25-b098-aaef8503f3fc] GET /depots 403 - 0.583 ms [anonymous]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not allowed</font>

  Depots Handler as driver
    GET
2020-06-30T18:58:52.312Z - <font color="#C4A000">warn</font>: [df10208d-6b43-47a3-a522-e3ece0fce250] Request failed:  {  url: &apos;/depots&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;testUser&apos;,  client: &apos;testClient&apos;} status=8
2020-06-30T18:58:52.312Z [df10208d-6b43-47a3-a522-e3ece0fce250] GET /depots 403 - 0.751 ms [testClient]
    <font color="#4E9A06">  ✓</font><font color="#555753"> is not allowed</font>

  Driver Handler
2020-06-30T18:58:52.318Z - <font color="#4E9A06">info</font>: Deleted 0 assignments
2020-06-30T18:58:52.319Z - <font color="#4E9A06">info</font>: Deleted 0 tasks
2020-06-30T18:58:52.319Z - <font color="#4E9A06">info</font>: Reset all: tasks + assignments have been removed for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:52.320Z - <font color="#4E9A06">info</font>: Reset drivers + tasks + assignments is now complete for 5c087850-2a99-11e5-9189-eb07c479dfd5
2020-06-30T18:58:52.321Z [faa8f065-4c76-40de-a1a9-5739a5aed647] POST /admin?action=reset_all 200 - 6.301 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:53.376Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:53.381Z [2826d2b3-157f-40a1-83d7-fb8f777a6cfb] PUT /task 200 - 45.600 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:53.382Z - <font color="#4E9A06">info</font>: TaskJson f2fea6cd-070c-480f-a903-1595d91daa04 saved
2020-06-30T18:58:53.401Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:53.404Z [b5ccd1bb-215a-42e1-b8ab-1b592ebeb398] PUT /task 200 - 20.568 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:53.404Z - <font color="#4E9A06">info</font>: TaskJson 894ba78a-bdfe-4b70-a77e-24cffb04685c saved
2020-06-30T18:58:53.423Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.task.created
2020-06-30T18:58:53.427Z [f447d42e-1e1f-4093-b1df-09a96296b555] PUT /task 200 - 20.546 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:53.427Z - <font color="#4E9A06">info</font>: TaskJson 8314f7ad-4f9c-4b9c-8f71-4b821e7fd306 saved
    GET with invalid parameters
2020-06-30T18:58:53.432Z - <font color="#C4A000">warn</font>: [5b493916-790a-4151-b92f-cecd5ea64353] Request failed:  {  url: &apos;/driver&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:53.432Z [5b493916-790a-4151-b92f-cecd5ea64353] GET /driver 422 - 3.231 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no id provided</font>
2020-06-30T18:58:53.437Z - <font color="#C4A000">warn</font>: [0b141e19-1921-4e36-af88-d40c959364f7] Request failed:  {  url: &apos;/driver/01393d20-5d64-11e6-8257-1910b1fdd40e&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:53.437Z [0b141e19-1921-4e36-af88-d40c959364f7] GET /driver/01393d20-5d64-11e6-8257-1910b1fdd40e 404 - 3.528 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return status 404 if not found</font>
    POST as admin
2020-06-30T18:58:53.516Z [28f5a79d-2b45-4457-bf36-d0b6eb5bda1c] POST /driver 200 - 76.566 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver with a new vehicle, sanitizing strings</font><font color="#CC0000"> (83ms)</font>
2020-06-30T18:58:53.598Z [82088e23-07ee-4b3b-8678-2519e45648a9] POST /driver 200 - 74.318 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver without a vehicle</font><font color="#CC0000"> (76ms)</font>
2020-06-30T18:58:53.667Z [e72d0d6b-54b8-4484-be5d-b9309c834148] POST /driver 200 - 66.225 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver and populate seven days of shift times if shiftTime specified but shiftTimes is not</font><font color="#C4A000"> (68ms)</font>
2020-06-30T18:58:53.737Z [0cacc89e-f980-4e65-855a-a0a567184eef] POST /driver 200 - 67.278 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver and use specified shiftTime value and specified shiftTimes value if both are in the payload</font><font color="#C4A000"> (69ms)</font>
2020-06-30T18:58:53.805Z [23b73a58-5ad5-4b45-a104-ce507d28328b] POST /driver 200 - 65.914 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver and use Monday&apos;s value for shiftTime if only shiftTimes is specified in the payload</font><font color="#C4A000"> (68ms)</font>
2020-06-30T18:58:53.875Z [ae77bd77-9c1b-4488-a50e-62fe4e4cc266] POST /driver 200 - 67.732 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver with empty object for shiftTimes and no shiftTime value if neither is specified in the payload</font><font color="#C4A000"> (70ms)</font>
2020-06-30T18:58:53.944Z [600ff0c5-492f-43a8-a2dd-ff5af94cc861] POST /driver 200 - 66.125 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver and ensure shiftTimes have positive durations even if user specifies shift end that&apos;s before shift start</font><font color="#C4A000"> (68ms)</font>
2020-06-30T18:58:53.952Z [269221ae-c27b-467e-a2aa-28fd7dec158f] POST /vehicle 200 - 5.629 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.023Z [d28ec9e5-3807-4dde-9611-b1c4b41c04f8] POST /driver 200 - 69.273 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new driver with an existing vehicle</font><font color="#CC0000"> (79ms)</font>
2020-06-30T18:58:54.032Z - <font color="#C4A000">warn</font>: [c5c96e1c-a046-48ed-ba2d-7ed51dc4c4ef] Request failed: Couldn&apos;t retrieve vehicle {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581002&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Couldn&apos;t retrieve vehicle
2020-06-30T18:58:54.032Z [c5c96e1c-a046-48ed-ba2d-7ed51dc4c4ef] POST /driver 404 - 6.471 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided vehicle id doesn&apos;t exist</font>
2020-06-30T18:58:54.040Z - <font color="#C4A000">warn</font>: [d7e101b7-fc66-44b6-ba56-aa29e8b7be7e] Request failed: Vehicle already assigned to another driver {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581004&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Vehicle already assigned to another driver
2020-06-30T18:58:54.040Z [d7e101b7-fc66-44b6-ba56-aa29e8b7be7e] POST /driver 422 - 6.035 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided vehicle is missing required properties</font>
2020-06-30T18:58:54.048Z - <font color="#C4A000">warn</font>: [c9653bea-fd32-4a94-9167-977e78832aa8] Request failed: vehicle validation failed: weightCapacity: Weight must be non-negative number {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581006&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:54.048Z [c9653bea-fd32-4a94-9167-977e78832aa8] POST /driver 422 - 5.799 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided vehicle weight is invalid</font>
2020-06-30T18:58:54.069Z - <font color="#C4A000">warn</font>: [f0be9a55-0b46-4205-a2fa-a73ff601496d] Request failed: vehicle validation failed: volumeCapacity: Cast to Number failed for value &quot;/3&quot; at path &quot;volumeCapacity&quot; {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581006&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:54.070Z [f0be9a55-0b46-4205-a2fa-a73ff601496d] POST /driver 422 - 17.390 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided vehicle volume is invalid</font>
2020-06-30T18:58:54.078Z - <font color="#C4A000">warn</font>: [b91c5bd8-ec8b-4a57-884c-59e064d75e17] Request failed: Vehicle already assigned to another driver {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581004&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Vehicle already assigned to another driver
2020-06-30T18:58:54.078Z [b91c5bd8-ec8b-4a57-884c-59e064d75e17] POST /driver 422 - 6.135 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided vehicle already has a driver</font>
2020-06-30T18:58:54.084Z - <font color="#C4A000">warn</font>: [fc4d75e7-d502-4777-902e-ea7bd57362e2] Request failed: Driver default vehicle not found {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581002&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;vehicle&quot;:{&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]},&quot;defaultVehicle&quot;:&quot;abcd&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Driver default vehicle not found
2020-06-30T18:58:54.084Z [fc4d75e7-d502-4777-902e-ea7bd57362e2] POST /driver 422 - 4.331 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided default vehicle id doesn&apos;t exist</font>
2020-06-30T18:58:54.092Z - <font color="#C4A000">warn</font>: [f2bc20be-1e08-4879-9717-7064f87305f4] Request failed: Driver default vehicle already assigned to another driver {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581004&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;vehicle&quot;:{&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]},&quot;defaultVehicle&quot;:&quot;385a34ea-76fa-492e-8915-325cd358df2c&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Driver default vehicle already assigned to another driver
2020-06-30T18:58:54.092Z [f2bc20be-1e08-4879-9717-7064f87305f4] POST /driver 422 - 5.450 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if provided default vehicle already has a driver</font>
2020-06-30T18:58:54.165Z - <font color="#C4A000">warn</font>: [a40c47e7-96c7-4b88-a234-d791010660bb] Request failed: undefined {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581999&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}],&quot;shiftTimes&quot;:{&quot;0&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;1&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;2&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;3&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;4&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;5&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}],&quot;6&quot;:[{&quot;start&quot;:&quot;05:00&quot;,&quot;duration&quot;:&quot;PT4H&quot;},{&quot;start&quot;:&quot;14:00&quot;,&quot;duration&quot;:&quot;PT5H&quot;}]},&quot;shiftExceptions&quot;:{}}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;}
2020-06-30T18:58:54.165Z [a40c47e7-96c7-4b88-a234-d791010660bb] POST /driver 422 - 70.504 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fail to add a new driver if CEP fails</font><font color="#C4A000"> (73ms)</font>
2020-06-30T18:58:54.166Z - <font color="#4E9A06">info</font>: The vehicle 0c57fbea-2972-4cf2-8e17-fd6b1e488688 has been removed
2020-06-30T18:58:54.167Z - <font color="#4E9A06">info</font>: The driver 90241245-d657-401a-a1ed-afa9717a9c25 has been removed
2020-06-30T18:58:54.172Z - <font color="#C4A000">warn</font>: [9120cfd7-b627-496b-838e-d5b490b75de7] Request failed: Existing driver found {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581000&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:&quot;10&quot;,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581000&quot;},&quot;vehicle&quot;:{&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=5, message=Existing driver found
2020-06-30T18:58:54.172Z [9120cfd7-b627-496b-838e-d5b490b75de7] POST /driver 409 - 3.629 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return an error when adding driver with same telephone as existing driver</font>
2020-06-30T18:58:54.239Z [b122d48e-8193-41cd-92c7-2a9cd6201d92] POST /driver 200 - 64.998 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add driver with eid set to empty string if adding driver with eid provided as null</font><font color="#C4A000"> (66ms)</font>
2020-06-30T18:58:54.307Z [a5a4a548-6ba4-42ea-8521-26b2567abf95] POST /driver 200 - 66.035 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add driver with eid set to empty string if adding driver with no eid provided</font><font color="#C4A000"> (68ms)</font>
2020-06-30T18:58:54.312Z - <font color="#C4A000">warn</font>: [3b09dee9-70c1-4a9a-8f23-ab3e4f59c304] Request failed: Driver eid must be a string {  url: &apos;/driver&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;location&quot;:{&quot;lat&quot;:42.363896537209364,&quot;lng&quot;:-71.08657243911952},&quot;telephone&quot;:&quot;5552581008&quot;,&quot;firstname&quot;:&quot;Jean Luc&quot;,&quot;lastname&quot;:&quot;Picard&quot;,&quot;eid&quot;:10,&quot;deviceType&quot;:&quot;ios&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Jean Luc Picard&quot;,&quot;phone&quot;:&quot;+15552581008&quot;},&quot;vehicle&quot;:{&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;},&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T09:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00.000Z&quot;},{&quot;start&quot;:&quot;2015-05-16T18:00:00.000Z&quot;,&quot;end&quot;:&quot;2015-05-16T23:00:00.000Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Driver eid must be a string
2020-06-30T18:58:54.313Z [3b09dee9-70c1-4a9a-8f23-ab3e4f59c304] POST /driver 422 - 3.009 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should error if adding a new driver if eid is a number</font>
2020-06-30T18:58:54.321Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.add
2020-06-30T18:58:54.322Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.created
2020-06-30T18:58:54.330Z - <font color="#4E9A06">info</font>: Added assignment dcbb60ac-ce3e-46f1-80e7-9037ed389d65
2020-06-30T18:58:54.331Z [adc5c7b6-9692-405c-8925-cb31319719d0] POST /assignment 200 - 17.215 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new assignment to the system</font>
2020-06-30T18:58:54.343Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.add
2020-06-30T18:58:54.344Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.created
2020-06-30T18:58:54.352Z - <font color="#4E9A06">info</font>: Added assignment bb3f2849-193e-48a3-84fa-1e465df93c11
2020-06-30T18:58:54.353Z [dc9fa236-c122-4308-9c11-aa219f80b855] POST /assignment 200 - 17.902 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a second new assignment to the system</font>
2020-06-30T18:58:54.365Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.add
2020-06-30T18:58:54.365Z - <font color="#3465A4">debug</font>: send to notice RPC MQ: wise.notice.assignment.created
2020-06-30T18:58:54.373Z - <font color="#4E9A06">info</font>: Added assignment 63dbd902-80bb-4a60-9fbc-6c9391dfa2aa
2020-06-30T18:58:54.373Z [fe3d4443-2f6f-42f2-bfc1-1bc6cfa18514] POST /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments 200 - 18.339 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should add a new assignment based on assign multiple tasks</font>
    GET as user
2020-06-30T18:58:54.377Z [43fab3a4-bfb1-4692-aa53-0112cf642f16] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routes 200 - 1.043 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s routes</font>
2020-06-30T18:58:54.381Z [fea6f80e-a039-42d3-83ec-b0647b7ba667] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routes/2017-07-04 200 - 0.800 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s routes for specific date</font>
2020-06-30T18:58:54.384Z [a7d2ddc4-6e16-4c7f-88ef-ec60549484df] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routelog/2020-06-30?type=Wise&amp;subType=StartDay 200 - 0.949 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s route log</font>
2020-06-30T18:58:54.394Z [73bad7c5-a8f9-42ba-9f6e-e6b4724ff69c] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/schedule/?date=2018-01-10&amp;type=Wise 200 - 2.828 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return route plan for specific driver</font>
(node:133341) DeprecationWarning: collection.update is deprecated. Use updateOne, updateMany, or bulkWrite instead.
2020-06-30T18:58:54.401Z - <font color="#3465A4">debug</font>: Updated 1 driver(s).
2020-06-30T18:58:54.401Z - <font color="#3465A4">debug</font>: Removing vehicle f079930c-018d-485a-88bd-60a13e8a2120 from CEP.
2020-06-30T18:58:54.402Z [fe499725-82cd-4751-b74a-8b016d9dbb2c] DELETE /driver/f079930c-018d-485a-88bd-60a13e8a2120/vehicle 200 - 5.712 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.406Z [5ed004db-c804-49b0-a22e-f6d14cba5f22] GET /driver/f079930c-018d-485a-88bd-60a13e8a2120 200 - 2.407 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fetch driver that doesn&apos;t have a vehicle </font>
2020-06-30T18:58:54.410Z [94fad233-ddc5-490c-988b-301659c498a0] GET /driver/f079930c-018d-485a-88bd-60a13e8a2120?extent=vehicle 200 - 2.511 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should fetch driver that doesn&apos;t have a vehicle and return enableRta prop if extent=vehicle requested</font>
    GET as driver
2020-06-30T18:58:54.416Z [425f92ca-6a1c-4201-af1a-719a39a1d424] GET /driver 200 - 3.058 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return self</font>
2020-06-30T18:58:54.421Z [49dbd58e-4d8a-492e-9314-dc5d221eb58b] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 200 - 2.964 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return same driver</font>
2020-06-30T18:58:54.426Z - <font color="#C4A000">warn</font>: [ef14c97c-bcec-4f77-819e-d57755840f26] Request failed:  {  url: &apos;/driver/a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:58:54.426Z [ef14c97c-bcec-4f77-819e-d57755840f26] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 404 - 2.607 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if not found in CEP</font>
2020-06-30T18:58:54.433Z [440b403b-93be-42b2-ba0f-fe93cef02742] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments 200 - 4.726 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s assignments</font>
    GET as sales
2020-06-30T18:58:54.438Z [02cb6288-fee8-4d20-88a5-a4b25d6e4a9d] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routelog/2020-06-30?type=Wise&amp;subType=StartDay 200 - 0.865 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s route log</font>
2020-06-30T18:58:54.442Z [1e97204f-afaf-4246-9d44-3fc616313716] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routelog/2020-06-30/?type=Wise&amp;sortdir=ASC 200 - 0.941 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver route logs - sortdir ascending</font>
2020-06-30T18:58:54.447Z [1676b451-a29b-4854-bec6-aa2225b24b24] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routelog/2020-06-30/?type=Wise&amp;sortdir=DESC 200 - 0.907 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver route logs - sortdir descending</font>
2020-06-30T18:58:54.451Z [d25da285-c628-4a56-81a9-878738eafb3d] GET /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/routelog/2020-06-30/?type=Wise 200 - 0.957 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver route logs - sortdir unspecified, defaults to ASC</font>
    POST as driver
2020-06-30T18:58:54.456Z [1853c9b0-bd5c-4ffa-bfb0-bd25811f2c12] POST /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/endroute 200 - 1.563 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should end route</font>
    PUT as driver
2020-06-30T18:58:54.459Z - <font color="#C4A000">warn</font>: [f0d17c7f-a980-49b3-8347-7a435a9ada86] Request failed:  {  url: &apos;/driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments&apos;,  method: &apos;PUT&apos;,  body: &apos;{}&apos;,  user: &apos;a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=6
2020-06-30T18:58:54.459Z [f0d17c7f-a980-49b3-8347-7a435a9ada86] PUT /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments 422 - 1.085 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if no action provided</font>
2020-06-30T18:58:54.463Z [e989ee9b-21d9-49da-b396-c86b541a941d] PUT /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments?action=adjust_schedule 200 - 1.070 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should adjust the drivers schedule</font>
2020-06-30T18:58:54.466Z [82a2d3bd-f8b7-44b3-bb57-cc73bffcab41] PUT /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/assignments?action=ignore_rta 200 - 1.070 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should notify system to ignore rta</font>
    PATCH as admin
2020-06-30T18:58:54.477Z [dd93aaa9-baed-437d-ad6e-3646febfc7a7] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 200 - 8.306 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update driver with vehicle id</font>
2020-06-30T18:58:54.547Z [7ea5c3a2-3938-4546-944f-4658b6fd9afd] POST /driver 200 - 67.715 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.556Z [70836bab-6213-412f-9fb9-f71840f4acb1] POST /vehicle 200 - 6.976 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.569Z [e65760b9-4c5e-4ec1-a3d1-2565aeabd898] PATCH /driver/0ca8971d-0883-4e86-abf4-9afd7baf0c69 200 - 11.610 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update driver, assign vehicle, and update its properties, sanitizing strings</font><font color="#CC0000"> (92ms)</font>
2020-06-30T18:58:54.637Z [318747b3-9b62-41d3-8c83-c362bb9cb151] POST /driver 200 - 65.694 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.645Z - <font color="#C4A000">warn</font>: [c33e6dd9-b46c-4af4-b25c-6e9332d84fa3] Request failed: Requested vehicle not found {  url: &apos;/driver/4db7c26f-47e9-4382-8996-19035ee2fbdc&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;vehicle&quot;:{&quot;enableRta&quot;:true,&quot;available&quot;:true,&quot;eid&quot;:&quot;10A&quot;,&quot;licensePlate&quot;:&quot;NC-1704&quot;,&quot;type&quot;:&quot;truck_sideload&quot;,&quot;makemodel&quot;:&quot;Ford F150&quot;,&quot;year&quot;:&quot;2009&quot;,&quot;weightCapacity&quot;:1000,&quot;volumeCapacity&quot;:2.5,&quot;description&quot;:&quot;red ford f150 with black decals&quot;,&quot;id&quot;:&quot;655098e2-f761-11e9-ab47-b919d610cf7a&quot;}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Requested vehicle not found
2020-06-30T18:58:54.645Z [c33e6dd9-b46c-4af4-b25c-6e9332d84fa3] PATCH /driver/4db7c26f-47e9-4382-8996-19035ee2fbdc 404 - 6.121 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return error if trying to assign non-existent vehicle</font><font color="#C4A000"> (75ms)</font>
2020-06-30T18:58:54.650Z - <font color="#C4A000">warn</font>: [52588291-84f4-481a-a939-ced0e3aac87c] Request failed: Driver not found {  url: &apos;/driver/01393d20-5d64-11e6-8257-1910b1fdd40e&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;props&quot;:{&quot;shiftTime&quot;:[{&quot;start&quot;:&quot;2015-05-16T07:00:00Z&quot;,&quot;end&quot;:&quot;2015-05-16T13:00:00Z&quot;},{&quot;start&quot;:&quot;2015-05-16T14:00:00Z&quot;,&quot;end&quot;:&quot;2015-05-16T16:00:00Z&quot;}]}}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2, message=Driver not found
2020-06-30T18:58:54.651Z [52588291-84f4-481a-a939-ced0e3aac87c] PATCH /driver/01393d20-5d64-11e6-8257-1910b1fdd40e 404 - 3.306 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should return 404 for non-existent drivers</font>
2020-06-30T18:58:54.659Z [3de487ad-6cbd-412b-97f1-2b5808604c9f] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 200 - 5.419 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update driver password</font>
      Manage defaultVehicle for a driver
2020-06-30T18:58:54.666Z [85983807-d42e-482d-884a-6d2723d9f318] POST /vehicle 200 - 4.474 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:58:54.671Z [0149b3ca-feb0-4bf1-9276-34f6711c2b8a] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/update_default_vehicle 200 - 3.940 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should assign an existing unassigned vehicle as the new default vehicle to a driver already assigned a default vehicle</font>
2020-06-30T18:58:54.677Z [639b65ef-2038-445f-8df8-69eff4a3cb0e] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/update_default_vehicle 200 - 2.765 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should un-assign the default vehicle for a driver already assigned a default vehicle</font>
2020-06-30T18:58:54.682Z - <font color="#C4A000">warn</font>: [482d0ae4-617b-41a1-8fd0-1a6bf7cdc157] Request failed: Driver defaultVehicle not found {  url: &apos;/driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/update_default_vehicle&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;defaultVehicle&quot;:&quot;not-a-real-id&quot;}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=3, message=Driver defaultVehicle not found
2020-06-30T18:58:54.682Z [482d0ae4-617b-41a1-8fd0-1a6bf7cdc157] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354/update_default_vehicle 422 - 3.655 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 422 for non-existent defaultVehicle</font>
    PATCH as driver
2020-06-30T18:58:54.696Z [ab47dbea-caa6-4f86-b14a-0200056d7613] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 200 - 10.820 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
    <font color="#4E9A06">  ✓</font><font color="#555753"> should update driver properties</font>
    <font color="#CC0000">  11) should update driver EID and unassign tasks with old EID and verify vehicle EID is also updated even if it&apos;s empty</font>
    <font color="#CC0000">  12) &quot;after each&quot; hook for &quot;should update driver EID and unassign tasks with old EID and verify vehicle EID is also updated even if it&apos;s empty&quot;</font>
    GET driver location updates
    <font color="#CC0000">  13) &quot;before each&quot; hook for &quot;should return driver&apos;s locations&quot;</font>
    <font color="#CC0000">  14) &quot;after each&quot; hook for &quot;should return driver&apos;s locations&quot;</font>
    PUT
    <font color="#CC0000">  15) &quot;before each&quot; hook for &quot;should return error if method not available&quot;</font>
    <font color="#CC0000">  16) &quot;after each&quot; hook for &quot;should return error if method not available&quot;</font>
    DELETE as admin
    <font color="#CC0000">  17) &quot;before each&quot; hook for &quot;should fail to unassign vehicle from driver if driver still has active assignments&quot;</font>
    <font color="#CC0000">  18) &quot;after each&quot; hook for &quot;should fail to unassign vehicle from driver if driver still has active assignments&quot;</font>
  <font color="#CC0000">  19) &quot;after all&quot; hook in &quot;Driver Handler&quot;</font>

  DriverStatus Handler
    POST
    <font color="#CC0000">  20) &quot;before each&quot; hook for &quot;should return 401 if public action param not provided&quot;</font>
    <font color="#CC0000">  21) &quot;after each&quot; hook for &quot;should return 401 if public action param not provided&quot;</font>

  Drivers Handler with authorization
    GET
    <font color="#CC0000">  22) &quot;before each&quot; hook for &quot;should retrieve all drivers&quot;</font>
    <font color="#CC0000">  23) &quot;after each&quot; hook for &quot;should retrieve all drivers&quot;</font>

  Drivers Handler as user
    PATCH
    <font color="#CC0000">  24) &quot;before each&quot; hook for &quot;should return error if action not available&quot;</font>
    <font color="#CC0000">  25) &quot;after each&quot; hook for &quot;should return error if action not available&quot;</font>

  GET as sales user with multiple clients
  <font color="#CC0000">  26) &quot;before all&quot; hook for &quot;should retrieve all drivers across clients&quot;</font>
  <font color="#CC0000">  27) &quot;after all&quot; hook for &quot;should retrieve all drivers&apos; route logs across clients&quot;</font>

  Drivers Handler as driver
    GET
    <font color="#CC0000">  28) &quot;before each&quot; hook for &quot;should return Forbidden&quot;</font>
    <font color="#CC0000">  29) &quot;after each&quot; hook for &quot;should return Forbidden&quot;</font>

  Drivers Handler as anonymous
    GET
    <font color="#CC0000">  30) &quot;before each&quot; hook for &quot;should return Forbidden&quot;</font>
    <font color="#CC0000">  31) &quot;after each&quot; hook for &quot;should return Forbidden&quot;</font>

  Drivers query string parameter filtering
  <font color="#CC0000">  32) &quot;before all&quot; hook for &quot;should find driver by full name&quot;</font>
2020-06-30T18:59:09.740Z - <font color="#C4A000">warn</font>: [99a2a6c6-1652-447e-ab15-dc988b34498b] Request failed:  {  url: &apos;/driver/undefined&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:59:09.740Z [99a2a6c6-1652-447e-ab15-dc988b34498b] DELETE /driver/undefined 403 - 1.556 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:09.743Z - <font color="#C4A000">warn</font>: [b3e6fc21-da95-43ed-9abe-0e4524444c60] Request failed:  {  url: &apos;/driver/undefined&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:59:09.743Z [b3e6fc21-da95-43ed-9abe-0e4524444c60] DELETE /driver/undefined 403 - 1.041 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
  <font color="#CC0000">  33) &quot;after all&quot; hook</font>
    Edit Route History Handler
    <font color="#CC0000">  34) &quot;before all&quot; hook in &quot;Edit Route History Handler&quot;</font>
    <font color="#CC0000">  35) &quot;after all&quot; hook in &quot;Edit Route History Handler&quot;</font>
    ForecastType Handler
      POST
      <font color="#CC0000">  36) &quot;before each&quot; hook for &quot;should add a new ForecastType to the system&quot;</font>
      <font color="#CC0000">  37) &quot;after each&quot; hook for &quot;should add a new ForecastType to the system&quot;</font>
    Me Handler
    <font color="#CC0000">  38) &quot;before all&quot; hook in &quot;Me Handler&quot;</font>
    <font color="#CC0000">  39) &quot;after all&quot; hook in &quot;Me Handler&quot;</font>
    Note Handler
      POST
      <font color="#CC0000">  40) &quot;before each&quot; hook for &quot;should add a new Note to the system&quot;</font>
      <font color="#CC0000">  41) &quot;after each&quot; hook for &quot;should add a new Note to the system&quot;</font>
    Notifications Handler
    <font color="#CC0000">  42) &quot;before all&quot; hook in &quot;Notifications Handler&quot;</font>
    Photo Handler
      GET
2020-06-30T18:59:09.759Z - <font color="#C4A000">warn</font>: [b79c5127-b420-4abc-9f77-209a8e2521f1] Request failed:  {  url: &apos;/customer/d0084991-61ad-11e7-91ce-5b0327cd0ba3/photo&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=2
2020-06-30T18:59:09.759Z [b79c5127-b420-4abc-9f77-209a8e2521f1] GET /customer/d0084991-61ad-11e7-91ce-5b0327cd0ba3/photo 404 - 3.648 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> Should error if no matching keys to customer id</font>
2020-06-30T18:59:09.765Z [2ca76bfd-2b6b-4bcd-85f2-b6c111c0143e] GET /customer/d0084991-61ad-11e7-91ce-5b0327cd0ba3/photos 200 - 3.091 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> Getting customer id with photos</font>
    Root Handler Test
      GET
2020-06-30T18:59:09.767Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for GET / host=127.0.0.1:39833, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close
2020-06-30T18:59:09.768Z [20d92e62-7ea1-4018-840e-acf8de8ec9da] GET / 401 - 0.342 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
      POST
2020-06-30T18:59:09.770Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for POST / host=127.0.0.1:35625, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:59:09.770Z [40c11308-1597-4a46-b3e5-c4d16188f98d] POST / 401 - 0.321 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
      PUT
2020-06-30T18:59:09.772Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for PUT / host=127.0.0.1:37173, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:59:09.772Z [6aaa9eb8-1a03-4d73-9bc3-9ccdca51ab2c] PUT / 401 - 0.267 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
      PATCH
2020-06-30T18:59:09.774Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for PATCH / host=127.0.0.1:39825, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:59:09.774Z [684e8321-53b6-43d0-9efe-4cf1969238ed] PATCH / 401 - 0.273 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
      DELETE
2020-06-30T18:59:09.776Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for DELETE / host=127.0.0.1:38017, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close
2020-06-30T18:59:09.776Z [63410636-4ab5-466d-8b9e-7289d6dea777] DELETE / 401 - 0.297 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
      Unsupported method
2020-06-30T18:59:09.778Z - <font color="#C4A000">warn</font>: [SECURITY] Authorization error for SUBSCRIBE / host=127.0.0.1:37987, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, content-type=application/json, connection=close, content-length=0
2020-06-30T18:59:09.779Z [f520ffb2-20cd-4669-8f8e-e1edc9613ea7] SUBSCRIBE / 401 - 0.445 ms [anonymous]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return 401 error</font>
    Route Handler
      Route Handler as anonymous
        GET
2020-06-30T18:59:09.782Z - <font color="#C4A000">warn</font>: [acecdc6e-f787-4686-88c0-b89c9f58c80b] Request failed:  {  url: &apos;/route&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;anonymous&apos;,  client: &apos;anonymous&apos;} status=8
2020-06-30T18:59:09.782Z [acecdc6e-f787-4686-88c0-b89c9f58c80b] GET /route 403 - 0.815 ms [anonymous]
        <font color="#4E9A06">  ✓</font><font color="#555753"> should return error</font>
      Route Handler as driver not authorized
        GET
2020-06-30T18:59:09.785Z - <font color="#C4A000">warn</font>: [8345ead7-e544-4526-a836-ceb3cdfd3fa6] Request failed:  {  url: &apos;/route&apos;,  method: &apos;GET&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} status=8
2020-06-30T18:59:09.785Z [8345ead7-e544-4526-a836-ceb3cdfd3fa6] GET /route 403 - 0.746 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
        <font color="#4E9A06">  ✓</font><font color="#555753"> should return error</font>
      DELETE
      <font color="#CC0000">  43) should return success if route not found</font>
      GET valid requests
2020-06-30T18:59:24.805Z [d71b6679-87c0-4fe3-af37-f868870d4e1c] GET /driver/01393d20-5d64-11e6-8257-1910b1fdd40e/route 200 - 9.932 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s active route</font>
2020-06-30T18:59:24.822Z [cc3e9725-aa86-4765-8eb1-5e245288bb2f] GET /driver/01393d20-5d64-11e6-8257-1910b1fdd40e/route/2017-07-04 200 - 8.712 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      <font color="#4E9A06">  ✓</font><font color="#555753"> should return driver&apos;s routes for specific date</font>
      POST valid route requests
2020-06-30T18:59:24.850Z [520c2947-f3d6-486e-ac04-bdf42e612c8f] PUT /task 200 - 21.349 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:24.850Z - <font color="#4E9A06">info</font>: TaskJson 59c61332-d61a-4197-8a2d-5fc79d718d17 saved
      <font color="#CC0000">  44) should create routes and update tasks</font>
2020-06-30T18:59:39.862Z [c382b213-1404-42d7-bdff-5ab77d3c9cf0] DELETE /task/59c61332-d61a-4197-8a2d-5fc79d718d17 200 - 5.892 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.752Z - <font color="#CC0000">error</font>: RDS disconnected! Reconnecting in 6.822689532689031s... SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
2020-06-30T18:59:51.753Z - <font color="#CC0000">error</font>: [db8ab7ea-b50d-4e5c-b852-7dc177673b45] Request failed:  {  url: &apos;/route/1c087850-2a99-11e5-9189-eb07c479dfd4&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.755Z - <font color="#CC0000">error</font>: [9bb5cddc-7119-467d-979b-fb8356ec06a6] Request failed:  {  url: &apos;/route/1c087850-2a99-11e5-9189-eb07c479dfd4&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.756Z - <font color="#CC0000">error</font>: error saving TaskJson: 10de59d7-c2a8-48e6-9895-b2f6838e57f5 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.757Z - <font color="#CC0000">error</font>: error saving TaskJson: 31fb3806-bcc5-4911-8fbc-5ff74d168146 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.757Z - <font color="#CC0000">error</font>: error saving TaskJson: 1218bc1c-25f8-4c58-b978-406e321ba672 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.758Z - <font color="#CC0000">error</font>: error saving TaskJson: e8bd58e7-fd28-4d6f-9ee7-2035aca30661 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.758Z - <font color="#CC0000">error</font>: error saving TaskJson: 221535b8-5b34-457e-94e5-1ff2fcf79ed2 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.759Z - <font color="#CC0000">error</font>: error saving TaskJson: 97a024d0-dfa2-4db4-8e27-469b4cdb1420 message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.760Z - <font color="#CC0000">error</font>: error saving TaskJson: 3ed4d035-92d0-4423-811e-33ef5a73e1dd message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.761Z - <font color="#CC0000">error</font>: [d1c87929-692e-4151-b847-7468a9be951f] Request failed:  {  url: &apos;/assignment/c253fa70-d181-11e8-ae1a-ad71d8fdae76&apos;,  method: &apos;DELETE&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.762Z - <font color="#CC0000">error</font>: [9911c3a2-d234-4de3-a91a-50a373816c62] Request failed:  {  url: &apos;/driver/a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  method: &apos;PATCH&apos;,  body: &apos;{&quot;eid&quot;:&quot;&quot;}&apos;,  user: &apos;a8f3ab8f-9456-4346-9e8f-813c169d2354&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.764Z - <font color="#CC0000">error</font>: [921a1786-0db2-4493-b362-74c1723fc28d] Request failed:  {  url: &apos;/route&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;id&quot;:&quot;1c087850-2a99-11e5-9189-eb07c479dfd4&quot;,&quot;date&quot;:&quot;2017-07-04&quot;,&quot;eid&quot;:&quot;A01&quot;,&quot;tasks&quot;:[{&quot;id&quot;:&quot;59c61332-d61a-4197-8a2d-5fc79d718d17&quot;}]}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.765Z [db8ab7ea-b50d-4e5c-b852-7dc177673b45] DELETE /route/1c087850-2a99-11e5-9189-eb07c479dfd4 500 - 41977.734 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.765Z [9bb5cddc-7119-467d-979b-fb8356ec06a6] DELETE /route/1c087850-2a99-11e5-9189-eb07c479dfd4 500 - 11900.069 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.765Z [d1c87929-692e-4151-b847-7468a9be951f] DELETE /assignment/c253fa70-d181-11e8-ae1a-ad71d8fdae76 500 - 80170.983 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.765Z [9911c3a2-d234-4de3-a91a-50a373816c62] PATCH /driver/a8f3ab8f-9456-4346-9e8f-813c169d2354 500 - 57065.734 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.766Z [921a1786-0db2-4493-b362-74c1723fc28d] POST /route 500 - 26913.997 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.767Z - <font color="#CC0000">error</font>: [55e11249-aa81-4e67-a631-34a3d5282dfb] Request failed:  {  url: &apos;/admin?action=export_third_party_route&apos;,  method: &apos;POST&apos;,  body: &apos;{&quot;dates&quot;:[&quot;2019-07-19&quot;,&quot;2019-07-20&quot;,&quot;2019-07-21&quot;]}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.768Z - <font color="#CC0000">error</font>: [645d280f-ef20-41ee-a3ca-a8758fcd55e7] Request failed:  {  url: &apos;/admin?action=reset_all&apos;,  method: &apos;POST&apos;,  body: &apos;{}&apos;,  user: &apos;27331fd8-2b00-11e5-b345-feff819cdc9f&apos;,  client: &apos;5c087850-2a99-11e5-9189-eb07c479dfd5&apos;} message=connect ETIMEDOUT 52.0.118.214:5432, stack=SequelizeConnectionError: connect ETIMEDOUT 52.0.118.214:5432
    at /home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:182:24
    at Connection.connectingErrorHandler (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/client.js:194:14)
    at Connection.emit (events.js:315:20)
    at Connection.EventEmitter.emit (domain.js:482:12)
    at Socket.reportStreamError (/home/lkoemmpel/Documents/wise-systems/wise-api/node_modules/pg/lib/connection.js:73:10)
    at Socket.emit (events.js:315:20)
    at Socket.EventEmitter.emit (domain.js:482:12)
    at emitErrorNT (internal/streams/destroy.js:92:8)
    at emitErrorAndCloseNT (internal/streams/destroy.js:60:3)
    at processTicksAndRejections (internal/process/task_queues.js:84:21), name=SequelizeConnectionError, errno=ETIMEDOUT, code=ETIMEDOUT, syscall=connect, address=52.0.118.214, port=5432, $ref=$[&quot;parent&quot;]
2020-06-30T18:59:51.769Z [55e11249-aa81-4e67-a631-34a3d5282dfb] POST /admin?action=export_third_party_route 500 - 100651.450 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
2020-06-30T18:59:51.769Z [645d280f-ef20-41ee-a3ca-a8758fcd55e7] POST /admin?action=reset_all 500 - 115690.324 ms [5c087850-2a99-11e5-9189-eb07c479dfd5]
      PATCH valid route requests
      <font color="#CC0000">  45) &quot;after all&quot; hook</font>
      <font color="#CC0000">  46) &quot;after all&quot; hook for &quot;unassign entire route should fail if some of the non depot assignments are already started&quot;</font>
    Routes Handler
2020-06-30T18:59:51.785Z - <font color="#C4A000">warn</font>: [SECURITY] User not found for PUT /task host=127.0.0.1:44367, accept-encoding=gzip, deflate, user-agent=node-superagent/3.8.3, authorization=Basic QmVhcmVyOg==, content-type=application/json, content-length=575, connection=close
2020-06-30T18:59:51.786Z [71644a5c-22b0-42aa-bd65-7bd91ee2ab65] PUT /task 401 - 1.567 ms [anonymous]
    <font color="#CC0000">  47) &quot;before all&quot; hook in &quot;Routes Handler&quot;</font>
    <font color="#CC0000">  48) &quot;before all&quot; hook for &quot;unassign entire route should fail if some of the non depot assignments are already started&quot;</font>
      Routes Handler as anonymous
      <font color="#CC0000">  49) &quot;after all&quot; hook in &quot;Routes Handler&quot;</font>
      Routes Handler as driver not authorized
      <font color="#CC0000">  50) &quot;before all&quot; hook in &quot;Routes Handler as anonymous&quot;</font>
        GET
        <font color="#CC0000">  51) &quot;after all&quot; hook in &quot;Routes Handler as anonymous&quot;</font>
        Rules Handler
          GET
          <font color="#CC0000">  52) &quot;before each&quot; hook for &quot;retrieves rules&quot;</font>
          <font color="#CC0000">  53) &quot;before each&quot; hook in &quot;Rules Handler&quot;</font>
      <font color="#CC0000">  54) &quot;after each&quot; hook in &quot;Routes Handler as driver not authorized&quot;</font>

<font color="#8AE234"> </font><font color="#4E9A06"> 373 passing</font><font color="#555753"> (2m)</font>
<font color="#CC0000">  54 failing</font>

  1) Uncaught error outside test suite:
<font color="#CC0000">     Uncaught Error: listen EADDRINUSE: address already in use :::8002</font>
<font color="#555753">      at Server.setupListenHandle [as _listen2] (net.js:1313:16)</font>
<font color="#555753">      at listenInCluster (net.js:1361:12)</font>
<font color="#555753">      at Server.listen (net.js:1447:7)</font>
<font color="#555753">      at Function.listen (node_modules/express/lib/application.js:618:24)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (server/server.js:15:84)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Module.replacementCompile (node_modules/jenkins-mocha/node_modules/append-transform/index.js:58:13)</font>
<font color="#555753">      at Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (node_modules/jenkins-mocha/node_modules/append-transform/index.js:62:4)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Module.require (internal/modules/cjs/loader.js:1026:19)</font>
<font color="#555753">      at require (internal/modules/cjs/helpers.js:72:18)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (server/test/util/reservationTestUtil.js:1:13507)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Module.replacementCompile (node_modules/jenkins-mocha/node_modules/append-transform/index.js:58:13)</font>
<font color="#555753">      at Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (node_modules/jenkins-mocha/node_modules/append-transform/index.js:62:4)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Module.require (internal/modules/cjs/loader.js:1026:19)</font>
<font color="#555753">      at require (internal/modules/cjs/helpers.js:72:18)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (server/test/func/ReservationFuncTest.js:3:8539)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Module.replacementCompile (node_modules/jenkins-mocha/node_modules/append-transform/index.js:58:13)</font>
<font color="#555753">      at Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (node_modules/jenkins-mocha/node_modules/append-transform/index.js:62:4)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Module.require (internal/modules/cjs/loader.js:1026:19)</font>
<font color="#555753">      at require (internal/modules/cjs/helpers.js:72:18)</font>
<font color="#555753">      at Array.forEach (&lt;anonymous&gt;)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Module.replacementCompile (node_modules/jenkins-mocha/node_modules/append-transform/index.js:58:13)</font>
<font color="#555753">      at Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (node_modules/jenkins-mocha/node_modules/append-transform/index.js:62:4)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:71:12)</font>
<font color="#555753">      at runMain (/home/lkoemmpel/.node-spawn-wrap-133322-2b6e37f94fdd/node:68:10)</font>
<font color="#555753">      at Function.&lt;anonymous&gt; (/home/lkoemmpel/.node-spawn-wrap-133322-2b6e37f94fdd/node:171:5)</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (node_modules/jenkins-mocha/node_modules/nyc/bin/wrap.js:27:4)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Object.Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:71:12)</font>
<font color="#555753">      at /home/lkoemmpel/.node-spawn-wrap-133322-2b6e37f94fdd/node:178:8</font>
<font color="#555753">      at Object.&lt;anonymous&gt; (/home/lkoemmpel/.node-spawn-wrap-133322-2b6e37f94fdd/node:181:3)</font>
<font color="#555753">      at Module._compile (internal/modules/cjs/loader.js:1138:30)</font>
<font color="#555753">      at Object.Module._extensions..js (internal/modules/cjs/loader.js:1158:10)</font>
<font color="#555753">      at Module.load (internal/modules/cjs/loader.js:986:32)</font>
<font color="#555753">      at Function.Module._load (internal/modules/cjs/loader.js:879:14)</font>
<font color="#555753">      at Function.executeUserEntryPoint [as runMain] (internal/modules/run_main.js:71:12)</font>
<font color="#555753">      at internal/main/run_main_module.js:17:47</font>

  2) Admin Handler with authorization
       POST
         should reset all:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/adminFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  3) Admin Handler with authorization
       POST
         Third party trigger
           should respond with success &amp; post sns message with type of export:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/adminFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  4) Admin Handler with authorization
       POST
         Third party trigger
           should respond with error when sns fails:
<font color="#CC0000">     TypeError: Attempted to wrap fork which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/adminFuncTest.js:3:57435)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/adminFuncTest.js:3:55016)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  5) Assignment Handler
       DELETE as admin
         should delete assignment and task if assignment is of type depot:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/assignmentFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  6) Assignment Handler
       should test Customer Portal assignment event based notifications
         should send notification if notifyBasedOnTime is true and assignment eta is less than notificationTime when location update request is sent:
<font color="#CC0000">     TypeError: Cannot read property &apos;id&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:32:634)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  7) Assignment Handler
       should test Customer Portal assignment event based notifications
         should send notification if notifyOnStartAssignment is true and assignment is marked &apos;in progress&apos; (status 1):
<font color="#CC0000">     TypeError: Attempted to wrap sendSMS which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Object.expects (node_modules/sinon/lib/sinon/mock.js:71:13)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:33:1123)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Object.expects (node_modules/sinon/lib/sinon/mock.js:71:13)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:32:517)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  8) Assignment Handler
       should test Customer Portal assignment event based notifications
         should send notification if notifyOnCompleteAssignment is true and assignment is marked &apos;completed&apos; (status 2):
<font color="#CC0000">     TypeError: Attempted to wrap sendSMS which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Object.expects (node_modules/sinon/lib/sinon/mock.js:71:13)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:33:2153)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Object.expects (node_modules/sinon/lib/sinon/mock.js:71:13)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:32:517)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  9) Assignments Handler
       &quot;before all&quot; hook in &quot;Assignments Handler&quot;:
<font color="#CC0000">     Error: expected 200 &quot;OK&quot;, got 409 &quot;Conflict&quot;</font>
<font color="#555753">      at Test._assertStatus (node_modules/supertest/lib/test.js:268:12)</font>
<font color="#555753">      at /home/lkoemmpel/Documents/wise-systems/wise-api/server/lib/allLoader.js:5:2290</font>
<font color="#555753">      at Test._assertFunction (node_modules/supertest/lib/test.js:283:11)</font>
<font color="#555753">      at Test.assert (node_modules/supertest/lib/test.js:173:18)</font>
<font color="#555753">      at Server.localAssert (node_modules/supertest/lib/test.js:131:12)</font>
<font color="#555753">      at Server.&lt;anonymous&gt; (server/lib/allLoader.js:5:2290)</font>
<font color="#555753">      at Server.EventEmitter.emit (domain.js:482:12)</font>
<font color="#555753">      at emitCloseNT (net.js:1655:8)</font>
<font color="#555753">      at processTicksAndRejections (internal/process/task_queues.js:83:21)</font>

  10) Assignments Handler
       &quot;after all&quot; hook in &quot;Assignments Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Object.resetAll (server/test/util/testUtil.js:55:89)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentsFuncTest.js:3:53829)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/assignmentsFuncTest.js:3:52154)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  11) Driver Handler
       PATCH as driver
         should update driver EID and unassign tasks with old EID and verify vehicle EID is also updated even if it&apos;s empty:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/driverFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  12) Driver Handler
       PATCH as driver
         &quot;after each&quot; hook for &quot;should update driver EID and unassign tasks with old EID and verify vehicle EID is also updated even if it&apos;s empty&quot;:
<font color="#CC0000">     ExpectationError: Expected sendAndReceive({</font>
<font color="#CC0000">  driver: {</font>
<font color="#CC0000">    id: &quot;51ce43d4-bbc8-419d-b30d-75f6d72fdb68&quot;,</font>
<font color="#CC0000">    profile: { name: &quot;Jean Luc Picard&quot;, phone: &quot;+15552581000&quot; },</font>
<font color="#CC0000">    props: { shiftTime: typeOf(&quot;array&quot;) }</font>
<font color="#CC0000">  },</font>
<font color="#CC0000">  id: &quot;a8f3ab8f-9456-4346-9e8f-813c169d2354&quot;,</font>
<font color="#CC0000">  props: {</font>
<font color="#CC0000">    hasRefrigerator: true,</font>
<font color="#CC0000">    type: &quot;truck_sideload&quot;,</font>
<font color="#CC0000">    volumeCapacity: 2.5,</font>
<font color="#CC0000">    weightCapacity: 1000</font>
<font color="#CC0000">  }</font>
<font color="#CC0000">}, wise.command.vehicle.update[, ...]) once (never called)</font>
<font color="#CC0000">Expectation met: sendAndReceive(typeOf(&quot;object&quot;), wise.command.assignment.remove[, ...]) at least once</font>
<font color="#555753">      at Object.fail (node_modules/sinon/lib/sinon/mock-expectation.js:309:25)</font>
<font color="#555753">      at Object.verify (node_modules/sinon/lib/sinon/mock.js:114:29)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48398)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  13) Driver Handler
       GET driver location updates
         &quot;before each&quot; hook for &quot;should return driver&apos;s locations&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:81062)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  14) Driver Handler
       GET driver location updates
         &quot;after each&quot; hook for &quot;should return driver&apos;s locations&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:81392)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  15) Driver Handler
       PUT
         &quot;before each&quot; hook for &quot;should return error if method not available&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:82311)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  16) Driver Handler
       PUT
         &quot;after each&quot; hook for &quot;should return error if method not available&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:82489)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  17) Driver Handler
       DELETE as admin
         &quot;before each&quot; hook for &quot;should fail to unassign vehicle from driver if driver still has active assignments&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:83170)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  18) Driver Handler
       DELETE as admin
         &quot;after each&quot; hook for &quot;should fail to unassign vehicle from driver if driver still has active assignments&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:83479)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  19) Driver Handler
       &quot;after all&quot; hook in &quot;Driver Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Object.resetAll (server/test/util/testUtil.js:55:89)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:309)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  20) DriverStatus Handler
       &quot;before each&quot; hook for &quot;should return 401 if public action param not provided&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverStatusFuncTest.js:3:15610)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  21) DriverStatus Handler
       &quot;after each&quot; hook for &quot;should return 401 if public action param not provided&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverStatusFuncTest.js:3:15786)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  22) Drivers Handler with authorization
       &quot;before each&quot; hook for &quot;should retrieve all drivers&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:51048)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  23) Drivers Handler with authorization
       &quot;after each&quot; hook for &quot;should retrieve all drivers&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:51323)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  24) Drivers Handler as user
       &quot;before each&quot; hook for &quot;should return error if action not available&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:59296)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  25) Drivers Handler as user
       &quot;after each&quot; hook for &quot;should return error if action not available&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:59672)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  26) GET as sales user with multiple clients
       &quot;before all&quot; hook for &quot;should retrieve all drivers across clients&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:77226)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  27) GET as sales user with multiple clients
       &quot;after all&quot; hook for &quot;should retrieve all drivers&apos; route logs across clients&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap notice which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:4:570)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:3:76923)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  28) Drivers Handler as driver
       &quot;before each&quot; hook for &quot;should return Forbidden&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:2911)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  29) Drivers Handler as driver
       &quot;after each&quot; hook for &quot;should return Forbidden&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:3203)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  30) Drivers Handler as anonymous
       &quot;before each&quot; hook for &quot;should return Forbidden&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:4042)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  31) Drivers Handler as anonymous
       &quot;after each&quot; hook for &quot;should return Forbidden&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:4247)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  32) Drivers query string parameter filtering
       &quot;before all&quot; hook for &quot;should find driver by full name&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:5079)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  33) Drivers query string parameter filtering
       &quot;after all&quot; hook:
<font color="#CC0000">     Uncaught TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Test.&lt;anonymous&gt; (server/test/func/driversFuncTest.js:5:6614)</font>
<font color="#555753">      at Test.assert (node_modules/supertest/lib/test.js:181:6)</font>
<font color="#555753">      at Server.localAssert (node_modules/supertest/lib/test.js:131:12)</font>
<font color="#555753">      at Server.&lt;anonymous&gt; (server/lib/allLoader.js:5:2290)</font>
<font color="#555753">      at Server.EventEmitter.emit (domain.js:482:12)</font>
<font color="#555753">      at emitCloseNT (net.js:1655:8)</font>
<font color="#555753">      at processTicksAndRejections (internal/process/task_queues.js:83:21)</font>

  34) Edit Route History Handler
       &quot;before all&quot; hook in &quot;Edit Route History Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/editRouteHistoryFuncTest.js:1:24643)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  35) Edit Route History Handler
       &quot;after all&quot; hook in &quot;Edit Route History Handler&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/editRouteHistoryFuncTest.js:1:25110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  36) ForecastType Handler
       &quot;before each&quot; hook for &quot;should add a new ForecastType to the system&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/forecastTypeFuncTest.js:1:10686)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  37) ForecastType Handler
       &quot;after each&quot; hook for &quot;should add a new ForecastType to the system&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/forecastTypeFuncTest.js:1:10935)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  38) Me Handler
       &quot;before all&quot; hook in &quot;Me Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/meFuncTest.js:3:7962)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  39) Me Handler
       &quot;after all&quot; hook in &quot;Me Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/meFuncTest.js:3:8607)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  40) Note Handler
       &quot;before each&quot; hook for &quot;should add a new Note to the system&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/noteFuncTest.js:3:8696)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  41) Note Handler
       &quot;after each&quot; hook for &quot;should add a new Note to the system&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/noteFuncTest.js:3:8871)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  42) Notifications Handler
       &quot;before all&quot; hook in &quot;Notifications Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Object.resetAll (server/test/util/testUtil.js:55:89)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/notificationsFuncTest.js:1:15925)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/driverFuncTest.js:5:48110)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  43) Route Handler
       DELETE
         should return success if route not found:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/routeFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  44) Route Handler
       POST valid route requests
         should create routes and update tasks:
<font color="#CC0000">     Error: Timeout of 15000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/routeFuncTest.js)</font>
<font color="#555753">      at listOnTimeout (internal/timers.js:549:17)</font>
<font color="#555753">      at processTimers (internal/timers.js:492:7)</font>

  45) Route Handler
       POST valid route requests
         &quot;after all&quot; hook:
<font color="#CC0000">     Uncaught ExpectationError: Unexpected call: find({ _id: { $in: [&quot;99b70c24-67f7-4f91-a225-9bdb5d720d57&quot;] } }) at /home/lkoemmpel/Documents/wise-systems/wise-api/server/mixins/assignTaskToAssignments.js:33:218</font>
<font color="#CC0000">Expectation met: findOne([...]) once</font>
<font color="#CC0000">Expectation met: find([...]) once</font>
<font color="#CC0000">Expectation met: findOneAndDelete([...]) once</font>
<font color="#555753">      at Object.fail (node_modules/sinon/lib/sinon/mock-expectation.js:309:25)</font>
<font color="#555753">      at Object.verify (node_modules/sinon/lib/sinon/mock.js:114:29)</font>
<font color="#555753">      at Test.&lt;anonymous&gt; (server/test/func/assignmentFuncTest.js:29:2260)</font>
<font color="#555753">      at Test.assert (node_modules/supertest/lib/test.js:181:6)</font>
<font color="#555753">      at Server.localAssert (node_modules/supertest/lib/test.js:131:12)</font>
<font color="#555753">      at Server.&lt;anonymous&gt; (server/lib/allLoader.js:5:2290)</font>
<font color="#555753">      at Server.EventEmitter.emit (domain.js:482:12)</font>
<font color="#555753">      at emitCloseNT (net.js:1655:8)</font>
<font color="#555753">      at processTicksAndRejections (internal/process/task_queues.js:83:21)</font>

  46) Route Handler
       PATCH valid route requests
         &quot;after all&quot; hook for &quot;unassign entire route should fail if some of the non depot assignments are already started&quot;:
<font color="#CC0000">     ExpectationError: Expected sendAndReceive([...]) thrice (never called)</font>
<font color="#555753">      at Object.fail (node_modules/sinon/lib/sinon/mock-expectation.js:309:25)</font>
<font color="#555753">      at Object.verify (node_modules/sinon/lib/sinon/mock.js:114:29)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routeFuncTest.js:4:2717)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  47) Routes Handler
       &quot;before all&quot; hook in &quot;Routes Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap upsert which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/routesFuncTest.js:3:34556</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:29:178)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:3:34472)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at /home/lkoemmpel/Documents/wise-systems/wise-api/server/test/func/routeFuncTest.js:4:1332</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:29:178)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routeFuncTest.js:4:1041)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  48) Route Handler
       PATCH valid route requests
         &quot;before all&quot; hook for &quot;unassign entire route should fail if some of the non depot assignments are already started&quot;:
<font color="#CC0000">     Error: expected 200 &quot;OK&quot;, got 401 &quot;Unauthorized&quot;</font>
<font color="#555753">      at Test._assertStatus (node_modules/supertest/lib/test.js:268:12)</font>
<font color="#555753">      at /home/lkoemmpel/Documents/wise-systems/wise-api/server/lib/allLoader.js:5:2290</font>
<font color="#555753">      at Test._assertFunction (node_modules/supertest/lib/test.js:283:11)</font>
<font color="#555753">      at Test.assert (node_modules/supertest/lib/test.js:173:18)</font>
<font color="#555753">      at Server.localAssert (node_modules/supertest/lib/test.js:131:12)</font>
<font color="#555753">      at Server.&lt;anonymous&gt; (server/lib/allLoader.js:5:2290)</font>
<font color="#555753">      at Server.EventEmitter.emit (domain.js:482:12)</font>
<font color="#555753">      at emitCloseNT (net.js:1655:8)</font>
<font color="#555753">      at processTicksAndRejections (internal/process/task_queues.js:83:21)</font>

  49) Routes Handler
       &quot;after all&quot; hook in &quot;Routes Handler&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:3:34778)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  50) Routes Handler as anonymous
       &quot;before all&quot; hook in &quot;Routes Handler as anonymous&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:6:11785)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:3:34472)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  51) Routes Handler as anonymous
       &quot;after all&quot; hook in &quot;Routes Handler as anonymous&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;restore&apos; of undefined</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:6:11980)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  52) Rules Handler
       &quot;before each&quot; hook in &quot;Rules Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/rulesFuncTest.js:1:7125)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:3:34472)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  53) Rules Handler
       &quot;before each&quot; hook in &quot;Rules Handler&quot;:
<font color="#CC0000">     TypeError: Attempted to wrap authenticate which is already wrapped</font>
<font color="#555753">      at checkWrappedMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:40:21)</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:88:13)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/rulesFuncTest.js:1:7125)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>
<font color="#555753">  --------------</font>
<font color="#555753">  Error: Stack Trace for original</font>
<font color="#555753">      at wrapMethod (node_modules/sinon/lib/sinon/util/core/wrap-method.js:116:26)</font>
<font color="#555753">      at Function.stub (node_modules/sinon/lib/sinon/stub.js:111:44)</font>
<font color="#555753">      at Sandbox.stub (node_modules/sinon/lib/sinon/sandbox.js:331:37)</font>
<font color="#555753">      at mockAuth (server/test/util/testUtil.js:22:106)</font>
<font color="#555753">      at Object.loginIfEnabled (server/test/util/testUtil.js:28:1382)</font>
<font color="#555753">      at Context.&lt;anonymous&gt; (server/test/func/routesFuncTest.js:3:34472)</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>

  54) Routes Handler as driver not authorized
       &quot;after each&quot; hook in &quot;Routes Handler as driver not authorized&quot;:
<font color="#CC0000">     TypeError: Cannot read property &apos;call&apos; of undefined</font>
<font color="#555753">      at processImmediate (internal/timers.js:456:21)</font>
<font color="#555753">      at process.topLevelDomainCallback (domain.js:137:15)</font>



<span style="background-color:#2E3436"><font color="#D3D7CF">npm</font></span> <span style="background-color:#2E3436"><font color="#CC0000">ERR!</font></span> Test failed.  See above for more details.
<font color="#4E9A06"><b>lkoemmpel@laura-lenovo</b></font>:<font color="#3465A4"><b>~/Documents/wise-systems/wise-api</b></font>$ 
</pre>